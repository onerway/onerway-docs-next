import{C as e,M as t,O as a,r as o,N as n,L as s,G as r,d as u,w as l,f as i,S as d,U as c,R as p}from"./BOEjTd95.js";import{f as v,E as f,a as m}from"./m8uzoPnc.js";import{u as b}from"./DL4gl6Xz.js";const[I,S]=s("RovingFocusGroup"),T=e({__name:"RovingFocusGroup",props:{orientation:{default:void 0},dir:{},loop:{type:Boolean,default:!1},currentTabStopId:{},defaultCurrentTabStopId:{},preventScrollOnEntryFocus:{type:Boolean,default:!1},asChild:{type:Boolean},as:{}},emits:["entryFocus","update:currentTabStopId"],setup(e,{expose:s,emit:I}){const T=e,F=I,{loop:g,orientation:y,dir:C}=t(T),h=b(C),B=a(T,"currentTabStopId",F,{defaultValue:T.defaultCurrentTabStopId,passive:void 0===T.currentTabStopId}),E=o(!1),_=o(!1),x=o(0),{getItems:R,CollectionSlot:j}=n({isProvider:!0});function w(e){const t=!_.value;if(e.currentTarget&&e.target===e.currentTarget&&t&&!E.value){const t=new CustomEvent(f,m);if(e.currentTarget.dispatchEvent(t),F("entryFocus",t),!t.defaultPrevented){const e=R().map((e=>e.ref)).filter((e=>""!==e.dataset.disabled)),t=[e.find((e=>""===e.getAttribute("data-active"))),e.find((e=>e.id===B.value)),...e].filter(Boolean);v(t,T.preventScrollOnEntryFocus)}}_.value=!1}function G(){setTimeout((()=>{_.value=!1}),1)}return s({getItems:R}),S({loop:g,dir:h,orientation:y,currentTabStopId:B,onItemFocus:e=>{B.value=e},onItemShiftTab:()=>{E.value=!0},onFocusableItemAdd:()=>{x.value++},onFocusableItemRemove:()=>{x.value--}}),(e,t)=>(u(),r(d(j),null,{default:l((()=>[i(d(c),{tabindex:E.value||0===x.value?-1:0,"data-orientation":d(y),as:e.as,"as-child":e.asChild,dir:d(h),style:{outline:"none"},onMousedown:t[0]||(t[0]=e=>_.value=!0),onMouseup:G,onFocus:w,onBlur:t[1]||(t[1]=e=>E.value=!1)},{default:l((()=>[p(e.$slots,"default")])),_:3},8,["tabindex","data-orientation","as","as-child","dir"])])),_:3}))}});export{T as _,I as i};
