var e=Object.defineProperty,t=e=>{throw TypeError(e)},r=(t,r,s)=>((t,r,s)=>r in t?e(t,r,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[r]=s)(t,"symbol"!=typeof r?r+"":r,s),s=(e,r,s)=>r.has(e)||t("Cannot "+s),n=(e,t,r)=>(s(e,t,"read from private field"),r?r.call(e):t.get(e)),i=(e,r,s)=>r.has(e)?t("Cannot add the same private member more than once"):r instanceof WeakSet?r.add(e):r.set(e,s),o=(e,t,r,n)=>(s(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),a=(e,t,r)=>(s(e,t,"access private method"),r);import"./DG2-Gjhr.js";var l,c=(l=import.meta.url,function(e={}){var t,s,c=e,_=new Promise((e,r)=>{t=e,s=r}),u="object"==typeof window,d="function"==typeof importScripts;"object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node&&process.type;const f=globalThis.sqlite3InitModuleState||Object.assign(Object.create(null),{debugModule:()=>{}});delete globalThis.sqlite3InitModuleState,f.debugModule("globalThis.location =",globalThis.location);var p,h,m=Object.assign({},c),g="./this.program",q="";(u||d)&&(d?q=self.location.href:"undefined"!=typeof document&&document.currentScript&&(q=document.currentScript.src),l&&(q=l),q=q.startsWith("blob:")?"":q.substr(0,q.replace(/[?#].*/,"").lastIndexOf("/")+1),d&&(h=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),p=e=>fetch(e,{credentials:"same-origin"}).then(e=>e.ok?e.arrayBuffer():Promise.reject(new Error(e.status+" : "+e.url))));var b=c.print||function(){}.bind(),y=c.printErr||console.error.bind(console);Object.assign(c,m),m=null,c.arguments&&c.arguments,c.thisProgram&&(g=c.thisProgram);var w,E,x,S,A,I,k,T=c.wasmBinary,F=!1;function O(){var e=w.buffer;c.HEAP8=E=new Int8Array(e),c.HEAP16=S=new Int16Array(e),c.HEAPU8=x=new Uint8Array(e),c.HEAPU16=new Uint16Array(e),c.HEAP32=A=new Int32Array(e),c.HEAPU32=I=new Uint32Array(e),c.HEAPF32=new Float32Array(e),c.HEAPF64=new Float64Array(e),c.HEAP64=k=new BigInt64Array(e),c.HEAPU64=new BigUint64Array(e)}if(c.wasmMemory)w=c.wasmMemory;else{var P=c.INITIAL_MEMORY||16777216;w=new WebAssembly.Memory({initial:P/65536,maximum:32768})}O();var L=[],C=[],N=[];function D(e){L.unshift(e)}function j(e){N.unshift(e)}var R=0,M=null;function z(e){var t;R++,null==(t=c.monitorRunDependencies)||t.call(c,R)}function B(e){var t;if(R--,null==(t=c.monitorRunDependencies)||t.call(c,R),0==R&&M){var r=M;M=null,r()}}function U(e){var t;null==(t=c.onAbort)||t.call(c,e),y(e="Aborted("+e+")"),F=!0,e+=". Build with -sASSERTIONS for more info.";var r=new WebAssembly.RuntimeError(e);throw s(r),r}var Q,W=e=>e.startsWith("data:application/octet-stream;base64,");function H(){if(c.locateFile){var e="sqlite3.wasm";return W(e)?e:(t=e,c.locateFile?c.locateFile(t,q):q+t)}var t;return new URL(""+new URL("sqlite3.Ubkxdgq9.wasm",import.meta.url).href,import.meta.url).href}function V(e){if(e==Q&&T)return new Uint8Array(T);if(h)return h(e);throw"both async and sync fetching of the wasm failed"}function G(e,t,r){return function(e){return T?Promise.resolve().then(()=>V(e)):p(e).then(e=>new Uint8Array(e),()=>V(e))}(e).then(e=>WebAssembly.instantiate(e,t)).then(r,e=>{y(`failed to asynchronously prepare wasm: ${e}`),U(e)})}var $=e=>{e.forEach(e=>e(c))};c.noExitRuntime;var K={isAbs:e=>"/"===e.charAt(0),splitPath:e=>/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(e).slice(1),normalizeArray:(e,t)=>{for(var r=0,s=e.length-1;s>=0;s--){var n=e[s];"."===n?e.splice(s,1):".."===n?(e.splice(s,1),r++):r&&(e.splice(s,1),r--)}if(t)for(;r;r--)e.unshift("..");return e},normalize:e=>{var t=K.isAbs(e),r="/"===e.substr(-1);return(e=K.normalizeArray(e.split("/").filter(e=>!!e),!t).join("/"))||t||(e="."),e&&r&&(e+="/"),(t?"/":"")+e},dirname:e=>{var t=K.splitPath(e),r=t[0],s=t[1];return r||s?(s&&(s=s.substr(0,s.length-1)),r+s):"."},basename:e=>{if("/"===e)return"/";var t=(e=(e=K.normalize(e)).replace(/\/$/,"")).lastIndexOf("/");return-1===t?e:e.substr(t+1)},join:(...e)=>K.normalize(e.join("/")),join2:(e,t)=>K.normalize(e+"/"+t)},J=e=>(J=(()=>{if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues)return e=>crypto.getRandomValues(e);U("initRandomDevice")})())(e),X={resolve:(...e)=>{for(var t="",r=!1,s=e.length-1;s>=-1&&!r;s--){var n=s>=0?e[s]:_e.cwd();if("string"!=typeof n)throw new TypeError("Arguments to path.resolve must be strings");if(!n)return"";t=n+"/"+t,r=K.isAbs(n)}return(r?"/":"")+(t=K.normalizeArray(t.split("/").filter(e=>!!e),!r).join("/"))||"."},relative:(e,t)=>{function r(e){for(var t=0;t<e.length&&""===e[t];t++);for(var r=e.length-1;r>=0&&""===e[r];r--);return t>r?[]:e.slice(t,r-t+1)}e=X.resolve(e).substr(1),t=X.resolve(t).substr(1);for(var s=r(e.split("/")),n=r(t.split("/")),i=Math.min(s.length,n.length),o=i,a=0;a<i;a++)if(s[a]!==n[a]){o=a;break}var l=[];for(a=o;a<s.length;a++)l.push("..");return(l=l.concat(n.slice(o))).join("/")}},Y="undefined"!=typeof TextDecoder?new TextDecoder:void 0,Z=(e,t=0,r=NaN)=>{for(var s=t+r,n=t;e[n]&&!(n>=s);)++n;if(n-t>16&&e.buffer&&Y)return Y.decode(e.subarray(t,n));for(var i="";t<n;){var o=e[t++];if(128&o){var a=63&e[t++];if(192!=(224&o)){var l=63&e[t++];if((o=224==(240&o)?(15&o)<<12|a<<6|l:(7&o)<<18|a<<12|l<<6|63&e[t++])<65536)i+=String.fromCharCode(o);else{var c=o-65536;i+=String.fromCharCode(55296|c>>10,56320|1023&c)}}else i+=String.fromCharCode((31&o)<<6|a)}else i+=String.fromCharCode(o)}return i},ee=[],te=e=>{for(var t=0,r=0;r<e.length;++r){var s=e.charCodeAt(r);s<=127?t++:s<=2047?t+=2:s>=55296&&s<=57343?(t+=4,++r):t+=3}return t},re=(e,t,r,s)=>{if(!(s>0))return 0;for(var n=r,i=r+s-1,o=0;o<e.length;++o){var a=e.charCodeAt(o);if(a>=55296&&a<=57343&&(a=65536+((1023&a)<<10)|1023&e.charCodeAt(++o)),a<=127){if(r>=i)break;t[r++]=a}else if(a<=2047){if(r+1>=i)break;t[r++]=192|a>>6,t[r++]=128|63&a}else if(a<=65535){if(r+2>=i)break;t[r++]=224|a>>12,t[r++]=128|a>>6&63,t[r++]=128|63&a}else{if(r+3>=i)break;t[r++]=240|a>>18,t[r++]=128|a>>12&63,t[r++]=128|a>>6&63,t[r++]=128|63&a}}return t[r]=0,r-n};function se(e,t,r){var s=te(e)+1,n=new Array(s),i=re(e,n,0,n.length);return n.length=i,n}var ne={ttys:[],init(){},shutdown(){},register(e,t){ne.ttys[e]={input:[],output:[],ops:t},_e.registerDevice(e,ne.stream_ops)},stream_ops:{open(e){var t=ne.ttys[e.node.rdev];if(!t)throw new _e.ErrnoError(43);e.tty=t,e.seekable=!1},close(e){e.tty.ops.fsync(e.tty)},fsync(e){e.tty.ops.fsync(e.tty)},read(e,t,r,s,n){if(!e.tty||!e.tty.ops.get_char)throw new _e.ErrnoError(60);for(var i=0,o=0;o<s;o++){var a;try{a=e.tty.ops.get_char(e.tty)}catch(l){throw new _e.ErrnoError(29)}if(void 0===a&&0===i)throw new _e.ErrnoError(6);if(null==a)break;i++,t[r+o]=a}return i&&(e.node.timestamp=Date.now()),i},write(e,t,r,s,n){if(!e.tty||!e.tty.ops.put_char)throw new _e.ErrnoError(60);try{for(var i=0;i<s;i++)e.tty.ops.put_char(e.tty,t[r+i])}catch(o){throw new _e.ErrnoError(29)}return s&&(e.node.timestamp=Date.now()),i}},default_tty_ops:{get_char:e=>(()=>{if(!ee.length){var e=null;if("undefined"!=typeof window&&"function"==typeof window.prompt&&null!==(e=window.prompt("Input: "))&&(e+="\n"),!e)return null;ee=se(e)}return ee.shift()})(),put_char(e,t){null===t||10===t?(b(Z(e.output)),e.output=[]):0!=t&&e.output.push(t)},fsync(e){e.output&&e.output.length>0&&(b(Z(e.output)),e.output=[])},ioctl_tcgets:e=>({c_iflag:25856,c_oflag:5,c_cflag:191,c_lflag:35387,c_cc:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}),ioctl_tcsets:(e,t,r)=>0,ioctl_tiocgwinsz:e=>[24,80]},default_tty1_ops:{put_char(e,t){null===t||10===t?(y(Z(e.output)),e.output=[]):0!=t&&e.output.push(t)},fsync(e){e.output&&e.output.length>0&&(y(Z(e.output)),e.output=[])}}},ie=(e,t)=>Math.ceil(e/t)*t,oe=e=>{e=ie(e,65536);var t=Ae(65536,e);return t&&((e,t)=>{x.fill(0,e,e+t)})(t,e),t},ae={ops_table:null,mount:e=>ae.createNode(null,"/",16895,0),createNode(e,t,r,s){if(_e.isBlkdev(r)||_e.isFIFO(r))throw new _e.ErrnoError(63);ae.ops_table||(ae.ops_table={dir:{node:{getattr:ae.node_ops.getattr,setattr:ae.node_ops.setattr,lookup:ae.node_ops.lookup,mknod:ae.node_ops.mknod,rename:ae.node_ops.rename,unlink:ae.node_ops.unlink,rmdir:ae.node_ops.rmdir,readdir:ae.node_ops.readdir,symlink:ae.node_ops.symlink},stream:{llseek:ae.stream_ops.llseek}},file:{node:{getattr:ae.node_ops.getattr,setattr:ae.node_ops.setattr},stream:{llseek:ae.stream_ops.llseek,read:ae.stream_ops.read,write:ae.stream_ops.write,allocate:ae.stream_ops.allocate,mmap:ae.stream_ops.mmap,msync:ae.stream_ops.msync}},link:{node:{getattr:ae.node_ops.getattr,setattr:ae.node_ops.setattr,readlink:ae.node_ops.readlink},stream:{}},chrdev:{node:{getattr:ae.node_ops.getattr,setattr:ae.node_ops.setattr},stream:_e.chrdev_stream_ops}});var n=_e.createNode(e,t,r,s);return _e.isDir(n.mode)?(n.node_ops=ae.ops_table.dir.node,n.stream_ops=ae.ops_table.dir.stream,n.contents={}):_e.isFile(n.mode)?(n.node_ops=ae.ops_table.file.node,n.stream_ops=ae.ops_table.file.stream,n.usedBytes=0,n.contents=null):_e.isLink(n.mode)?(n.node_ops=ae.ops_table.link.node,n.stream_ops=ae.ops_table.link.stream):_e.isChrdev(n.mode)&&(n.node_ops=ae.ops_table.chrdev.node,n.stream_ops=ae.ops_table.chrdev.stream),n.timestamp=Date.now(),e&&(e.contents[t]=n,e.timestamp=n.timestamp),n},getFileDataAsTypedArray:e=>e.contents?e.contents.subarray?e.contents.subarray(0,e.usedBytes):new Uint8Array(e.contents):new Uint8Array(0),expandFileStorage(e,t){var r=e.contents?e.contents.length:0;if(!(r>=t)){t=Math.max(t,r*(r<1048576?2:1.125)>>>0),0!=r&&(t=Math.max(t,256));var s=e.contents;e.contents=new Uint8Array(t),e.usedBytes>0&&e.contents.set(s.subarray(0,e.usedBytes),0)}},resizeFileStorage(e,t){if(e.usedBytes!=t)if(0==t)e.contents=null,e.usedBytes=0;else{var r=e.contents;e.contents=new Uint8Array(t),r&&e.contents.set(r.subarray(0,Math.min(t,e.usedBytes))),e.usedBytes=t}},node_ops:{getattr(e){var t={};return t.dev=_e.isChrdev(e.mode)?e.id:1,t.ino=e.id,t.mode=e.mode,t.nlink=1,t.uid=0,t.gid=0,t.rdev=e.rdev,_e.isDir(e.mode)?t.size=4096:_e.isFile(e.mode)?t.size=e.usedBytes:_e.isLink(e.mode)?t.size=e.link.length:t.size=0,t.atime=new Date(e.timestamp),t.mtime=new Date(e.timestamp),t.ctime=new Date(e.timestamp),t.blksize=4096,t.blocks=Math.ceil(t.size/t.blksize),t},setattr(e,t){void 0!==t.mode&&(e.mode=t.mode),void 0!==t.timestamp&&(e.timestamp=t.timestamp),void 0!==t.size&&ae.resizeFileStorage(e,t.size)},lookup(e,t){throw _e.genericErrors[44]},mknod:(e,t,r,s)=>ae.createNode(e,t,r,s),rename(e,t,r){if(_e.isDir(e.mode)){var s;try{s=_e.lookupNode(t,r)}catch(i){}if(s)for(var n in s.contents)throw new _e.ErrnoError(55)}delete e.parent.contents[e.name],e.parent.timestamp=Date.now(),e.name=r,t.contents[r]=e,t.timestamp=e.parent.timestamp},unlink(e,t){delete e.contents[t],e.timestamp=Date.now()},rmdir(e,t){var r=_e.lookupNode(e,t);for(var s in r.contents)throw new _e.ErrnoError(55);delete e.contents[t],e.timestamp=Date.now()},readdir(e){var t=[".",".."];for(var r of Object.keys(e.contents))t.push(r);return t},symlink(e,t,r){var s=ae.createNode(e,t,41471,0);return s.link=r,s},readlink(e){if(!_e.isLink(e.mode))throw new _e.ErrnoError(28);return e.link}},stream_ops:{read(e,t,r,s,n){var i=e.node.contents;if(n>=e.node.usedBytes)return 0;var o=Math.min(e.node.usedBytes-n,s);if(o>8&&i.subarray)t.set(i.subarray(n,n+o),r);else for(var a=0;a<o;a++)t[r+a]=i[n+a];return o},write(e,t,r,s,n,i){if(t.buffer===E.buffer&&(i=!1),!s)return 0;var o=e.node;if(o.timestamp=Date.now(),t.subarray&&(!o.contents||o.contents.subarray)){if(i)return o.contents=t.subarray(r,r+s),o.usedBytes=s,s;if(0===o.usedBytes&&0===n)return o.contents=t.slice(r,r+s),o.usedBytes=s,s;if(n+s<=o.usedBytes)return o.contents.set(t.subarray(r,r+s),n),s}if(ae.expandFileStorage(o,n+s),o.contents.subarray&&t.subarray)o.contents.set(t.subarray(r,r+s),n);else for(var a=0;a<s;a++)o.contents[n+a]=t[r+a];return o.usedBytes=Math.max(o.usedBytes,n+s),s},llseek(e,t,r){var s=t;if(1===r?s+=e.position:2===r&&_e.isFile(e.node.mode)&&(s+=e.node.usedBytes),s<0)throw new _e.ErrnoError(28);return s},allocate(e,t,r){ae.expandFileStorage(e.node,t+r),e.node.usedBytes=Math.max(e.node.usedBytes,t+r)},mmap(e,t,r,s,n){if(!_e.isFile(e.node.mode))throw new _e.ErrnoError(43);var i,o,a=e.node.contents;if(2&n||!a||a.buffer!==E.buffer){if(o=!0,!(i=oe(t)))throw new _e.ErrnoError(48);a&&((r>0||r+t<a.length)&&(a=a.subarray?a.subarray(r,r+t):Array.prototype.slice.call(a,r,r+t)),E.set(a,i))}else o=!1,i=a.byteOffset;return{ptr:i,allocated:o}},msync:(e,t,r,s,n)=>(ae.stream_ops.write(e,t,0,s,r,!1),0)}},le=c.preloadPlugins||[],ce=(e,t)=>{var r=0;return e&&(r|=365),t&&(r|=146),r},_e={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,ErrnoError:class{constructor(e){this.name="ErrnoError",this.errno=e}},genericErrors:{},filesystems:null,syncFSRequests:0,readFiles:{},FSStream:class{constructor(){this.shared={}}get object(){return this.node}set object(e){this.node=e}get isRead(){return 1!=(2097155&this.flags)}get isWrite(){return!!(2097155&this.flags)}get isAppend(){return 1024&this.flags}get flags(){return this.shared.flags}set flags(e){this.shared.flags=e}get position(){return this.shared.position}set position(e){this.shared.position=e}},FSNode:class{constructor(e,t,r,s){e||(e=this),this.parent=e,this.mount=e.mount,this.mounted=null,this.id=_e.nextInode++,this.name=t,this.mode=r,this.node_ops={},this.stream_ops={},this.rdev=s,this.readMode=365,this.writeMode=146}get read(){return(this.mode&this.readMode)===this.readMode}set read(e){e?this.mode|=this.readMode:this.mode&=~this.readMode}get write(){return(this.mode&this.writeMode)===this.writeMode}set write(e){e?this.mode|=this.writeMode:this.mode&=~this.writeMode}get isFolder(){return _e.isDir(this.mode)}get isDevice(){return _e.isChrdev(this.mode)}},lookupPath(e,t={}){if(!(e=X.resolve(e)))return{path:"",node:null};if((t=Object.assign({follow_mount:!0,recurse_count:0},t)).recurse_count>8)throw new _e.ErrnoError(32);for(var r=e.split("/").filter(e=>!!e),s=_e.root,n="/",i=0;i<r.length;i++){var o=i===r.length-1;if(o&&t.parent)break;if(s=_e.lookupNode(s,r[i]),n=K.join2(n,r[i]),_e.isMountpoint(s)&&(!o||o&&t.follow_mount)&&(s=s.mounted.root),!o||t.follow)for(var a=0;_e.isLink(s.mode);){var l=_e.readlink(n);if(n=X.resolve(K.dirname(n),l),s=_e.lookupPath(n,{recurse_count:t.recurse_count+1}).node,a++>40)throw new _e.ErrnoError(32)}}return{path:n,node:s}},getPath(e){for(var t;;){if(_e.isRoot(e)){var r=e.mount.mountpoint;return t?"/"!==r[r.length-1]?`${r}/${t}`:r+t:r}t=t?`${e.name}/${t}`:e.name,e=e.parent}},hashName(e,t){for(var r=0,s=0;s<t.length;s++)r=(r<<5)-r+t.charCodeAt(s)|0;return(e+r>>>0)%_e.nameTable.length},hashAddNode(e){var t=_e.hashName(e.parent.id,e.name);e.name_next=_e.nameTable[t],_e.nameTable[t]=e},hashRemoveNode(e){var t=_e.hashName(e.parent.id,e.name);if(_e.nameTable[t]===e)_e.nameTable[t]=e.name_next;else for(var r=_e.nameTable[t];r;){if(r.name_next===e){r.name_next=e.name_next;break}r=r.name_next}},lookupNode(e,t){var r=_e.mayLookup(e);if(r)throw new _e.ErrnoError(r);for(var s=_e.hashName(e.id,t),n=_e.nameTable[s];n;n=n.name_next){var i=n.name;if(n.parent.id===e.id&&i===t)return n}return _e.lookup(e,t)},createNode(e,t,r,s){var n=new _e.FSNode(e,t,r,s);return _e.hashAddNode(n),n},destroyNode(e){_e.hashRemoveNode(e)},isRoot:e=>e===e.parent,isMountpoint:e=>!!e.mounted,isFile:e=>32768==(61440&e),isDir:e=>16384==(61440&e),isLink:e=>40960==(61440&e),isChrdev:e=>8192==(61440&e),isBlkdev:e=>24576==(61440&e),isFIFO:e=>4096==(61440&e),isSocket:e=>!(49152&~e),flagsToPermissionString(e){var t=["r","w","rw"][3&e];return 512&e&&(t+="w"),t},nodePermissions:(e,t)=>_e.ignorePermissions||(!t.includes("r")||292&e.mode)&&(!t.includes("w")||146&e.mode)&&(!t.includes("x")||73&e.mode)?0:2,mayLookup(e){if(!_e.isDir(e.mode))return 54;var t=_e.nodePermissions(e,"x");return t||(e.node_ops.lookup?0:2)},mayCreate(e,t){try{return _e.lookupNode(e,t),20}catch(r){}return _e.nodePermissions(e,"wx")},mayDelete(e,t,r){var s;try{s=_e.lookupNode(e,t)}catch(i){return i.errno}var n=_e.nodePermissions(e,"wx");if(n)return n;if(r){if(!_e.isDir(s.mode))return 54;if(_e.isRoot(s)||_e.getPath(s)===_e.cwd())return 10}else if(_e.isDir(s.mode))return 31;return 0},mayOpen:(e,t)=>e?_e.isLink(e.mode)?32:_e.isDir(e.mode)&&("r"!==_e.flagsToPermissionString(t)||512&t)?31:_e.nodePermissions(e,_e.flagsToPermissionString(t)):44,MAX_OPEN_FDS:4096,nextfd(){for(var e=0;e<=_e.MAX_OPEN_FDS;e++)if(!_e.streams[e])return e;throw new _e.ErrnoError(33)},getStreamChecked(e){var t=_e.getStream(e);if(!t)throw new _e.ErrnoError(8);return t},getStream:e=>_e.streams[e],createStream:(e,t=-1)=>(e=Object.assign(new _e.FSStream,e),-1==t&&(t=_e.nextfd()),e.fd=t,_e.streams[t]=e,e),closeStream(e){_e.streams[e]=null},dupStream(e,t=-1){var r,s,n=_e.createStream(e,t);return null==(s=null==(r=n.stream_ops)?void 0:r.dup)||s.call(r,n),n},chrdev_stream_ops:{open(e){var t,r,s=_e.getDevice(e.node.rdev);e.stream_ops=s.stream_ops,null==(r=(t=e.stream_ops).open)||r.call(t,e)},llseek(){throw new _e.ErrnoError(70)}},major:e=>e>>8,minor:e=>255&e,makedev:(e,t)=>e<<8|t,registerDevice(e,t){_e.devices[e]={stream_ops:t}},getDevice:e=>_e.devices[e],getMounts(e){for(var t=[],r=[e];r.length;){var s=r.pop();t.push(s),r.push(...s.mounts)}return t},syncfs(e,t){"function"==typeof e&&(t=e,e=!1),_e.syncFSRequests++,_e.syncFSRequests>1&&y(`warning: ${_e.syncFSRequests} FS.syncfs operations in flight at once, probably just doing extra work`);var r=_e.getMounts(_e.root.mount),s=0;function n(e){return _e.syncFSRequests--,t(e)}function i(e){if(e)return i.errored?void 0:(i.errored=!0,n(e));++s>=r.length&&n(null)}r.forEach(t=>{if(!t.type.syncfs)return i(null);t.type.syncfs(t,e,i)})},mount(e,t,r){var s,n="/"===r,i=!r;if(n&&_e.root)throw new _e.ErrnoError(10);if(!n&&!i){var o=_e.lookupPath(r,{follow_mount:!1});if(r=o.path,s=o.node,_e.isMountpoint(s))throw new _e.ErrnoError(10);if(!_e.isDir(s.mode))throw new _e.ErrnoError(54)}var a={type:e,opts:t,mountpoint:r,mounts:[]},l=e.mount(a);return l.mount=a,a.root=l,n?_e.root=l:s&&(s.mounted=a,s.mount&&s.mount.mounts.push(a)),l},unmount(e){var t=_e.lookupPath(e,{follow_mount:!1});if(!_e.isMountpoint(t.node))throw new _e.ErrnoError(28);var r=t.node,s=r.mounted,n=_e.getMounts(s);Object.keys(_e.nameTable).forEach(e=>{for(var t=_e.nameTable[e];t;){var r=t.name_next;n.includes(t.mount)&&_e.destroyNode(t),t=r}}),r.mounted=null;var i=r.mount.mounts.indexOf(s);r.mount.mounts.splice(i,1)},lookup:(e,t)=>e.node_ops.lookup(e,t),mknod(e,t,r){var s=_e.lookupPath(e,{parent:!0}).node,n=K.basename(e);if(!n||"."===n||".."===n)throw new _e.ErrnoError(28);var i=_e.mayCreate(s,n);if(i)throw new _e.ErrnoError(i);if(!s.node_ops.mknod)throw new _e.ErrnoError(63);return s.node_ops.mknod(s,n,t,r)},create:(e,t)=>(t=void 0!==t?t:438,t&=4095,t|=32768,_e.mknod(e,t,0)),mkdir:(e,t)=>(t=void 0!==t?t:511,t&=1023,t|=16384,_e.mknod(e,t,0)),mkdirTree(e,t){for(var r=e.split("/"),s="",n=0;n<r.length;++n)if(r[n]){s+="/"+r[n];try{_e.mkdir(s,t)}catch(i){if(20!=i.errno)throw i}}},mkdev:(e,t,r)=>(void 0===r&&(r=t,t=438),t|=8192,_e.mknod(e,t,r)),symlink(e,t){if(!X.resolve(e))throw new _e.ErrnoError(44);var r=_e.lookupPath(t,{parent:!0}).node;if(!r)throw new _e.ErrnoError(44);var s=K.basename(t),n=_e.mayCreate(r,s);if(n)throw new _e.ErrnoError(n);if(!r.node_ops.symlink)throw new _e.ErrnoError(63);return r.node_ops.symlink(r,s,e)},rename(e,t){var r,s,n=K.dirname(e),i=K.dirname(t),o=K.basename(e),a=K.basename(t);if(r=_e.lookupPath(e,{parent:!0}).node,s=_e.lookupPath(t,{parent:!0}).node,!r||!s)throw new _e.ErrnoError(44);if(r.mount!==s.mount)throw new _e.ErrnoError(75);var l,c=_e.lookupNode(r,o),_=X.relative(e,i);if("."!==_.charAt(0))throw new _e.ErrnoError(28);if("."!==(_=X.relative(t,n)).charAt(0))throw new _e.ErrnoError(55);try{l=_e.lookupNode(s,a)}catch(f){}if(c!==l){var u=_e.isDir(c.mode),d=_e.mayDelete(r,o,u);if(d)throw new _e.ErrnoError(d);if(d=l?_e.mayDelete(s,a,u):_e.mayCreate(s,a))throw new _e.ErrnoError(d);if(!r.node_ops.rename)throw new _e.ErrnoError(63);if(_e.isMountpoint(c)||l&&_e.isMountpoint(l))throw new _e.ErrnoError(10);if(s!==r&&(d=_e.nodePermissions(r,"w")))throw new _e.ErrnoError(d);_e.hashRemoveNode(c);try{r.node_ops.rename(c,s,a),c.parent=s}catch(f){throw f}finally{_e.hashAddNode(c)}}},rmdir(e){var t=_e.lookupPath(e,{parent:!0}).node,r=K.basename(e),s=_e.lookupNode(t,r),n=_e.mayDelete(t,r,!0);if(n)throw new _e.ErrnoError(n);if(!t.node_ops.rmdir)throw new _e.ErrnoError(63);if(_e.isMountpoint(s))throw new _e.ErrnoError(10);t.node_ops.rmdir(t,r),_e.destroyNode(s)},readdir(e){var t=_e.lookupPath(e,{follow:!0}).node;if(!t.node_ops.readdir)throw new _e.ErrnoError(54);return t.node_ops.readdir(t)},unlink(e){var t=_e.lookupPath(e,{parent:!0}).node;if(!t)throw new _e.ErrnoError(44);var r=K.basename(e),s=_e.lookupNode(t,r),n=_e.mayDelete(t,r,!1);if(n)throw new _e.ErrnoError(n);if(!t.node_ops.unlink)throw new _e.ErrnoError(63);if(_e.isMountpoint(s))throw new _e.ErrnoError(10);t.node_ops.unlink(t,r),_e.destroyNode(s)},readlink(e){var t=_e.lookupPath(e).node;if(!t)throw new _e.ErrnoError(44);if(!t.node_ops.readlink)throw new _e.ErrnoError(28);return X.resolve(_e.getPath(t.parent),t.node_ops.readlink(t))},stat(e,t){var r=_e.lookupPath(e,{follow:!t}).node;if(!r)throw new _e.ErrnoError(44);if(!r.node_ops.getattr)throw new _e.ErrnoError(63);return r.node_ops.getattr(r)},lstat:e=>_e.stat(e,!0),chmod(e,t,r){var s;if(!(s="string"==typeof e?_e.lookupPath(e,{follow:!r}).node:e).node_ops.setattr)throw new _e.ErrnoError(63);s.node_ops.setattr(s,{mode:4095&t|-4096&s.mode,timestamp:Date.now()})},lchmod(e,t){_e.chmod(e,t,!0)},fchmod(e,t){var r=_e.getStreamChecked(e);_e.chmod(r.node,t)},chown(e,t,r,s){var n;if(!(n="string"==typeof e?_e.lookupPath(e,{follow:!s}).node:e).node_ops.setattr)throw new _e.ErrnoError(63);n.node_ops.setattr(n,{timestamp:Date.now()})},lchown(e,t,r){_e.chown(e,t,r,!0)},fchown(e,t,r){var s=_e.getStreamChecked(e);_e.chown(s.node,t,r)},truncate(e,t){if(t<0)throw new _e.ErrnoError(28);var r;if(!(r="string"==typeof e?_e.lookupPath(e,{follow:!0}).node:e).node_ops.setattr)throw new _e.ErrnoError(63);if(_e.isDir(r.mode))throw new _e.ErrnoError(31);if(!_e.isFile(r.mode))throw new _e.ErrnoError(28);var s=_e.nodePermissions(r,"w");if(s)throw new _e.ErrnoError(s);r.node_ops.setattr(r,{size:t,timestamp:Date.now()})},ftruncate(e,t){var r=_e.getStreamChecked(e);if(!(2097155&r.flags))throw new _e.ErrnoError(28);_e.truncate(r.node,t)},utime(e,t,r){var s=_e.lookupPath(e,{follow:!0}).node;s.node_ops.setattr(s,{timestamp:Math.max(t,r)})},open(e,t,r){if(""===e)throw new _e.ErrnoError(44);var s;if(r=64&(t="string"==typeof t?(e=>{var t={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090}[e];if(void 0===t)throw new Error(`Unknown file open mode: ${e}`);return t})(t):t)?4095&(r=void 0===r?438:r)|32768:0,"object"==typeof e)s=e;else{e=K.normalize(e);try{s=_e.lookupPath(e,{follow:!(131072&t)}).node}catch(a){}}var n=!1;if(64&t)if(s){if(128&t)throw new _e.ErrnoError(20)}else s=_e.mknod(e,r,0),n=!0;if(!s)throw new _e.ErrnoError(44);if(_e.isChrdev(s.mode)&&(t&=-513),65536&t&&!_e.isDir(s.mode))throw new _e.ErrnoError(54);if(!n){var i=_e.mayOpen(s,t);if(i)throw new _e.ErrnoError(i)}512&t&&!n&&_e.truncate(s,0),t&=-131713;var o=_e.createStream({node:s,path:_e.getPath(s),flags:t,seekable:!0,position:0,stream_ops:s.stream_ops,ungotten:[],error:!1});return o.stream_ops.open&&o.stream_ops.open(o),!c.logReadFiles||1&t||e in _e.readFiles||(_e.readFiles[e]=1),o},close(e){if(_e.isClosed(e))throw new _e.ErrnoError(8);e.getdents&&(e.getdents=null);try{e.stream_ops.close&&e.stream_ops.close(e)}catch(t){throw t}finally{_e.closeStream(e.fd)}e.fd=null},isClosed:e=>null===e.fd,llseek(e,t,r){if(_e.isClosed(e))throw new _e.ErrnoError(8);if(!e.seekable||!e.stream_ops.llseek)throw new _e.ErrnoError(70);if(0!=r&&1!=r&&2!=r)throw new _e.ErrnoError(28);return e.position=e.stream_ops.llseek(e,t,r),e.ungotten=[],e.position},read(e,t,r,s,n){if(s<0||n<0)throw new _e.ErrnoError(28);if(_e.isClosed(e))throw new _e.ErrnoError(8);if(1==(2097155&e.flags))throw new _e.ErrnoError(8);if(_e.isDir(e.node.mode))throw new _e.ErrnoError(31);if(!e.stream_ops.read)throw new _e.ErrnoError(28);var i=void 0!==n;if(i){if(!e.seekable)throw new _e.ErrnoError(70)}else n=e.position;var o=e.stream_ops.read(e,t,r,s,n);return i||(e.position+=o),o},write(e,t,r,s,n,i){if(s<0||n<0)throw new _e.ErrnoError(28);if(_e.isClosed(e))throw new _e.ErrnoError(8);if(!(2097155&e.flags))throw new _e.ErrnoError(8);if(_e.isDir(e.node.mode))throw new _e.ErrnoError(31);if(!e.stream_ops.write)throw new _e.ErrnoError(28);e.seekable&&1024&e.flags&&_e.llseek(e,0,2);var o=void 0!==n;if(o){if(!e.seekable)throw new _e.ErrnoError(70)}else n=e.position;var a=e.stream_ops.write(e,t,r,s,n,i);return o||(e.position+=a),a},allocate(e,t,r){if(_e.isClosed(e))throw new _e.ErrnoError(8);if(t<0||r<=0)throw new _e.ErrnoError(28);if(!(2097155&e.flags))throw new _e.ErrnoError(8);if(!_e.isFile(e.node.mode)&&!_e.isDir(e.node.mode))throw new _e.ErrnoError(43);if(!e.stream_ops.allocate)throw new _e.ErrnoError(138);e.stream_ops.allocate(e,t,r)},mmap(e,t,r,s,n){if(2&s&&!(2&n)&&2!=(2097155&e.flags))throw new _e.ErrnoError(2);if(1==(2097155&e.flags))throw new _e.ErrnoError(2);if(!e.stream_ops.mmap)throw new _e.ErrnoError(43);if(!t)throw new _e.ErrnoError(28);return e.stream_ops.mmap(e,t,r,s,n)},msync:(e,t,r,s,n)=>e.stream_ops.msync?e.stream_ops.msync(e,t,r,s,n):0,ioctl(e,t,r){if(!e.stream_ops.ioctl)throw new _e.ErrnoError(59);return e.stream_ops.ioctl(e,t,r)},readFile(e,t={}){if(t.flags=t.flags||0,t.encoding=t.encoding||"binary","utf8"!==t.encoding&&"binary"!==t.encoding)throw new Error(`Invalid encoding type "${t.encoding}"`);var r,s=_e.open(e,t.flags),n=_e.stat(e).size,i=new Uint8Array(n);return _e.read(s,i,0,n,0),"utf8"===t.encoding?r=Z(i):"binary"===t.encoding&&(r=i),_e.close(s),r},writeFile(e,t,r={}){r.flags=r.flags||577;var s=_e.open(e,r.flags,r.mode);if("string"==typeof t){var n=new Uint8Array(te(t)+1),i=re(t,n,0,n.length);_e.write(s,n,0,i,void 0,r.canOwn)}else{if(!ArrayBuffer.isView(t))throw new Error("Unsupported data type");_e.write(s,t,0,t.byteLength,void 0,r.canOwn)}_e.close(s)},cwd:()=>_e.currentPath,chdir(e){var t=_e.lookupPath(e,{follow:!0});if(null===t.node)throw new _e.ErrnoError(44);if(!_e.isDir(t.node.mode))throw new _e.ErrnoError(54);var r=_e.nodePermissions(t.node,"x");if(r)throw new _e.ErrnoError(r);_e.currentPath=t.path},createDefaultDirectories(){_e.mkdir("/tmp"),_e.mkdir("/home"),_e.mkdir("/home/web_user")},createDefaultDevices(){_e.mkdir("/dev"),_e.registerDevice(_e.makedev(1,3),{read:()=>0,write:(e,t,r,s,n)=>s}),_e.mkdev("/dev/null",_e.makedev(1,3)),ne.register(_e.makedev(5,0),ne.default_tty_ops),ne.register(_e.makedev(6,0),ne.default_tty1_ops),_e.mkdev("/dev/tty",_e.makedev(5,0)),_e.mkdev("/dev/tty1",_e.makedev(6,0));var e=new Uint8Array(1024),t=0,r=()=>(0===t&&(t=J(e).byteLength),e[--t]);_e.createDevice("/dev","random",r),_e.createDevice("/dev","urandom",r),_e.mkdir("/dev/shm"),_e.mkdir("/dev/shm/tmp")},createSpecialDirectories(){_e.mkdir("/proc");var e=_e.mkdir("/proc/self");_e.mkdir("/proc/self/fd"),_e.mount({mount(){var t=_e.createNode(e,"fd",16895,73);return t.node_ops={lookup(e,t){var r=+t,s=_e.getStreamChecked(r),n={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:()=>s.path}};return n.parent=n,n}},t}},{},"/proc/self/fd")},createStandardStreams(e,t,r){e?_e.createDevice("/dev","stdin",e):_e.symlink("/dev/tty","/dev/stdin"),t?_e.createDevice("/dev","stdout",null,t):_e.symlink("/dev/tty","/dev/stdout"),r?_e.createDevice("/dev","stderr",null,r):_e.symlink("/dev/tty1","/dev/stderr"),_e.open("/dev/stdin",0),_e.open("/dev/stdout",1),_e.open("/dev/stderr",1)},staticInit(){[44].forEach(e=>{_e.genericErrors[e]=new _e.ErrnoError(e),_e.genericErrors[e].stack="<generic error, no stack>"}),_e.nameTable=new Array(4096),_e.mount(ae,{},"/"),_e.createDefaultDirectories(),_e.createDefaultDevices(),_e.createSpecialDirectories(),_e.filesystems={MEMFS:ae}},init(e,t,r){_e.initialized=!0,e??(e=c.stdin),t??(t=c.stdout),r??(r=c.stderr),_e.createStandardStreams(e,t,r)},quit(){_e.initialized=!1;for(var e=0;e<_e.streams.length;e++){var t=_e.streams[e];t&&_e.close(t)}},findObject(e,t){var r=_e.analyzePath(e,t);return r.exists?r.object:null},analyzePath(e,t){try{e=(s=_e.lookupPath(e,{follow:!t})).path}catch(n){}var r={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var s=_e.lookupPath(e,{parent:!0});r.parentExists=!0,r.parentPath=s.path,r.parentObject=s.node,r.name=K.basename(e),s=_e.lookupPath(e,{follow:!t}),r.exists=!0,r.path=s.path,r.object=s.node,r.name=s.node.name,r.isRoot="/"===s.path}catch(n){r.error=n.errno}return r},createPath(e,t,r,s){e="string"==typeof e?e:_e.getPath(e);for(var n=t.split("/").reverse();n.length;){var i=n.pop();if(i){var o=K.join2(e,i);try{_e.mkdir(o)}catch(a){}e=o}}return o},createFile(e,t,r,s,n){var i=K.join2("string"==typeof e?e:_e.getPath(e),t),o=ce(s,n);return _e.create(i,o)},createDataFile(e,t,r,s,n,i){var o=t;e&&(e="string"==typeof e?e:_e.getPath(e),o=t?K.join2(e,t):e);var a=ce(s,n),l=_e.create(o,a);if(r){if("string"==typeof r){for(var c=new Array(r.length),_=0,u=r.length;_<u;++_)c[_]=r.charCodeAt(_);r=c}_e.chmod(l,146|a);var d=_e.open(l,577);_e.write(d,r,0,r.length,0,i),_e.close(d),_e.chmod(l,a)}},createDevice(e,t,r,s){var n,i=K.join2("string"==typeof e?e:_e.getPath(e),t),o=ce(!!r,!!s);(n=_e.createDevice).major??(n.major=64);var a=_e.makedev(_e.createDevice.major++,0);return _e.registerDevice(a,{open(e){e.seekable=!1},close(e){var t;(null==(t=null==s?void 0:s.buffer)?void 0:t.length)&&s(10)},read(e,t,s,n,i){for(var o=0,a=0;a<n;a++){var l;try{l=r()}catch(c){throw new _e.ErrnoError(29)}if(void 0===l&&0===o)throw new _e.ErrnoError(6);if(null==l)break;o++,t[s+a]=l}return o&&(e.node.timestamp=Date.now()),o},write(e,t,r,n,i){for(var o=0;o<n;o++)try{s(t[r+o])}catch(a){throw new _e.ErrnoError(29)}return n&&(e.node.timestamp=Date.now()),o}}),_e.mkdev(i,o,a)},forceLoadFile(e){if(e.isDevice||e.isFolder||e.link||e.contents)return!0;if("undefined"!=typeof XMLHttpRequest)throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");try{e.contents=h(e.url),e.usedBytes=e.contents.length}catch(t){throw new _e.ErrnoError(29)}},createLazyFile(e,t,r,s,n){class i{constructor(){this.lengthKnown=!1,this.chunks=[]}get(e){if(!(e>this.length-1||e<0)){var t=e%this.chunkSize,r=e/this.chunkSize|0;return this.getter(r)[t]}}setDataGetter(e){this.getter=e}cacheLength(){var e=new XMLHttpRequest;if(e.open("HEAD",r,!1),e.send(null),!(e.status>=200&&e.status<300||304===e.status))throw new Error("Couldn't load "+r+". Status: "+e.status);var t,s=Number(e.getResponseHeader("Content-length")),n=(t=e.getResponseHeader("Accept-Ranges"))&&"bytes"===t,i=(t=e.getResponseHeader("Content-Encoding"))&&"gzip"===t,o=1048576;n||(o=s);var a=this;a.setDataGetter(e=>{var t=e*o,n=(e+1)*o-1;if(n=Math.min(n,s-1),void 0===a.chunks[e]&&(a.chunks[e]=((e,t)=>{if(e>t)throw new Error("invalid range ("+e+", "+t+") or no bytes requested!");if(t>s-1)throw new Error("only "+s+" bytes available! programmer error!");var n=new XMLHttpRequest;if(n.open("GET",r,!1),s!==o&&n.setRequestHeader("Range","bytes="+e+"-"+t),n.responseType="arraybuffer",n.overrideMimeType&&n.overrideMimeType("text/plain; charset=x-user-defined"),n.send(null),!(n.status>=200&&n.status<300||304===n.status))throw new Error("Couldn't load "+r+". Status: "+n.status);return void 0!==n.response?new Uint8Array(n.response||[]):se(n.responseText||"")})(t,n)),void 0===a.chunks[e])throw new Error("doXHR failed!");return a.chunks[e]}),!i&&s||(o=s=1,s=this.getter(0).length,o=s,b("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=s,this._chunkSize=o,this.lengthKnown=!0}get length(){return this.lengthKnown||this.cacheLength(),this._length}get chunkSize(){return this.lengthKnown||this.cacheLength(),this._chunkSize}}if("undefined"!=typeof XMLHttpRequest){if(!d)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var o={isDevice:!1,contents:new i}}else o={isDevice:!1,url:r};var a=_e.createFile(e,t,o,s,n);o.contents?a.contents=o.contents:o.url&&(a.contents=null,a.url=o.url),Object.defineProperties(a,{usedBytes:{get:function(){return this.contents.length}}});var l={};function c(e,t,r,s,n){var i=e.node.contents;if(n>=i.length)return 0;var o=Math.min(i.length-n,s);if(i.slice)for(var a=0;a<o;a++)t[r+a]=i[n+a];else for(a=0;a<o;a++)t[r+a]=i.get(n+a);return o}return Object.keys(a.stream_ops).forEach(e=>{var t=a.stream_ops[e];l[e]=(...e)=>(_e.forceLoadFile(a),t(...e))}),l.read=(e,t,r,s,n)=>(_e.forceLoadFile(a),c(e,t,r,s,n)),l.mmap=(e,t,r,s,n)=>{_e.forceLoadFile(a);var i=oe(t);if(!i)throw new _e.ErrnoError(48);return c(e,E,i,t,r),{ptr:i,allocated:!0}},a.stream_ops=l,a}},ue={DEFAULT_POLLMASK:5,calculateAt(e,t,r){if(K.isAbs(t))return t;var s;if(s=-100===e?_e.cwd():ue.getStreamFromFD(e).path,0==t.length){if(!r)throw new _e.ErrnoError(44);return s}return K.join2(s,t)},doStat(e,t,r){var s=e(t);A[r>>2]=s.dev,A[r+4>>2]=s.mode,I[r+8>>2]=s.nlink,A[r+12>>2]=s.uid,A[r+16>>2]=s.gid,A[r+20>>2]=s.rdev,k[r+24>>3]=BigInt(s.size),A[r+32>>2]=4096,A[r+36>>2]=s.blocks;var n=s.atime.getTime(),i=s.mtime.getTime(),o=s.ctime.getTime();return k[r+40>>3]=BigInt(Math.floor(n/1e3)),I[r+48>>2]=n%1e3*1e3*1e3,k[r+56>>3]=BigInt(Math.floor(i/1e3)),I[r+64>>2]=i%1e3*1e3*1e3,k[r+72>>3]=BigInt(Math.floor(o/1e3)),I[r+80>>2]=o%1e3*1e3*1e3,k[r+88>>3]=BigInt(s.ino),0},doMsync(e,t,r,s,n){if(!_e.isFile(t.node.mode))throw new _e.ErrnoError(43);if(2&s)return 0;var i=x.slice(e,e+r);_e.msync(t,i,n,r,s)},getStreamFromFD:e=>_e.getStreamChecked(e),varargs:void 0,getStr(e){var t=((e,t)=>e?Z(x,e,t):"")(e);return t}};function de(){var e=A[+ue.varargs>>2];return ue.varargs+=4,e}var fe=de,pe=e=>e<-9007199254740992||e>9007199254740992?NaN:Number(e),he=(e,t,r)=>re(e,x,t,r),me=e=>I[e>>2]+4294967296*A[e+4>>2],ge=[0,31,60,91,121,152,182,213,244,274,305,335],qe=[0,31,59,90,120,151,181,212,243,273,304,334],be=e=>{var t=(e-w.buffer.byteLength+65535)/65536|0;try{return w.grow(t),O(),1}catch(r){}},ye={},we=()=>{if(!we.strings){var e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:g||"./this.program"};for(var t in ye)void 0===ye[t]?delete e[t]:e[t]=ye[t];var r=[];for(var t in e)r.push(`${t}=${e[t]}`);we.strings=r}return we.strings};_e.createPreloadedFile=(e,t,r,s,n,i,o,a,l,c)=>{var _=t?X.resolve(K.join2(e,t)):e;function u(r){function u(r){null==c||c(),a||((e,t,r,s,n,i)=>{_e.createDataFile(e,t,r,s,n,i)})(e,t,r,s,n,l),null==i||i(),B()}((e,t,r,s)=>{"undefined"!=typeof Browser&&Browser.init();var n=!1;return le.forEach(i=>{n||i.canHandle(t)&&(i.handle(e,t,r,s),n=!0)}),n})(r,_,u,()=>{null==o||o(),B()})||u(r)}z(),"string"==typeof r?((e,t,r)=>{var s=`al ${e}`;p(e).then(e=>{t(new Uint8Array(e)),s&&B()},t=>{if(!r)throw`Loading data file "${e}" failed.`;r()}),s&&z()})(r,u,o):u(r)},_e.staticInit();var ve={__syscall_chmod:function(e,t){try{return e=ue.getStr(e),_e.chmod(e,t),0}catch(r){if(void 0===_e||"ErrnoError"!==r.name)throw r;return-r.errno}},__syscall_faccessat:function(e,t,r,s){try{if(t=ue.getStr(t),t=ue.calculateAt(e,t),-8&r)return-28;var n=_e.lookupPath(t,{follow:!0}).node;if(!n)return-44;var i="";return 4&r&&(i+="r"),2&r&&(i+="w"),1&r&&(i+="x"),i&&_e.nodePermissions(n,i)?-2:0}catch(o){if(void 0===_e||"ErrnoError"!==o.name)throw o;return-o.errno}},__syscall_fchmod:function(e,t){try{return _e.fchmod(e,t),0}catch(r){if(void 0===_e||"ErrnoError"!==r.name)throw r;return-r.errno}},__syscall_fchown32:function(e,t,r){try{return _e.fchown(e,t,r),0}catch(s){if(void 0===_e||"ErrnoError"!==s.name)throw s;return-s.errno}},__syscall_fcntl64:function(e,t,r){ue.varargs=r;try{var s=ue.getStreamFromFD(e);switch(t){case 0:if((n=de())<0)return-28;for(;_e.streams[n];)n++;return _e.dupStream(s,n).fd;case 1:case 2:case 13:case 14:return 0;case 3:return s.flags;case 4:var n=de();return s.flags|=n,0;case 12:return n=fe(),S[n+0>>1]=2,0}return-28}catch(i){if(void 0===_e||"ErrnoError"!==i.name)throw i;return-i.errno}},__syscall_fstat64:function(e,t){try{var r=ue.getStreamFromFD(e);return ue.doStat(_e.stat,r.path,t)}catch(s){if(void 0===_e||"ErrnoError"!==s.name)throw s;return-s.errno}},__syscall_ftruncate64:function(e,t){t=pe(t);try{return isNaN(t)?61:(_e.ftruncate(e,t),0)}catch(r){if(void 0===_e||"ErrnoError"!==r.name)throw r;return-r.errno}},__syscall_getcwd:function(e,t){try{if(0===t)return-28;var r=_e.cwd(),s=te(r)+1;return t<s?-68:(he(r,e,t),s)}catch(n){if(void 0===_e||"ErrnoError"!==n.name)throw n;return-n.errno}},__syscall_ioctl:function(e,t,r){ue.varargs=r;try{var s=ue.getStreamFromFD(e);switch(t){case 21509:case 21510:case 21511:case 21512:case 21524:case 21515:return s.tty?0:-59;case 21505:if(!s.tty)return-59;if(s.tty.ops.ioctl_tcgets){var n=s.tty.ops.ioctl_tcgets(s),i=fe();A[i>>2]=n.c_iflag||0,A[i+4>>2]=n.c_oflag||0,A[i+8>>2]=n.c_cflag||0,A[i+12>>2]=n.c_lflag||0;for(var o=0;o<32;o++)E[i+o+17]=n.c_cc[o]||0;return 0}return 0;case 21506:case 21507:case 21508:if(!s.tty)return-59;if(s.tty.ops.ioctl_tcsets){i=fe();var a=A[i>>2],l=A[i+4>>2],c=A[i+8>>2],_=A[i+12>>2],u=[];for(o=0;o<32;o++)u.push(E[i+o+17]);return s.tty.ops.ioctl_tcsets(s.tty,t,{c_iflag:a,c_oflag:l,c_cflag:c,c_lflag:_,c_cc:u})}return 0;case 21519:return s.tty?(i=fe(),A[i>>2]=0,0):-59;case 21520:return s.tty?-28:-59;case 21531:return i=fe(),_e.ioctl(s,t,i);case 21523:if(!s.tty)return-59;if(s.tty.ops.ioctl_tiocgwinsz){var d=s.tty.ops.ioctl_tiocgwinsz(s.tty);i=fe(),S[i>>1]=d[0],S[i+2>>1]=d[1]}return 0;default:return-28}}catch(f){if(void 0===_e||"ErrnoError"!==f.name)throw f;return-f.errno}},__syscall_lstat64:function(e,t){try{return e=ue.getStr(e),ue.doStat(_e.lstat,e,t)}catch(r){if(void 0===_e||"ErrnoError"!==r.name)throw r;return-r.errno}},__syscall_mkdirat:function(e,t,r){try{return t=ue.getStr(t),t=ue.calculateAt(e,t),"/"===(t=K.normalize(t))[t.length-1]&&(t=t.substr(0,t.length-1)),_e.mkdir(t,r,0),0}catch(s){if(void 0===_e||"ErrnoError"!==s.name)throw s;return-s.errno}},__syscall_newfstatat:function(e,t,r,s){try{t=ue.getStr(t);var n=256&s,i=4096&s;return s&=-6401,t=ue.calculateAt(e,t,i),ue.doStat(n?_e.lstat:_e.stat,t,r)}catch(o){if(void 0===_e||"ErrnoError"!==o.name)throw o;return-o.errno}},__syscall_openat:function(e,t,r,s){ue.varargs=s;try{t=ue.getStr(t),t=ue.calculateAt(e,t);var n=s?de():0;return _e.open(t,r,n).fd}catch(i){if(void 0===_e||"ErrnoError"!==i.name)throw i;return-i.errno}},__syscall_readlinkat:function(e,t,r,s){try{if(t=ue.getStr(t),t=ue.calculateAt(e,t),s<=0)return-28;var n=_e.readlink(t),i=Math.min(s,te(n)),o=E[r+i];return he(n,r,s+1),E[r+i]=o,i}catch(a){if(void 0===_e||"ErrnoError"!==a.name)throw a;return-a.errno}},__syscall_rmdir:function(e){try{return e=ue.getStr(e),_e.rmdir(e),0}catch(t){if(void 0===_e||"ErrnoError"!==t.name)throw t;return-t.errno}},__syscall_stat64:function(e,t){try{return e=ue.getStr(e),ue.doStat(_e.stat,e,t)}catch(r){if(void 0===_e||"ErrnoError"!==r.name)throw r;return-r.errno}},__syscall_unlinkat:function(e,t,r){try{return t=ue.getStr(t),t=ue.calculateAt(e,t),0===r?_e.unlink(t):512===r?_e.rmdir(t):U("Invalid flags passed to unlinkat"),0}catch(s){if(void 0===_e||"ErrnoError"!==s.name)throw s;return-s.errno}},__syscall_utimensat:function(e,t,r,s){try{t=ue.getStr(t),t=ue.calculateAt(e,t,!0);var n,i,o=Date.now();if(r){var a=me(r),l=A[r+8>>2];n=1073741823==l?o:1073741822==l?-1:1e3*a+l/1e6,a=me(r+=16),i=1073741823==(l=A[r+8>>2])?o:1073741822==l?-1:1e3*a+l/1e6}else n=o,i=o;return-1==i&&-1==n||_e.utime(t,n,i),0}catch(c){if(void 0===_e||"ErrnoError"!==c.name)throw c;return-c.errno}},_emscripten_get_now_is_monotonic:()=>1,_localtime_js:function(e,t){e=pe(e);var r=new Date(1e3*e);A[t>>2]=r.getSeconds(),A[t+4>>2]=r.getMinutes(),A[t+8>>2]=r.getHours(),A[t+12>>2]=r.getDate(),A[t+16>>2]=r.getMonth(),A[t+20>>2]=r.getFullYear()-1900,A[t+24>>2]=r.getDay();var s=0|(e=>{var t;return((t=e.getFullYear())%4!=0||t%100==0&&t%400!=0?qe:ge)[e.getMonth()]+e.getDate()-1})(r);A[t+28>>2]=s,A[t+36>>2]=-60*r.getTimezoneOffset();var n=new Date(r.getFullYear(),0,1),i=new Date(r.getFullYear(),6,1).getTimezoneOffset(),o=n.getTimezoneOffset(),a=0|(i!=o&&r.getTimezoneOffset()==Math.min(o,i));A[t+32>>2]=a},_mmap_js:function(e,t,r,s,n,i,o){n=pe(n);try{if(isNaN(n))return 61;var a=ue.getStreamFromFD(s),l=_e.mmap(a,e,n,t,r),c=l.ptr;return A[i>>2]=l.allocated,I[o>>2]=c,0}catch(_){if(void 0===_e||"ErrnoError"!==_.name)throw _;return-_.errno}},_munmap_js:function(e,t,r,s,n,i){i=pe(i);try{var o=ue.getStreamFromFD(n);2&r&&ue.doMsync(e,o,t,s,i)}catch(a){if(void 0===_e||"ErrnoError"!==a.name)throw a;return-a.errno}},_tzset_js:(e,t,r,s)=>{var n=(new Date).getFullYear(),i=new Date(n,0,1),o=new Date(n,6,1),a=i.getTimezoneOffset(),l=o.getTimezoneOffset(),c=Math.max(a,l);I[e>>2]=60*c,A[t>>2]=Number(a!=l);var _=e=>{var t=e>=0?"-":"+",r=Math.abs(e);return`UTC${t}${String(Math.floor(r/60)).padStart(2,"0")}${String(r%60).padStart(2,"0")}`},u=_(a),d=_(l);l<a?(he(u,r,17),he(d,s,17)):(he(u,s,17),he(d,r,17))},emscripten_date_now:()=>Date.now(),emscripten_get_now:()=>performance.now(),emscripten_resize_heap:e=>{var t=x.length,r=2147483648;if((e>>>=0)>r)return!1;for(var s=1;s<=4;s*=2){var n=t*(1+.2/s);n=Math.min(n,e+100663296);var i=Math.min(r,ie(Math.max(e,n),65536));if(be(i))return!0}return!1},environ_get:(e,t)=>{var r=0;return we().forEach((s,n)=>{var i=t+r;I[e+4*n>>2]=i,((e,t)=>{for(var r=0;r<e.length;++r)E[t++]=e.charCodeAt(r);E[t]=0})(s,i),r+=s.length+1}),0},environ_sizes_get:(e,t)=>{var r=we();I[e>>2]=r.length;var s=0;return r.forEach(e=>s+=e.length+1),I[t>>2]=s,0},fd_close:function(e){try{var t=ue.getStreamFromFD(e);return _e.close(t),0}catch(r){if(void 0===_e||"ErrnoError"!==r.name)throw r;return r.errno}},fd_fdstat_get:function(e,t){try{var r=ue.getStreamFromFD(e),s=r.tty?2:_e.isDir(r.mode)?3:_e.isLink(r.mode)?7:4;return E[t]=s,S[t+2>>1]=0,k[t+8>>3]=BigInt(0),k[t+16>>3]=BigInt(0),0}catch(n){if(void 0===_e||"ErrnoError"!==n.name)throw n;return n.errno}},fd_read:function(e,t,r,s){try{var n=((e,t,r,s)=>{for(var n=0,i=0;i<r;i++){var o=I[t>>2],a=I[t+4>>2];t+=8;var l=_e.read(e,E,o,a,s);if(l<0)return-1;if(n+=l,l<a)break}return n})(ue.getStreamFromFD(e),t,r);return I[s>>2]=n,0}catch(i){if(void 0===_e||"ErrnoError"!==i.name)throw i;return i.errno}},fd_seek:function(e,t,r,s){t=pe(t);try{if(isNaN(t))return 61;var n=ue.getStreamFromFD(e);return _e.llseek(n,t,r),k[s>>3]=BigInt(n.position),n.getdents&&0===t&&0===r&&(n.getdents=null),0}catch(i){if(void 0===_e||"ErrnoError"!==i.name)throw i;return i.errno}},fd_sync:function(e){var t;try{var r=ue.getStreamFromFD(e);return(null==(t=r.stream_ops)?void 0:t.fsync)?r.stream_ops.fsync(r):0}catch(s){if(void 0===_e||"ErrnoError"!==s.name)throw s;return s.errno}},fd_write:function(e,t,r,s){try{var n=((e,t,r,s)=>{for(var n=0,i=0;i<r;i++){var o=I[t>>2],a=I[t+4>>2];t+=8;var l=_e.write(e,E,o,a,s);if(l<0)return-1;if(n+=l,l<a)break}return n})(ue.getStreamFromFD(e),t,r);return I[s>>2]=n,0}catch(i){if(void 0===_e||"ErrnoError"!==i.name)throw i;return i.errno}},memory:w},Ee=function(){var e,t,r,n,i={env:ve,wasi_snapshot_preview1:ve};function o(e,t){var r;return Ee=e.exports,r=Ee.__wasm_call_ctors,C.unshift(r),B(),Ee}if(z(),c.instantiateWasm)try{return c.instantiateWasm(i,o)}catch(a){y(`Module.instantiateWasm callback failed with error: ${a}`),s(a)}return Q??(Q=H()),(e=T,t=Q,r=i,n=function(e){o(e.instance)},e||"function"!=typeof WebAssembly.instantiateStreaming||W(t)||"function"!=typeof fetch?G(t,r,n):fetch(t,{credentials:"same-origin"}).then(e=>WebAssembly.instantiateStreaming(e,r).then(n,function(e){return y(`wasm streaming compile failed: ${e}`),y("falling back to ArrayBuffer instantiation"),G(t,r,n)}))).catch(s),{}}();c._sqlite3_status64=(e,t,r,s)=>(c._sqlite3_status64=Ee.sqlite3_status64)(e,t,r,s),c._sqlite3_status=(e,t,r,s)=>(c._sqlite3_status=Ee.sqlite3_status)(e,t,r,s),c._sqlite3_db_status=(e,t,r,s,n)=>(c._sqlite3_db_status=Ee.sqlite3_db_status)(e,t,r,s,n),c._sqlite3_msize=e=>(c._sqlite3_msize=Ee.sqlite3_msize)(e),c._sqlite3_vfs_find=e=>(c._sqlite3_vfs_find=Ee.sqlite3_vfs_find)(e),c._sqlite3_initialize=()=>(c._sqlite3_initialize=Ee.sqlite3_initialize)(),c._sqlite3_malloc=e=>(c._sqlite3_malloc=Ee.sqlite3_malloc)(e),c._sqlite3_free=e=>(c._sqlite3_free=Ee.sqlite3_free)(e),c._sqlite3_vfs_register=(e,t)=>(c._sqlite3_vfs_register=Ee.sqlite3_vfs_register)(e,t),c._sqlite3_vfs_unregister=e=>(c._sqlite3_vfs_unregister=Ee.sqlite3_vfs_unregister)(e),c._sqlite3_malloc64=e=>(c._sqlite3_malloc64=Ee.sqlite3_malloc64)(e),c._sqlite3_realloc=(e,t)=>(c._sqlite3_realloc=Ee.sqlite3_realloc)(e,t),c._sqlite3_realloc64=(e,t)=>(c._sqlite3_realloc64=Ee.sqlite3_realloc64)(e,t),c._sqlite3_value_text=e=>(c._sqlite3_value_text=Ee.sqlite3_value_text)(e),c._sqlite3_randomness=(e,t)=>(c._sqlite3_randomness=Ee.sqlite3_randomness)(e,t),c._sqlite3_stricmp=(e,t)=>(c._sqlite3_stricmp=Ee.sqlite3_stricmp)(e,t),c._sqlite3_strnicmp=(e,t,r)=>(c._sqlite3_strnicmp=Ee.sqlite3_strnicmp)(e,t,r),c._sqlite3_uri_parameter=(e,t)=>(c._sqlite3_uri_parameter=Ee.sqlite3_uri_parameter)(e,t),c._sqlite3_uri_boolean=(e,t,r)=>(c._sqlite3_uri_boolean=Ee.sqlite3_uri_boolean)(e,t,r),c._sqlite3_serialize=(e,t,r,s)=>(c._sqlite3_serialize=Ee.sqlite3_serialize)(e,t,r,s),c._sqlite3_prepare_v2=(e,t,r,s,n)=>(c._sqlite3_prepare_v2=Ee.sqlite3_prepare_v2)(e,t,r,s,n),c._sqlite3_step=e=>(c._sqlite3_step=Ee.sqlite3_step)(e),c._sqlite3_column_int64=(e,t)=>(c._sqlite3_column_int64=Ee.sqlite3_column_int64)(e,t),c._sqlite3_reset=e=>(c._sqlite3_reset=Ee.sqlite3_reset)(e),c._sqlite3_exec=(e,t,r,s,n)=>(c._sqlite3_exec=Ee.sqlite3_exec)(e,t,r,s,n),c._sqlite3_column_int=(e,t)=>(c._sqlite3_column_int=Ee.sqlite3_column_int)(e,t),c._sqlite3_finalize=e=>(c._sqlite3_finalize=Ee.sqlite3_finalize)(e),c._sqlite3_file_control=(e,t,r,s)=>(c._sqlite3_file_control=Ee.sqlite3_file_control)(e,t,r,s),c._sqlite3_column_name=(e,t)=>(c._sqlite3_column_name=Ee.sqlite3_column_name)(e,t),c._sqlite3_column_text=(e,t)=>(c._sqlite3_column_text=Ee.sqlite3_column_text)(e,t),c._sqlite3_column_type=(e,t)=>(c._sqlite3_column_type=Ee.sqlite3_column_type)(e,t),c._sqlite3_errmsg=e=>(c._sqlite3_errmsg=Ee.sqlite3_errmsg)(e),c._sqlite3_deserialize=(e,t,r,s,n,i)=>(c._sqlite3_deserialize=Ee.sqlite3_deserialize)(e,t,r,s,n,i),c._sqlite3_clear_bindings=e=>(c._sqlite3_clear_bindings=Ee.sqlite3_clear_bindings)(e),c._sqlite3_value_blob=e=>(c._sqlite3_value_blob=Ee.sqlite3_value_blob)(e),c._sqlite3_value_bytes=e=>(c._sqlite3_value_bytes=Ee.sqlite3_value_bytes)(e),c._sqlite3_value_double=e=>(c._sqlite3_value_double=Ee.sqlite3_value_double)(e),c._sqlite3_value_int=e=>(c._sqlite3_value_int=Ee.sqlite3_value_int)(e),c._sqlite3_value_int64=e=>(c._sqlite3_value_int64=Ee.sqlite3_value_int64)(e),c._sqlite3_value_subtype=e=>(c._sqlite3_value_subtype=Ee.sqlite3_value_subtype)(e),c._sqlite3_value_pointer=(e,t)=>(c._sqlite3_value_pointer=Ee.sqlite3_value_pointer)(e,t),c._sqlite3_value_type=e=>(c._sqlite3_value_type=Ee.sqlite3_value_type)(e),c._sqlite3_value_nochange=e=>(c._sqlite3_value_nochange=Ee.sqlite3_value_nochange)(e),c._sqlite3_value_frombind=e=>(c._sqlite3_value_frombind=Ee.sqlite3_value_frombind)(e),c._sqlite3_value_dup=e=>(c._sqlite3_value_dup=Ee.sqlite3_value_dup)(e),c._sqlite3_value_free=e=>(c._sqlite3_value_free=Ee.sqlite3_value_free)(e),c._sqlite3_result_blob=(e,t,r,s)=>(c._sqlite3_result_blob=Ee.sqlite3_result_blob)(e,t,r,s),c._sqlite3_result_error_toobig=e=>(c._sqlite3_result_error_toobig=Ee.sqlite3_result_error_toobig)(e),c._sqlite3_result_error_nomem=e=>(c._sqlite3_result_error_nomem=Ee.sqlite3_result_error_nomem)(e),c._sqlite3_result_double=(e,t)=>(c._sqlite3_result_double=Ee.sqlite3_result_double)(e,t),c._sqlite3_result_error=(e,t,r)=>(c._sqlite3_result_error=Ee.sqlite3_result_error)(e,t,r),c._sqlite3_result_int=(e,t)=>(c._sqlite3_result_int=Ee.sqlite3_result_int)(e,t),c._sqlite3_result_int64=(e,t)=>(c._sqlite3_result_int64=Ee.sqlite3_result_int64)(e,t),c._sqlite3_result_null=e=>(c._sqlite3_result_null=Ee.sqlite3_result_null)(e),c._sqlite3_result_pointer=(e,t,r,s)=>(c._sqlite3_result_pointer=Ee.sqlite3_result_pointer)(e,t,r,s),c._sqlite3_result_subtype=(e,t)=>(c._sqlite3_result_subtype=Ee.sqlite3_result_subtype)(e,t),c._sqlite3_result_text=(e,t,r,s)=>(c._sqlite3_result_text=Ee.sqlite3_result_text)(e,t,r,s),c._sqlite3_result_zeroblob=(e,t)=>(c._sqlite3_result_zeroblob=Ee.sqlite3_result_zeroblob)(e,t),c._sqlite3_result_zeroblob64=(e,t)=>(c._sqlite3_result_zeroblob64=Ee.sqlite3_result_zeroblob64)(e,t),c._sqlite3_result_error_code=(e,t)=>(c._sqlite3_result_error_code=Ee.sqlite3_result_error_code)(e,t),c._sqlite3_user_data=e=>(c._sqlite3_user_data=Ee.sqlite3_user_data)(e),c._sqlite3_context_db_handle=e=>(c._sqlite3_context_db_handle=Ee.sqlite3_context_db_handle)(e),c._sqlite3_vtab_nochange=e=>(c._sqlite3_vtab_nochange=Ee.sqlite3_vtab_nochange)(e),c._sqlite3_vtab_in_first=(e,t)=>(c._sqlite3_vtab_in_first=Ee.sqlite3_vtab_in_first)(e,t),c._sqlite3_vtab_in_next=(e,t)=>(c._sqlite3_vtab_in_next=Ee.sqlite3_vtab_in_next)(e,t),c._sqlite3_aggregate_context=(e,t)=>(c._sqlite3_aggregate_context=Ee.sqlite3_aggregate_context)(e,t),c._sqlite3_get_auxdata=(e,t)=>(c._sqlite3_get_auxdata=Ee.sqlite3_get_auxdata)(e,t),c._sqlite3_set_auxdata=(e,t,r,s)=>(c._sqlite3_set_auxdata=Ee.sqlite3_set_auxdata)(e,t,r,s),c._sqlite3_column_count=e=>(c._sqlite3_column_count=Ee.sqlite3_column_count)(e),c._sqlite3_data_count=e=>(c._sqlite3_data_count=Ee.sqlite3_data_count)(e),c._sqlite3_column_blob=(e,t)=>(c._sqlite3_column_blob=Ee.sqlite3_column_blob)(e,t),c._sqlite3_column_bytes=(e,t)=>(c._sqlite3_column_bytes=Ee.sqlite3_column_bytes)(e,t),c._sqlite3_column_double=(e,t)=>(c._sqlite3_column_double=Ee.sqlite3_column_double)(e,t),c._sqlite3_column_value=(e,t)=>(c._sqlite3_column_value=Ee.sqlite3_column_value)(e,t),c._sqlite3_column_decltype=(e,t)=>(c._sqlite3_column_decltype=Ee.sqlite3_column_decltype)(e,t),c._sqlite3_bind_blob=(e,t,r,s,n)=>(c._sqlite3_bind_blob=Ee.sqlite3_bind_blob)(e,t,r,s,n),c._sqlite3_bind_double=(e,t,r)=>(c._sqlite3_bind_double=Ee.sqlite3_bind_double)(e,t,r),c._sqlite3_bind_int=(e,t,r)=>(c._sqlite3_bind_int=Ee.sqlite3_bind_int)(e,t,r),c._sqlite3_bind_int64=(e,t,r)=>(c._sqlite3_bind_int64=Ee.sqlite3_bind_int64)(e,t,r),c._sqlite3_bind_null=(e,t)=>(c._sqlite3_bind_null=Ee.sqlite3_bind_null)(e,t),c._sqlite3_bind_pointer=(e,t,r,s,n)=>(c._sqlite3_bind_pointer=Ee.sqlite3_bind_pointer)(e,t,r,s,n),c._sqlite3_bind_text=(e,t,r,s,n)=>(c._sqlite3_bind_text=Ee.sqlite3_bind_text)(e,t,r,s,n),c._sqlite3_bind_parameter_count=e=>(c._sqlite3_bind_parameter_count=Ee.sqlite3_bind_parameter_count)(e),c._sqlite3_bind_parameter_name=(e,t)=>(c._sqlite3_bind_parameter_name=Ee.sqlite3_bind_parameter_name)(e,t),c._sqlite3_bind_parameter_index=(e,t)=>(c._sqlite3_bind_parameter_index=Ee.sqlite3_bind_parameter_index)(e,t),c._sqlite3_db_handle=e=>(c._sqlite3_db_handle=Ee.sqlite3_db_handle)(e),c._sqlite3_stmt_readonly=e=>(c._sqlite3_stmt_readonly=Ee.sqlite3_stmt_readonly)(e),c._sqlite3_stmt_isexplain=e=>(c._sqlite3_stmt_isexplain=Ee.sqlite3_stmt_isexplain)(e),c._sqlite3_stmt_explain=(e,t)=>(c._sqlite3_stmt_explain=Ee.sqlite3_stmt_explain)(e,t),c._sqlite3_stmt_busy=e=>(c._sqlite3_stmt_busy=Ee.sqlite3_stmt_busy)(e),c._sqlite3_stmt_status=(e,t,r)=>(c._sqlite3_stmt_status=Ee.sqlite3_stmt_status)(e,t,r),c._sqlite3_sql=e=>(c._sqlite3_sql=Ee.sqlite3_sql)(e),c._sqlite3_expanded_sql=e=>(c._sqlite3_expanded_sql=Ee.sqlite3_expanded_sql)(e),c._sqlite3_preupdate_old=(e,t,r)=>(c._sqlite3_preupdate_old=Ee.sqlite3_preupdate_old)(e,t,r),c._sqlite3_preupdate_count=e=>(c._sqlite3_preupdate_count=Ee.sqlite3_preupdate_count)(e),c._sqlite3_preupdate_depth=e=>(c._sqlite3_preupdate_depth=Ee.sqlite3_preupdate_depth)(e),c._sqlite3_preupdate_blobwrite=e=>(c._sqlite3_preupdate_blobwrite=Ee.sqlite3_preupdate_blobwrite)(e),c._sqlite3_preupdate_new=(e,t,r)=>(c._sqlite3_preupdate_new=Ee.sqlite3_preupdate_new)(e,t,r),c._sqlite3_value_numeric_type=e=>(c._sqlite3_value_numeric_type=Ee.sqlite3_value_numeric_type)(e),c._sqlite3_set_authorizer=(e,t,r)=>(c._sqlite3_set_authorizer=Ee.sqlite3_set_authorizer)(e,t,r),c._sqlite3_strglob=(e,t)=>(c._sqlite3_strglob=Ee.sqlite3_strglob)(e,t),c._sqlite3_strlike=(e,t,r)=>(c._sqlite3_strlike=Ee.sqlite3_strlike)(e,t,r),c._sqlite3_auto_extension=e=>(c._sqlite3_auto_extension=Ee.sqlite3_auto_extension)(e),c._sqlite3_cancel_auto_extension=e=>(c._sqlite3_cancel_auto_extension=Ee.sqlite3_cancel_auto_extension)(e),c._sqlite3_reset_auto_extension=()=>(c._sqlite3_reset_auto_extension=Ee.sqlite3_reset_auto_extension)(),c._sqlite3_prepare_v3=(e,t,r,s,n,i)=>(c._sqlite3_prepare_v3=Ee.sqlite3_prepare_v3)(e,t,r,s,n,i),c._sqlite3_create_module=(e,t,r,s)=>(c._sqlite3_create_module=Ee.sqlite3_create_module)(e,t,r,s),c._sqlite3_create_module_v2=(e,t,r,s,n)=>(c._sqlite3_create_module_v2=Ee.sqlite3_create_module_v2)(e,t,r,s,n),c._sqlite3_drop_modules=(e,t)=>(c._sqlite3_drop_modules=Ee.sqlite3_drop_modules)(e,t),c._sqlite3_declare_vtab=(e,t)=>(c._sqlite3_declare_vtab=Ee.sqlite3_declare_vtab)(e,t),c._sqlite3_vtab_on_conflict=e=>(c._sqlite3_vtab_on_conflict=Ee.sqlite3_vtab_on_conflict)(e),c._sqlite3_vtab_collation=(e,t)=>(c._sqlite3_vtab_collation=Ee.sqlite3_vtab_collation)(e,t),c._sqlite3_vtab_in=(e,t,r)=>(c._sqlite3_vtab_in=Ee.sqlite3_vtab_in)(e,t,r),c._sqlite3_vtab_rhs_value=(e,t,r)=>(c._sqlite3_vtab_rhs_value=Ee.sqlite3_vtab_rhs_value)(e,t,r),c._sqlite3_vtab_distinct=e=>(c._sqlite3_vtab_distinct=Ee.sqlite3_vtab_distinct)(e),c._sqlite3_keyword_name=(e,t,r)=>(c._sqlite3_keyword_name=Ee.sqlite3_keyword_name)(e,t,r),c._sqlite3_keyword_count=()=>(c._sqlite3_keyword_count=Ee.sqlite3_keyword_count)(),c._sqlite3_keyword_check=(e,t)=>(c._sqlite3_keyword_check=Ee.sqlite3_keyword_check)(e,t),c._sqlite3_complete=e=>(c._sqlite3_complete=Ee.sqlite3_complete)(e),c._sqlite3_libversion=()=>(c._sqlite3_libversion=Ee.sqlite3_libversion)(),c._sqlite3_libversion_number=()=>(c._sqlite3_libversion_number=Ee.sqlite3_libversion_number)(),c._sqlite3_shutdown=()=>(c._sqlite3_shutdown=Ee.sqlite3_shutdown)(),c._sqlite3_last_insert_rowid=e=>(c._sqlite3_last_insert_rowid=Ee.sqlite3_last_insert_rowid)(e),c._sqlite3_set_last_insert_rowid=(e,t)=>(c._sqlite3_set_last_insert_rowid=Ee.sqlite3_set_last_insert_rowid)(e,t),c._sqlite3_changes64=e=>(c._sqlite3_changes64=Ee.sqlite3_changes64)(e),c._sqlite3_changes=e=>(c._sqlite3_changes=Ee.sqlite3_changes)(e),c._sqlite3_total_changes64=e=>(c._sqlite3_total_changes64=Ee.sqlite3_total_changes64)(e),c._sqlite3_total_changes=e=>(c._sqlite3_total_changes=Ee.sqlite3_total_changes)(e),c._sqlite3_txn_state=(e,t)=>(c._sqlite3_txn_state=Ee.sqlite3_txn_state)(e,t),c._sqlite3_close_v2=e=>(c._sqlite3_close_v2=Ee.sqlite3_close_v2)(e),c._sqlite3_busy_handler=(e,t,r)=>(c._sqlite3_busy_handler=Ee.sqlite3_busy_handler)(e,t,r),c._sqlite3_progress_handler=(e,t,r,s)=>(c._sqlite3_progress_handler=Ee.sqlite3_progress_handler)(e,t,r,s),c._sqlite3_busy_timeout=(e,t)=>(c._sqlite3_busy_timeout=Ee.sqlite3_busy_timeout)(e,t),c._sqlite3_interrupt=e=>(c._sqlite3_interrupt=Ee.sqlite3_interrupt)(e),c._sqlite3_is_interrupted=e=>(c._sqlite3_is_interrupted=Ee.sqlite3_is_interrupted)(e),c._sqlite3_create_function=(e,t,r,s,n,i,o,a)=>(c._sqlite3_create_function=Ee.sqlite3_create_function)(e,t,r,s,n,i,o,a),c._sqlite3_create_function_v2=(e,t,r,s,n,i,o,a,l)=>(c._sqlite3_create_function_v2=Ee.sqlite3_create_function_v2)(e,t,r,s,n,i,o,a,l),c._sqlite3_create_window_function=(e,t,r,s,n,i,o,a,l,_)=>(c._sqlite3_create_window_function=Ee.sqlite3_create_window_function)(e,t,r,s,n,i,o,a,l,_),c._sqlite3_overload_function=(e,t,r)=>(c._sqlite3_overload_function=Ee.sqlite3_overload_function)(e,t,r),c._sqlite3_trace_v2=(e,t,r,s)=>(c._sqlite3_trace_v2=Ee.sqlite3_trace_v2)(e,t,r,s),c._sqlite3_commit_hook=(e,t,r)=>(c._sqlite3_commit_hook=Ee.sqlite3_commit_hook)(e,t,r),c._sqlite3_update_hook=(e,t,r)=>(c._sqlite3_update_hook=Ee.sqlite3_update_hook)(e,t,r),c._sqlite3_rollback_hook=(e,t,r)=>(c._sqlite3_rollback_hook=Ee.sqlite3_rollback_hook)(e,t,r),c._sqlite3_preupdate_hook=(e,t,r)=>(c._sqlite3_preupdate_hook=Ee.sqlite3_preupdate_hook)(e,t,r),c._sqlite3_error_offset=e=>(c._sqlite3_error_offset=Ee.sqlite3_error_offset)(e),c._sqlite3_errcode=e=>(c._sqlite3_errcode=Ee.sqlite3_errcode)(e),c._sqlite3_extended_errcode=e=>(c._sqlite3_extended_errcode=Ee.sqlite3_extended_errcode)(e),c._sqlite3_errstr=e=>(c._sqlite3_errstr=Ee.sqlite3_errstr)(e),c._sqlite3_limit=(e,t,r)=>(c._sqlite3_limit=Ee.sqlite3_limit)(e,t,r),c._sqlite3_open=(e,t)=>(c._sqlite3_open=Ee.sqlite3_open)(e,t),c._sqlite3_open_v2=(e,t,r,s)=>(c._sqlite3_open_v2=Ee.sqlite3_open_v2)(e,t,r,s),c._sqlite3_create_collation=(e,t,r,s,n)=>(c._sqlite3_create_collation=Ee.sqlite3_create_collation)(e,t,r,s,n),c._sqlite3_create_collation_v2=(e,t,r,s,n,i)=>(c._sqlite3_create_collation_v2=Ee.sqlite3_create_collation_v2)(e,t,r,s,n,i),c._sqlite3_collation_needed=(e,t,r)=>(c._sqlite3_collation_needed=Ee.sqlite3_collation_needed)(e,t,r),c._sqlite3_get_autocommit=e=>(c._sqlite3_get_autocommit=Ee.sqlite3_get_autocommit)(e),c._sqlite3_table_column_metadata=(e,t,r,s,n,i,o,a,l)=>(c._sqlite3_table_column_metadata=Ee.sqlite3_table_column_metadata)(e,t,r,s,n,i,o,a,l),c._sqlite3_extended_result_codes=(e,t)=>(c._sqlite3_extended_result_codes=Ee.sqlite3_extended_result_codes)(e,t),c._sqlite3_uri_key=(e,t)=>(c._sqlite3_uri_key=Ee.sqlite3_uri_key)(e,t),c._sqlite3_uri_int64=(e,t,r)=>(c._sqlite3_uri_int64=Ee.sqlite3_uri_int64)(e,t,r),c._sqlite3_db_name=(e,t)=>(c._sqlite3_db_name=Ee.sqlite3_db_name)(e,t),c._sqlite3_db_filename=(e,t)=>(c._sqlite3_db_filename=Ee.sqlite3_db_filename)(e,t),c._sqlite3_db_readonly=(e,t)=>(c._sqlite3_db_readonly=Ee.sqlite3_db_readonly)(e,t),c._sqlite3_compileoption_used=e=>(c._sqlite3_compileoption_used=Ee.sqlite3_compileoption_used)(e),c._sqlite3_compileoption_get=e=>(c._sqlite3_compileoption_get=Ee.sqlite3_compileoption_get)(e),c._sqlite3session_diff=(e,t,r,s)=>(c._sqlite3session_diff=Ee.sqlite3session_diff)(e,t,r,s),c._sqlite3session_attach=(e,t)=>(c._sqlite3session_attach=Ee.sqlite3session_attach)(e,t),c._sqlite3session_create=(e,t,r)=>(c._sqlite3session_create=Ee.sqlite3session_create)(e,t,r),c._sqlite3session_delete=e=>(c._sqlite3session_delete=Ee.sqlite3session_delete)(e),c._sqlite3session_table_filter=(e,t,r)=>(c._sqlite3session_table_filter=Ee.sqlite3session_table_filter)(e,t,r),c._sqlite3session_changeset=(e,t,r)=>(c._sqlite3session_changeset=Ee.sqlite3session_changeset)(e,t,r),c._sqlite3session_changeset_strm=(e,t,r)=>(c._sqlite3session_changeset_strm=Ee.sqlite3session_changeset_strm)(e,t,r),c._sqlite3session_patchset_strm=(e,t,r)=>(c._sqlite3session_patchset_strm=Ee.sqlite3session_patchset_strm)(e,t,r),c._sqlite3session_patchset=(e,t,r)=>(c._sqlite3session_patchset=Ee.sqlite3session_patchset)(e,t,r),c._sqlite3session_enable=(e,t)=>(c._sqlite3session_enable=Ee.sqlite3session_enable)(e,t),c._sqlite3session_indirect=(e,t)=>(c._sqlite3session_indirect=Ee.sqlite3session_indirect)(e,t),c._sqlite3session_isempty=e=>(c._sqlite3session_isempty=Ee.sqlite3session_isempty)(e),c._sqlite3session_memory_used=e=>(c._sqlite3session_memory_used=Ee.sqlite3session_memory_used)(e),c._sqlite3session_object_config=(e,t,r)=>(c._sqlite3session_object_config=Ee.sqlite3session_object_config)(e,t,r),c._sqlite3session_changeset_size=e=>(c._sqlite3session_changeset_size=Ee.sqlite3session_changeset_size)(e),c._sqlite3changeset_start=(e,t,r)=>(c._sqlite3changeset_start=Ee.sqlite3changeset_start)(e,t,r),c._sqlite3changeset_start_v2=(e,t,r,s)=>(c._sqlite3changeset_start_v2=Ee.sqlite3changeset_start_v2)(e,t,r,s),c._sqlite3changeset_start_strm=(e,t,r)=>(c._sqlite3changeset_start_strm=Ee.sqlite3changeset_start_strm)(e,t,r),c._sqlite3changeset_start_v2_strm=(e,t,r,s)=>(c._sqlite3changeset_start_v2_strm=Ee.sqlite3changeset_start_v2_strm)(e,t,r,s),c._sqlite3changeset_next=e=>(c._sqlite3changeset_next=Ee.sqlite3changeset_next)(e),c._sqlite3changeset_op=(e,t,r,s,n)=>(c._sqlite3changeset_op=Ee.sqlite3changeset_op)(e,t,r,s,n),c._sqlite3changeset_pk=(e,t,r)=>(c._sqlite3changeset_pk=Ee.sqlite3changeset_pk)(e,t,r),c._sqlite3changeset_old=(e,t,r)=>(c._sqlite3changeset_old=Ee.sqlite3changeset_old)(e,t,r),c._sqlite3changeset_new=(e,t,r)=>(c._sqlite3changeset_new=Ee.sqlite3changeset_new)(e,t,r),c._sqlite3changeset_conflict=(e,t,r)=>(c._sqlite3changeset_conflict=Ee.sqlite3changeset_conflict)(e,t,r),c._sqlite3changeset_fk_conflicts=(e,t)=>(c._sqlite3changeset_fk_conflicts=Ee.sqlite3changeset_fk_conflicts)(e,t),c._sqlite3changeset_finalize=e=>(c._sqlite3changeset_finalize=Ee.sqlite3changeset_finalize)(e),c._sqlite3changeset_invert=(e,t,r,s)=>(c._sqlite3changeset_invert=Ee.sqlite3changeset_invert)(e,t,r,s),c._sqlite3changeset_invert_strm=(e,t,r,s)=>(c._sqlite3changeset_invert_strm=Ee.sqlite3changeset_invert_strm)(e,t,r,s),c._sqlite3changeset_apply_v2=(e,t,r,s,n,i,o,a,l)=>(c._sqlite3changeset_apply_v2=Ee.sqlite3changeset_apply_v2)(e,t,r,s,n,i,o,a,l),c._sqlite3changeset_apply=(e,t,r,s,n,i)=>(c._sqlite3changeset_apply=Ee.sqlite3changeset_apply)(e,t,r,s,n,i),c._sqlite3changeset_apply_v2_strm=(e,t,r,s,n,i,o,a,l)=>(c._sqlite3changeset_apply_v2_strm=Ee.sqlite3changeset_apply_v2_strm)(e,t,r,s,n,i,o,a,l),c._sqlite3changeset_apply_strm=(e,t,r,s,n,i)=>(c._sqlite3changeset_apply_strm=Ee.sqlite3changeset_apply_strm)(e,t,r,s,n,i),c._sqlite3changegroup_new=e=>(c._sqlite3changegroup_new=Ee.sqlite3changegroup_new)(e),c._sqlite3changegroup_add=(e,t,r)=>(c._sqlite3changegroup_add=Ee.sqlite3changegroup_add)(e,t,r),c._sqlite3changegroup_output=(e,t,r)=>(c._sqlite3changegroup_output=Ee.sqlite3changegroup_output)(e,t,r),c._sqlite3changegroup_add_strm=(e,t,r)=>(c._sqlite3changegroup_add_strm=Ee.sqlite3changegroup_add_strm)(e,t,r),c._sqlite3changegroup_output_strm=(e,t,r)=>(c._sqlite3changegroup_output_strm=Ee.sqlite3changegroup_output_strm)(e,t,r),c._sqlite3changegroup_delete=e=>(c._sqlite3changegroup_delete=Ee.sqlite3changegroup_delete)(e),c._sqlite3changeset_concat=(e,t,r,s,n,i)=>(c._sqlite3changeset_concat=Ee.sqlite3changeset_concat)(e,t,r,s,n,i),c._sqlite3changeset_concat_strm=(e,t,r,s,n,i)=>(c._sqlite3changeset_concat_strm=Ee.sqlite3changeset_concat_strm)(e,t,r,s,n,i),c._sqlite3session_config=(e,t)=>(c._sqlite3session_config=Ee.sqlite3session_config)(e,t),c._sqlite3_sourceid=()=>(c._sqlite3_sourceid=Ee.sqlite3_sourceid)(),c._sqlite3__wasm_pstack_ptr=()=>(c._sqlite3__wasm_pstack_ptr=Ee.sqlite3__wasm_pstack_ptr)(),c._sqlite3__wasm_pstack_restore=e=>(c._sqlite3__wasm_pstack_restore=Ee.sqlite3__wasm_pstack_restore)(e),c._sqlite3__wasm_pstack_alloc=e=>(c._sqlite3__wasm_pstack_alloc=Ee.sqlite3__wasm_pstack_alloc)(e),c._sqlite3__wasm_pstack_remaining=()=>(c._sqlite3__wasm_pstack_remaining=Ee.sqlite3__wasm_pstack_remaining)(),c._sqlite3__wasm_pstack_quota=()=>(c._sqlite3__wasm_pstack_quota=Ee.sqlite3__wasm_pstack_quota)(),c._sqlite3__wasm_db_error=(e,t,r)=>(c._sqlite3__wasm_db_error=Ee.sqlite3__wasm_db_error)(e,t,r),c._sqlite3__wasm_test_struct=e=>(c._sqlite3__wasm_test_struct=Ee.sqlite3__wasm_test_struct)(e),c._sqlite3__wasm_enum_json=()=>(c._sqlite3__wasm_enum_json=Ee.sqlite3__wasm_enum_json)(),c._sqlite3__wasm_vfs_unlink=(e,t)=>(c._sqlite3__wasm_vfs_unlink=Ee.sqlite3__wasm_vfs_unlink)(e,t),c._sqlite3__wasm_db_vfs=(e,t)=>(c._sqlite3__wasm_db_vfs=Ee.sqlite3__wasm_db_vfs)(e,t),c._sqlite3__wasm_db_reset=e=>(c._sqlite3__wasm_db_reset=Ee.sqlite3__wasm_db_reset)(e),c._sqlite3__wasm_db_export_chunked=(e,t)=>(c._sqlite3__wasm_db_export_chunked=Ee.sqlite3__wasm_db_export_chunked)(e,t),c._sqlite3__wasm_db_serialize=(e,t,r,s,n)=>(c._sqlite3__wasm_db_serialize=Ee.sqlite3__wasm_db_serialize)(e,t,r,s,n),c._sqlite3__wasm_vfs_create_file=(e,t,r,s)=>(c._sqlite3__wasm_vfs_create_file=Ee.sqlite3__wasm_vfs_create_file)(e,t,r,s),c._sqlite3__wasm_posix_create_file=(e,t,r)=>(c._sqlite3__wasm_posix_create_file=Ee.sqlite3__wasm_posix_create_file)(e,t,r),c._sqlite3__wasm_kvvfsMakeKeyOnPstack=(e,t)=>(c._sqlite3__wasm_kvvfsMakeKeyOnPstack=Ee.sqlite3__wasm_kvvfsMakeKeyOnPstack)(e,t),c._sqlite3__wasm_kvvfs_methods=()=>(c._sqlite3__wasm_kvvfs_methods=Ee.sqlite3__wasm_kvvfs_methods)(),c._sqlite3__wasm_vtab_config=(e,t,r)=>(c._sqlite3__wasm_vtab_config=Ee.sqlite3__wasm_vtab_config)(e,t,r),c._sqlite3__wasm_db_config_ip=(e,t,r,s)=>(c._sqlite3__wasm_db_config_ip=Ee.sqlite3__wasm_db_config_ip)(e,t,r,s),c._sqlite3__wasm_db_config_pii=(e,t,r,s,n)=>(c._sqlite3__wasm_db_config_pii=Ee.sqlite3__wasm_db_config_pii)(e,t,r,s,n),c._sqlite3__wasm_db_config_s=(e,t,r)=>(c._sqlite3__wasm_db_config_s=Ee.sqlite3__wasm_db_config_s)(e,t,r),c._sqlite3__wasm_config_i=(e,t)=>(c._sqlite3__wasm_config_i=Ee.sqlite3__wasm_config_i)(e,t),c._sqlite3__wasm_config_ii=(e,t,r)=>(c._sqlite3__wasm_config_ii=Ee.sqlite3__wasm_config_ii)(e,t,r),c._sqlite3__wasm_config_j=(e,t)=>(c._sqlite3__wasm_config_j=Ee.sqlite3__wasm_config_j)(e,t),c._sqlite3__wasm_qfmt_token=(e,t)=>(c._sqlite3__wasm_qfmt_token=Ee.sqlite3__wasm_qfmt_token)(e,t),c._sqlite3__wasm_init_wasmfs=e=>(c._sqlite3__wasm_init_wasmfs=Ee.sqlite3__wasm_init_wasmfs)(e),c._sqlite3__wasm_test_intptr=e=>(c._sqlite3__wasm_test_intptr=Ee.sqlite3__wasm_test_intptr)(e),c._sqlite3__wasm_test_voidptr=e=>(c._sqlite3__wasm_test_voidptr=Ee.sqlite3__wasm_test_voidptr)(e),c._sqlite3__wasm_test_int64_max=()=>(c._sqlite3__wasm_test_int64_max=Ee.sqlite3__wasm_test_int64_max)(),c._sqlite3__wasm_test_int64_min=()=>(c._sqlite3__wasm_test_int64_min=Ee.sqlite3__wasm_test_int64_min)(),c._sqlite3__wasm_test_int64_times2=e=>(c._sqlite3__wasm_test_int64_times2=Ee.sqlite3__wasm_test_int64_times2)(e),c._sqlite3__wasm_test_int64_minmax=(e,t)=>(c._sqlite3__wasm_test_int64_minmax=Ee.sqlite3__wasm_test_int64_minmax)(e,t),c._sqlite3__wasm_test_int64ptr=e=>(c._sqlite3__wasm_test_int64ptr=Ee.sqlite3__wasm_test_int64ptr)(e),c._sqlite3__wasm_test_stack_overflow=e=>(c._sqlite3__wasm_test_stack_overflow=Ee.sqlite3__wasm_test_stack_overflow)(e),c._sqlite3__wasm_test_str_hello=e=>(c._sqlite3__wasm_test_str_hello=Ee.sqlite3__wasm_test_str_hello)(e),c._sqlite3__wasm_SQLTester_strglob=(e,t)=>(c._sqlite3__wasm_SQLTester_strglob=Ee.sqlite3__wasm_SQLTester_strglob)(e,t),c._malloc=e=>(c._malloc=Ee.malloc)(e),c._free=e=>(c._free=Ee.free)(e),c._realloc=(e,t)=>(c._realloc=Ee.realloc)(e,t);var xe,Se,Ae=(e,t)=>(Ae=Ee.emscripten_builtin_memalign)(e,t);function Ie(){var e;function r(){var e,r;xe||(xe=1,c.calledRun=1,F||(c.noFSInit||_e.initialized||_e.init(),_e.ignorePermissions=!1,$(C),t(c),null==(e=c.onRuntimeInitialized)||e.call(c),(r=c.postRun)&&("function"==typeof r&&(r=[r]),r.forEach(j)),$(N)))}R>0||!Se&&(Se=1,(e=c.preRun)&&("function"==typeof e&&(e=[e]),e.forEach(D)),$(L),R>0)||(c.setStatus?(c.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>c.setStatus(""),1),r()},1)):r())}if(c.wasmMemory=w,M=function e(){xe||Ie(),xe||(M=e)},c.preInit)for("function"==typeof c.preInit&&(c.preInit=[c.preInit]);c.preInit.length>0;)c.preInit.pop()();return Ie(),c.runSQLite3PostLoadInit=function(e){if(globalThis.sqlite3ApiBootstrap=function e(t=globalThis.sqlite3ApiConfig||e.defaultConfig){if(e.sqlite3)return(e.sqlite3.config||console).warn("sqlite3ApiBootstrap() called multiple times.","Config and external initializers are ignored on calls after the first."),e.sqlite3;const r=Object.assign(Object.create(null),{exports:void 0,memory:void 0,bigIntEnabled:!(void 0===c||!c.HEAPU64)||!!globalThis.BigInt64Array,debug:console.debug.bind(console),warn:console.warn.bind(console),error:console.error.bind(console),log:function(){}.bind(),wasmfsOpfsDir:"/opfs",useStdAlloc:!1},t||{});Object.assign(r,{allocExportName:r.useStdAlloc?"malloc":"sqlite3_malloc",deallocExportName:r.useStdAlloc?"free":"sqlite3_free",reallocExportName:r.useStdAlloc?"realloc":"sqlite3_realloc"},r),["exports","memory","wasmfsOpfsDir"].forEach(e=>{"function"==typeof r[e]&&(r[e]=r[e]())}),delete globalThis.sqlite3ApiConfig,delete e.defaultConfig;const s=Object.create(null),n=Object.create(null),i=e=>s.sqlite3_js_rc_str&&s.sqlite3_js_rc_str(e)||"Unknown result code #"+e;class o extends Error{constructor(...e){let t;if(e.length)if("number"==typeof(r=e[0])&&r===(0|r))if(t=e[0],1===e.length)super(i(e[0]));else{const r=i(t);"object"==typeof e[1]?super(r,e[1]):(e[0]=r+":",super(e.join(" ")))}else 2===e.length&&"object"==typeof e[1]?super(...e):super(e.join(" "));var r;this.resultCode=t||s.SQLITE_ERROR,this.name="SQLite3Error"}}o.toss=(...e)=>{throw new o(...e)};const a=o.toss;r.wasmfsOpfsDir&&!/^\/[^/]+$/.test(r.wasmfsOpfsDir)&&a("config.wasmfsOpfsDir must be falsy or in the form '/dir-name'.");const l=e=>"bigint"!=typeof e&&!!(e===(0|e)&&e<=2147483647&&e>=-2147483648),_="undefined"==typeof SharedArrayBuffer?function(){}:SharedArrayBuffer,u=e=>e.buffer instanceof _,d=(e,t,r)=>u(e)?e.slice(t,r):e.subarray(t,r),f=e=>e&&(e instanceof Uint8Array||e instanceof Int8Array||e instanceof ArrayBuffer),p=e=>e&&(e instanceof Uint8Array||e instanceof Int8Array||e instanceof ArrayBuffer),h=e=>f(e)||a("Value is not of a supported TypedArray type."),m=new TextDecoder("utf-8"),g=function(e,t,r){return m.decode(d(e,t,r))},q=function(e){return p(e)?g(e instanceof ArrayBuffer?new Uint8Array(e):e):Array.isArray(e)?e.join(""):(n.isPtr(e)&&(e=n.cstrToJs(e)),e)};class b extends Error{constructor(...e){2===e.length&&"object"==typeof e[1]?super(...e):e.length?super(e.join(" ")):super("Allocation failed."),this.resultCode=s.SQLITE_NOMEM,this.name="WasmAllocError"}}b.toss=(...e)=>{throw new b(...e)},Object.assign(s,{sqlite3_bind_blob:void 0,sqlite3_bind_text:void 0,sqlite3_create_function_v2:(e,t,r,s,n,i,o,a,l)=>{},sqlite3_create_function:(e,t,r,s,n,i,o,a)=>{},sqlite3_create_window_function:(e,t,r,s,n,i,o,a,l,c)=>{},sqlite3_prepare_v3:(e,t,r,s,n,i)=>{},sqlite3_prepare_v2:(e,t,r,s,n)=>{},sqlite3_exec:(e,t,r,s,n)=>{},sqlite3_randomness:(e,t)=>{}});const y={affirmBindableTypedArray:h,flexibleString:q,bigIntFits32:e=>e>=-2147483648n&&e<=0x7fffffffn,bigIntFits64:function e(t){return e._max||(e._max=BigInt("0x7fffffffffffffff"),e._min=~e._max),t>=e._min&&t<=e._max},bigIntFitsDouble:function e(t){return e._min||(e._min=Number.MIN_SAFE_INTEGER,e._max=Number.MAX_SAFE_INTEGER),t>=e._min&&t<=e._max},isBindableTypedArray:f,isInt32:l,isSQLableTypedArray:p,isTypedArray:e=>!!(e&&e.constructor&&l(e.constructor.BYTES_PER_ELEMENT))&&e,typedArrayToString:g,isUIThread:()=>globalThis.window===globalThis&&!!globalThis.document,isSharedTypedArray:u,toss:function(...e){throw new Error(e.join(" "))},toss3:a,typedArrayPart:d,affirmDbHeader:function(e){e instanceof ArrayBuffer&&(e=new Uint8Array(e));const t="SQLite format 3";15>e.byteLength&&a("Input does not contain an SQLite3 database header.");for(let r=0;r<15;++r)t.charCodeAt(r)!==e[r]&&a("Input does not contain an SQLite3 database header.")},affirmIsDb:function(e){e instanceof ArrayBuffer&&(e=new Uint8Array(e));const t=e.byteLength;(t<512||t%512!=0)&&a("Byte array size",t,"is invalid for an SQLite3 db."),y.affirmDbHeader(e)}};Object.assign(n,{ptrSizeof:r.wasmPtrSizeof||4,ptrIR:r.wasmPtrIR||"i32",bigIntEnabled:!!r.bigIntEnabled,exports:r.exports||a("Missing API config.exports (WASM module exports)."),memory:r.memory||r.exports.memory||a("API config object requires a WebAssembly.Memory object","in either config.exports.memory (exported)","or config.memory (imported)."),alloc:void 0,realloc:void 0,dealloc:void 0}),n.allocFromTypedArray=function(e){e instanceof ArrayBuffer&&(e=new Uint8Array(e)),h(e);const t=n.alloc(e.byteLength||1);return n.heapForSize(e.constructor).set(e.byteLength?e:[0],t),t};{const e=r.allocExportName,t=r.deallocExportName,s=r.reallocExportName;for(const r of[e,t,s])n.exports[r]instanceof Function||a("Missing required exports[",r,"] function.");n.alloc=function e(t){return e.impl(t)||b.toss("Failed to allocate",t," bytes.")},n.alloc.impl=n.exports[e],n.realloc=function e(t,r){const s=e.impl(t,r);return r?s||b.toss("Failed to reallocate",r," bytes."):0},n.realloc.impl=n.exports[s],n.dealloc=n.exports[t]}let w;if(n.compileOptionUsed=function e(t){if(!arguments.length){if(e._result)return e._result;e._opt||(e._rx=/^([^=]+)=(.+)/,e._rxInt=/^-?\d+$/,e._opt=function(t,r){const s=e._rx.exec(t);r[0]=s?s[1]:t,r[1]=!s||(e._rxInt.test(s[2])?+s[2]:s[2])});const t={},r=[0,0];let n,i=0;for(;n=s.sqlite3_compileoption_get(i++);)e._opt(n,r),t[r[0]]=r[1];return e._result=t}if(Array.isArray(t)){const e={};return t.forEach(t=>{e[t]=s.sqlite3_compileoption_used(t)}),e}return"object"==typeof t?(Object.keys(t).forEach(e=>{t[e]=s.sqlite3_compileoption_used(e)}),t):"string"==typeof t&&!!s.sqlite3_compileoption_used(t)},n.pstack=Object.assign(Object.create(null),{restore:n.exports.sqlite3__wasm_pstack_restore,alloc:function(e){return"string"!=typeof e||(e=n.sizeofIR(e))||b.toss("Invalid value for pstack.alloc(",arguments[0],")"),n.exports.sqlite3__wasm_pstack_alloc(e)||b.toss("Could not allocate",e,"bytes from the pstack.")},allocChunks:function(e,t){"string"!=typeof t||(t=n.sizeofIR(t))||b.toss("Invalid size value for allocChunks(",arguments[1],")");const r=n.pstack.alloc(e*t),s=[];let i=0,o=0;for(;i<e;++i,o+=t)s.push(r+o);return s},allocPtr:(e=1,t=!0)=>1===e?n.pstack.alloc(t?8:n.ptrSizeof):n.pstack.allocChunks(e,t?8:n.ptrSizeof),call:function(e){const t=n.pstack.pointer;try{return e(x)}finally{n.pstack.restore(t)}}}),Object.defineProperties(n.pstack,{pointer:{configurable:!1,iterable:!0,writeable:!1,get:n.exports.sqlite3__wasm_pstack_ptr},quota:{configurable:!1,iterable:!0,writeable:!1,get:n.exports.sqlite3__wasm_pstack_quota},remaining:{configurable:!1,iterable:!0,writeable:!1,get:n.exports.sqlite3__wasm_pstack_remaining}}),s.sqlite3_randomness=(...e)=>{if(1===e.length&&y.isTypedArray(e[0])&&1===e[0].BYTES_PER_ELEMENT){const r=e[0];if(0===r.byteLength)return n.exports.sqlite3_randomness(0,0),r;const s=n.pstack.pointer;try{let e=r.byteLength,t=0;const s=n.exports.sqlite3_randomness,i=n.heap8u(),o=e<512?e:512,a=n.pstack.alloc(o);do{const n=e>o?o:e;s(n,a),r.set(d(i,a,a+n),t),e-=n,t+=n}while(e>0)}catch(t){console.error("Highly unexpected (and ignored!) exception in sqlite3_randomness():",t)}finally{n.pstack.restore(s)}return r}n.exports.sqlite3_randomness(...e)},s.sqlite3_wasmfs_opfs_dir=function(){if(void 0!==w)return w;const e=r.wasmfsOpfsDir;if(!(e&&globalThis.FileSystemHandle&&globalThis.FileSystemDirectoryHandle&&globalThis.FileSystemFileHandle))return w="";try{return w=e&&0===n.xCallWrapped("sqlite3__wasm_init_wasmfs","i32",["string"],e)?e:""}catch(t){return w=""}},s.sqlite3_wasmfs_filename_is_persistent=function(e){const t=s.sqlite3_wasmfs_opfs_dir();return!(!t||!e)&&e.startsWith(t+"/")},s.sqlite3_js_db_uses_vfs=function(e,t,r=0){try{const n=s.sqlite3_vfs_find(t);return!!n&&(e?n===s.sqlite3_js_db_vfs(e,r)&&n:n===s.sqlite3_vfs_find(0)&&n)}catch(n){return!1}},s.sqlite3_js_vfs_list=function(){const e=[];let t=s.sqlite3_vfs_find(0);for(;t;){const r=new s.sqlite3_vfs(t);e.push(n.cstrToJs(r.$zName)),t=r.$pNext,r.dispose()}return e},s.sqlite3_js_db_export=function(e,t=0){(e=n.xWrap.testConvertArg("sqlite3*",e))||a("Invalid sqlite3* argument."),n.bigIntEnabled||a("BigInt64 support is not enabled.");const r=n.scopedAllocPush();let s;try{const r=n.scopedAlloc(8+n.ptrSizeof),i=r+8,o=t?n.isPtr(t)?t:n.scopedAllocCString(""+t):0;let l=n.exports.sqlite3__wasm_db_serialize(e,o,i,r,0);l&&a("Database serialization failed with code",x.capi.sqlite3_js_rc_str(l)),s=n.peekPtr(i);const c=n.peek(r,"i64");return l=c?n.heap8u().slice(s,s+Number(c)):new Uint8Array,l}finally{s&&n.exports.sqlite3_free(s),n.scopedAllocPop(r)}},s.sqlite3_js_db_vfs=(e,t=0)=>y.sqlite3__wasm_db_vfs(e,t),s.sqlite3_js_aggregate_context=(e,t)=>s.sqlite3_aggregate_context(e,t)||(t?b.toss("Cannot allocate",t,"bytes for sqlite3_aggregate_context()"):0),s.sqlite3_js_posix_create_file=function(e,t,r){let i;t&&n.isPtr(t)?i=t:t instanceof ArrayBuffer||t instanceof Uint8Array?(i=n.allocFromTypedArray(t),(arguments.length<3||!y.isInt32(r)||r<0)&&(r=t.byteLength)):o.toss("Invalid 2nd argument for sqlite3_js_posix_create_file().");try{(!y.isInt32(r)||r<0)&&o.toss("Invalid 3rd argument for sqlite3_js_posix_create_file().");const t=y.sqlite3__wasm_posix_create_file(e,i,r);t&&o.toss("Creation of file failed with sqlite3 result code",s.sqlite3_js_rc_str(t))}finally{n.dealloc(i)}},s.sqlite3_js_vfs_create_file=function(e,t,i,a){let l;r.warn("sqlite3_js_vfs_create_file() is deprecated and","should be avoided because it can lead to C-level crashes.","See its documentation for alternative options."),i?(n.isPtr(i)?l=i:i instanceof ArrayBuffer&&(i=new Uint8Array(i)),i instanceof Uint8Array?(l=n.allocFromTypedArray(i),(arguments.length<4||!y.isInt32(a)||a<0)&&(a=i.byteLength)):o.toss("Invalid 3rd argument type for sqlite3_js_vfs_create_file().")):l=0,(!y.isInt32(a)||a<0)&&(n.dealloc(l),o.toss("Invalid 4th argument for sqlite3_js_vfs_create_file()."));try{const r=y.sqlite3__wasm_vfs_create_file(e,t,l,a);r&&o.toss("Creation of file failed with sqlite3 result code",s.sqlite3_js_rc_str(r))}finally{n.dealloc(l)}},s.sqlite3_js_sql_to_string=e=>{if("string"==typeof e)return e;const t=q(v);return t===v?void 0:t},y.isUIThread()){const e=function(e){const t=Object.create(null);return t.prefix="kvvfs-"+e,t.stores=[],"session"!==e&&""!==e||t.stores.push(globalThis.sessionStorage),"local"!==e&&""!==e||t.stores.push(globalThis.localStorage),t};s.sqlite3_js_kvvfs_clear=function(t=""){let r=0;const s=e(t);return s.stores.forEach(e=>{const t=[];let n;for(n=0;n<e.length;++n){const r=e.key(n);r.startsWith(s.prefix)&&t.push(r)}t.forEach(t=>e.removeItem(t)),r+=t.length}),r},s.sqlite3_js_kvvfs_size=function(t=""){let r=0;const s=e(t);return s.stores.forEach(e=>{let t;for(t=0;t<e.length;++t){const n=e.key(t);n.startsWith(s.prefix)&&(r+=n.length,r+=e.getItem(n).length)}}),2*r}}s.sqlite3_db_config=function(e,t,...r){switch(t){case s.SQLITE_DBCONFIG_ENABLE_FKEY:case s.SQLITE_DBCONFIG_ENABLE_TRIGGER:case s.SQLITE_DBCONFIG_ENABLE_FTS3_TOKENIZER:case s.SQLITE_DBCONFIG_ENABLE_LOAD_EXTENSION:case s.SQLITE_DBCONFIG_NO_CKPT_ON_CLOSE:case s.SQLITE_DBCONFIG_ENABLE_QPSG:case s.SQLITE_DBCONFIG_TRIGGER_EQP:case s.SQLITE_DBCONFIG_RESET_DATABASE:case s.SQLITE_DBCONFIG_DEFENSIVE:case s.SQLITE_DBCONFIG_WRITABLE_SCHEMA:case s.SQLITE_DBCONFIG_LEGACY_ALTER_TABLE:case s.SQLITE_DBCONFIG_DQS_DML:case s.SQLITE_DBCONFIG_DQS_DDL:case s.SQLITE_DBCONFIG_ENABLE_VIEW:case s.SQLITE_DBCONFIG_LEGACY_FILE_FORMAT:case s.SQLITE_DBCONFIG_TRUSTED_SCHEMA:case s.SQLITE_DBCONFIG_STMT_SCANSTATUS:case s.SQLITE_DBCONFIG_REVERSE_SCANORDER:case s.SQLITE_DBCONFIG_ENABLE_ATTACH_CREATE:case s.SQLITE_DBCONFIG_ENABLE_ATTACH_WRITE:case s.SQLITE_DBCONFIG_ENABLE_COMMENTS:return this.ip||(this.ip=n.xWrap("sqlite3__wasm_db_config_ip","int",["sqlite3*","int","int","*"])),this.ip(e,t,r[0],r[1]||0);case s.SQLITE_DBCONFIG_LOOKASIDE:return this.pii||(this.pii=n.xWrap("sqlite3__wasm_db_config_pii","int",["sqlite3*","int","*","int","int"])),this.pii(e,t,r[0],r[1],r[2]);case s.SQLITE_DBCONFIG_MAINDBNAME:return this.s||(this.s=n.xWrap("sqlite3__wasm_db_config_s","int",["sqlite3*","int","string:static"])),this.s(e,t,r[0]);default:return s.SQLITE_MISUSE}}.bind(Object.create(null)),s.sqlite3_value_to_js=function(e,t=!0){let r;const i=s.sqlite3_value_type(e);switch(i){case s.SQLITE_INTEGER:n.bigIntEnabled?(r=s.sqlite3_value_int64(e),y.bigIntFitsDouble(r)&&(r=Number(r))):r=s.sqlite3_value_double(e);break;case s.SQLITE_FLOAT:r=s.sqlite3_value_double(e);break;case s.SQLITE_TEXT:r=s.sqlite3_value_text(e);break;case s.SQLITE_BLOB:{const t=s.sqlite3_value_bytes(e),i=s.sqlite3_value_blob(e);t&&!i&&x.WasmAllocError.toss("Cannot allocate memory for blob argument of",t,"byte(s)"),r=t?n.heap8u().slice(i,i+Number(t)):null;break}case s.SQLITE_NULL:r=null;break;default:t&&a(s.SQLITE_MISMATCH,"Unhandled sqlite3_value_type():",i),r=void 0}return r},s.sqlite3_values_to_js=function(e,t,r=!0){let i;const o=[];for(i=0;i<e;++i)o.push(s.sqlite3_value_to_js(n.peekPtr(t+n.ptrSizeof*i),r));return o},s.sqlite3_result_error_js=function(e,t){t instanceof b?s.sqlite3_result_error_nomem(e):s.sqlite3_result_error(e,""+t,-1)},s.sqlite3_result_js=function(e,t){if(t instanceof Error)s.sqlite3_result_error_js(e,t);else try{switch(typeof t){case"undefined":break;case"boolean":s.sqlite3_result_int(e,t?1:0);break;case"bigint":y.bigIntFits32(t)?s.sqlite3_result_int(e,Number(t)):y.bigIntFitsDouble(t)?s.sqlite3_result_double(e,Number(t)):n.bigIntEnabled?y.bigIntFits64(t)?s.sqlite3_result_int64(e,t):a("BigInt value",t.toString(),"is too BigInt for int64."):a("BigInt value",t.toString(),"is too BigInt.");break;case"number":{let r;r=y.isInt32(t)?s.sqlite3_result_int:n.bigIntEnabled&&Number.isInteger(t)&&y.bigIntFits64(BigInt(t))?s.sqlite3_result_int64:s.sqlite3_result_double,r(e,t);break}case"string":{const[r,i]=n.allocCString(t,!0);s.sqlite3_result_text(e,r,i,s.SQLITE_WASM_DEALLOC);break}case"object":if(null===t){s.sqlite3_result_null(e);break}if(y.isBindableTypedArray(t)){const r=n.allocFromTypedArray(t);s.sqlite3_result_blob(e,r,t.byteLength,s.SQLITE_WASM_DEALLOC);break}default:a("Don't not how to handle this UDF result value:",typeof t,t)}}catch(r){s.sqlite3_result_error_js(e,r)}},s.sqlite3_column_js=function(e,t,r=!0){const n=s.sqlite3_column_value(e,t);return 0===n?void 0:s.sqlite3_value_to_js(n,r)};const E=function(e,t,r){r=s[r],this.ptr?n.pokePtr(this.ptr,0):this.ptr=n.allocPtr();const i=r(e,t,this.ptr);if(i)return o.toss(i,arguments[2]+"() failed with code "+i);const a=n.peekPtr(this.ptr);return a?s.sqlite3_value_to_js(a,!0):void 0}.bind(Object.create(null));s.sqlite3_preupdate_new_js=(e,t)=>E(e,t,"sqlite3_preupdate_new"),s.sqlite3_preupdate_old_js=(e,t)=>E(e,t,"sqlite3_preupdate_old"),s.sqlite3changeset_new_js=(e,t)=>E(e,t,"sqlite3changeset_new"),s.sqlite3changeset_old_js=(e,t)=>E(e,t,"sqlite3changeset_old");const x={WasmAllocError:b,SQLite3Error:o,capi:s,util:y,wasm:n,config:r,version:Object.create(null),client:void 0,asyncPostInit:async function t(){if(t.isReady instanceof Promise)return t.isReady;let s=e.initializersAsync;delete e.initializersAsync;const n=async()=>(x.__isUnderTest||(delete x.util,delete x.StructBinder),x),i=e=>{throw r.error("an async sqlite3 initializer failed:",e),e};if(!s||!s.length)return t.isReady=n().catch(i);s=s.map(e=>e instanceof Function?async t=>e(x):e),s.push(n);let o=Promise.resolve(x);for(;s.length;)o=o.then(s.shift());return t.isReady=o.catch(i)},scriptInfo:void 0};try{e.initializers.forEach(e=>{e(x)})}catch(S){throw console.error("sqlite3 bootstrap initializer threw:",S),S}return delete e.initializers,e.sqlite3=x,x},globalThis.sqlite3ApiBootstrap.initializers=[],globalThis.sqlite3ApiBootstrap.initializersAsync=[],globalThis.sqlite3ApiBootstrap.defaultConfig=Object.create(null),globalThis.sqlite3ApiBootstrap.sqlite3=void 0,globalThis.WhWasmUtilInstaller=function(e){void 0===e.bigIntEnabled&&(e.bigIntEnabled=!!globalThis.BigInt64Array);const t=(...e)=>{throw new Error(e.join(" "))};e.exports||Object.defineProperty(e,"exports",{enumerable:!0,configurable:!0,get:()=>e.instance&&e.instance.exports});const r=e.pointerIR||"i32",s=e.ptrSizeof="i32"===r?4:"i64"===r?8:t("Unhandled ptrSizeof:",r),n=Object.create(null);n.heapSize=0,n.memory=null,n.freeFuncIndexes=[],n.scopedAlloc=[],n.utf8Decoder=new TextDecoder,n.utf8Encoder=new TextEncoder("utf-8"),e.sizeofIR=e=>{switch(e){case"i8":return 1;case"i16":return 2;case"i32":case"f32":case"float":return 4;case"i64":case"f64":case"double":return 8;case"*":return s;default:return(""+e).endsWith("*")?s:void 0}};const i=function(){if(n.memory){if(n.heapSize===n.memory.buffer.byteLength)return n}else n.memory=e.memory instanceof WebAssembly.Memory?e.memory:e.exports.memory;const t=n.memory.buffer;return n.HEAP8=new Int8Array(t),n.HEAP8U=new Uint8Array(t),n.HEAP16=new Int16Array(t),n.HEAP16U=new Uint16Array(t),n.HEAP32=new Int32Array(t),n.HEAP32U=new Uint32Array(t),e.bigIntEnabled&&(n.HEAP64=new BigInt64Array(t),n.HEAP64U=new BigUint64Array(t)),n.HEAP32F=new Float32Array(t),n.HEAP64F=new Float64Array(t),n.heapSize=t.byteLength,n};e.heap8=()=>i().HEAP8,e.heap8u=()=>i().HEAP8U,e.heap16=()=>i().HEAP16,e.heap16u=()=>i().HEAP16U,e.heap32=()=>i().HEAP32,e.heap32u=()=>i().HEAP32U,e.heapForSize=function(r,s=!0){const o=n.memory&&n.heapSize===n.memory.buffer.byteLength?n:i();switch(r){case Int8Array:return o.HEAP8;case Uint8Array:return o.HEAP8U;case Int16Array:return o.HEAP16;case Uint16Array:return o.HEAP16U;case Int32Array:return o.HEAP32;case Uint32Array:return o.HEAP32U;case 8:return s?o.HEAP8U:o.HEAP8;case 16:return s?o.HEAP16U:o.HEAP16;case 32:return s?o.HEAP32U:o.HEAP32;case 64:if(o.HEAP64)return s?o.HEAP64U:o.HEAP64;break;default:if(e.bigIntEnabled){if(r===globalThis.BigUint64Array)return o.HEAP64U;if(r===globalThis.BigInt64Array)return o.HEAP64;break}}t("Invalid heapForSize() size: expecting 8, 16, 32,","or (if BigInt is enabled) 64.")},e.functionTable=function(){return e.exports.__indirect_function_table},e.functionEntry=function(t){const r=e.functionTable();return t<r.length?r.get(t):void 0},e.jsFuncToWasm=function e(r,s){if(e._||(e._={sigTypes:Object.assign(Object.create(null),{i:"i32",p:"i32",P:"i32",s:"i32",j:"i64",f:"f32",d:"f64"}),typeCodes:Object.assign(Object.create(null),{f64:124,f32:125,i64:126,i32:127}),uleb128Encode:function(e,t,r){r<128?e[t](r):e[t](r%128|128,r>>7)},rxJSig:/^(\w)\((\w*)\)$/,sigParams:function(t){const r=e._.rxJSig.exec(t);return r?r[2]:t.substr(1)},letterType:r=>e._.sigTypes[r]||t("Invalid signature letter:",r),pushSigType:(t,r)=>t.push(e._.typeCodes[e._.letterType(r)])}),"string"==typeof r){const e=s;s=r,r=e}const n=e._.sigParams(s),i=[1,96];e._.uleb128Encode(i,"push",n.length);for(const t of n)e._.pushSigType(i,t);return"v"===s[0]?i.push(0):(i.push(1),e._.pushSigType(i,s[0])),e._.uleb128Encode(i,"unshift",i.length),i.unshift(0,97,115,109,1,0,0,0,1),i.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0),new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array(i)),{e:{f:r}}).exports.f};const o=function(r,s,i){if(i&&!n.scopedAlloc.length&&t("No scopedAllocPush() scope is active."),"string"==typeof r){const e=s;s=r,r=e}"string"==typeof s&&r instanceof Function||t("Invalid arguments: expecting (function,signature) or (signature,function).");const o=e.functionTable(),a=o.length;let l;for(;n.freeFuncIndexes.length&&(l=n.freeFuncIndexes.pop(),o.get(l));)l=null;l||(l=a,o.grow(1));try{return o.set(l,r),i&&n.scopedAlloc[n.scopedAlloc.length-1].push(l),l}catch(c){if(!(c instanceof TypeError))throw l===a&&n.freeFuncIndexes.push(a),c}try{const t=e.jsFuncToWasm(r,s);o.set(l,t),i&&n.scopedAlloc[n.scopedAlloc.length-1].push(l)}catch(c){throw l===a&&n.freeFuncIndexes.push(a),c}return l};e.installFunction=(e,t)=>o(e,t,!1),e.scopedInstallFunction=(e,t)=>o(e,t,!0),e.uninstallFunction=function(t){if(!t&&0!==t)return;const r=n.freeFuncIndexes,s=e.functionTable();r.push(t);const i=s.get(t);return s.set(t,null),i},e.peek=function(s,o="i8"){o.endsWith("*")&&(o=r);const a=n.memory&&n.heapSize===n.memory.buffer.byteLength?n:i(),l=Array.isArray(s)?[]:void 0;let c;do{switch(l&&(s=arguments[0].shift()),o){case"i1":case"i8":c=a.HEAP8[0|s];break;case"i16":c=a.HEAP16[s>>1];break;case"i32":c=a.HEAP32[s>>2];break;case"float":case"f32":c=a.HEAP32F[s>>2];break;case"double":case"f64":c=Number(a.HEAP64F[s>>3]);break;case"i64":if(e.bigIntEnabled){c=BigInt(a.HEAP64[s>>3]);break}default:t("Invalid type for peek():",o)}l&&l.push(c)}while(l&&arguments[0].length);return l||c},e.poke=function(e,s,o="i8"){o.endsWith("*")&&(o=r);const a=n.memory&&n.heapSize===n.memory.buffer.byteLength?n:i();for(const r of Array.isArray(e)?e:[e])switch(o){case"i1":case"i8":a.HEAP8[0|r]=s;continue;case"i16":a.HEAP16[r>>1]=s;continue;case"i32":a.HEAP32[r>>2]=s;continue;case"float":case"f32":a.HEAP32F[r>>2]=s;continue;case"double":case"f64":a.HEAP64F[r>>3]=s;continue;case"i64":if(a.HEAP64){a.HEAP64[r>>3]=BigInt(s);continue}default:t("Invalid type for poke(): "+o)}return this},e.peekPtr=(...t)=>e.peek(1===t.length?t[0]:t,r),e.pokePtr=(t,s=0)=>e.poke(t,s,r),e.peek8=(...t)=>e.peek(1===t.length?t[0]:t,"i8"),e.poke8=(t,r)=>e.poke(t,r,"i8"),e.peek16=(...t)=>e.peek(1===t.length?t[0]:t,"i16"),e.poke16=(t,r)=>e.poke(t,r,"i16"),e.peek32=(...t)=>e.peek(1===t.length?t[0]:t,"i32"),e.poke32=(t,r)=>e.poke(t,r,"i32"),e.peek64=(...t)=>e.peek(1===t.length?t[0]:t,"i64"),e.poke64=(t,r)=>e.poke(t,r,"i64"),e.peek32f=(...t)=>e.peek(1===t.length?t[0]:t,"f32"),e.poke32f=(t,r)=>e.poke(t,r,"f32"),e.peek64f=(...t)=>e.peek(1===t.length?t[0]:t,"f64"),e.poke64f=(t,r)=>e.poke(t,r,"f64"),e.getMemValue=e.peek,e.getPtrValue=e.peekPtr,e.setMemValue=e.poke,e.setPtrValue=e.pokePtr,e.isPtr32=e=>"number"==typeof e&&e===(0|e)&&e>=0,e.isPtr=e.isPtr32,e.cstrlen=function(t){if(!t||!e.isPtr(t))return null;const r=i().HEAP8U;let s=t;for(;0!==r[s];++s);return s-t};const a="undefined"==typeof SharedArrayBuffer?function(){}:SharedArrayBuffer;e.cstrToJs=function(t){const r=e.cstrlen(t);return r?(s=i().HEAP8U,o=t,l=t+r,n.utf8Decoder.decode(s.buffer instanceof a?s.slice(o,l):s.subarray(o,l))):null===r?r:"";var s,o,l},e.jstrlen=function(e){if("string"!=typeof e)return null;const t=e.length;let r=0;for(let s=0;s<t;++s){let t=e.charCodeAt(s);t>=55296&&t<=57343&&(t=65536+((1023&t)<<10)|1023&e.charCodeAt(++s)),t<=127?++r:r+=t<=2047?2:t<=65535?3:4}return r},e.jstrcpy=function(e,r,s=0,n=-1,i=!0){if(r&&(r instanceof Int8Array||r instanceof Uint8Array)||t("jstrcpy() target must be an Int8Array or Uint8Array."),n<0&&(n=r.length-s),!(n>0&&s>=0))return 0;let o=0,a=e.length;const l=s,c=s+n-(i?1:0);for(;o<a&&s<c;++o){let t=e.charCodeAt(o);if(t>=55296&&t<=57343&&(t=65536+((1023&t)<<10)|1023&e.charCodeAt(++o)),t<=127){if(s>=c)break;r[s++]=t}else if(t<=2047){if(s+1>=c)break;r[s++]=192|t>>6,r[s++]=128|63&t}else if(t<=65535){if(s+2>=c)break;r[s++]=224|t>>12,r[s++]=128|t>>6&63,r[s++]=128|63&t}else{if(s+3>=c)break;r[s++]=240|t>>18,r[s++]=128|t>>12&63,r[s++]=128|t>>6&63,r[s++]=128|63&t}}return i&&(r[s++]=0),s-l},e.cstrncpy=function(r,s,n){if(r&&s||t("cstrncpy() does not accept NULL strings."),n<0)n=e.cstrlen(strPtr)+1;else if(!(n>0))return 0;const i=e.heap8u();let o,a=0;for(;a<n&&(o=i[s+a]);++a)i[r+a]=o;return a<n&&(i[r+a++]=0),a},e.jstrToUintArray=(e,t=!1)=>n.utf8Encoder.encode(t?e+"\0":e);const l=(e,r)=>{e.alloc instanceof Function&&e.dealloc instanceof Function||t("Object is missing alloc() and/or dealloc() function(s)","required by",r+"().")},c=function(t,r,s,o){if(l(e,o),"string"!=typeof t)return null;{const e=n.utf8Encoder.encode(t),o=s(e.length+1),a=i().HEAP8U;return a.set(e,o),a[o+e.length]=0,r?[o,e.length]:o}};e.allocCString=(t,r=!1)=>c(t,r,e.alloc,"allocCString()"),e.scopedAllocPush=function(){l(e,"scopedAllocPush");const t=[];return n.scopedAlloc.push(t),t},e.scopedAllocPop=function(r){l(e,"scopedAllocPop");const s=arguments.length?n.scopedAlloc.indexOf(r):n.scopedAlloc.length-1;s<0&&t("Invalid state object for scopedAllocPop()."),0===arguments.length&&(r=n.scopedAlloc[s]),n.scopedAlloc.splice(s,1);for(let t;t=r.pop();)e.functionEntry(t)?e.uninstallFunction(t):e.dealloc(t)},e.scopedAlloc=function(r){n.scopedAlloc.length||t("No scopedAllocPush() scope is active.");const s=e.alloc(r);return n.scopedAlloc[n.scopedAlloc.length-1].push(s),s},Object.defineProperty(e.scopedAlloc,"level",{configurable:!1,enumerable:!1,get:()=>n.scopedAlloc.length,set:()=>t("The 'active' property is read-only.")}),e.scopedAllocCString=(t,r=!1)=>c(t,r,e.scopedAlloc,"scopedAllocCString()");const _=function(t,r){const s=e[t?"scopedAlloc":"alloc"]((r.length+1)*e.ptrSizeof);let n=0;return r.forEach(r=>{e.pokePtr(s+e.ptrSizeof*n++,e[t?"scopedAllocCString":"allocCString"](""+r))}),e.pokePtr(s+e.ptrSizeof*n,0),s};e.scopedAllocMainArgv=e=>_(!0,e),e.allocMainArgv=e=>_(!1,e),e.cArgvToJs=(t,r)=>{const s=[];for(let n=0;n<t;++n){const t=e.peekPtr(r+e.ptrSizeof*n);s.push(t?e.cstrToJs(t):null)}return s},e.scopedAllocCall=function(t){e.scopedAllocPush();try{return t()}finally{e.scopedAllocPop()}};const u=function(t,n,i){l(e,i);const o=n?"i64":r;let a=e[i](t*(n?8:s));if(e.poke(a,0,o),1===t)return a;const c=[a];for(let r=1;r<t;++r)a+=n?8:s,c[r]=a,e.poke(a,0,o);return c};e.allocPtr=(e=1,t=!0)=>u(e,t,"alloc"),e.scopedAllocPtr=(e=1,t=!0)=>u(e,t,"scopedAlloc"),e.xGet=function(r){return e.exports[r]||t("Cannot find exported symbol:",r)};const d=(e,r)=>t(e+"() requires",r,"argument(s).");e.xCall=function(r,...s){const n=r instanceof Function?r:e.xGet(r);return n instanceof Function||t("Exported symbol",r,"is not a function."),n.length!==s.length&&d(n===r?n.name:r,n.length),2===arguments.length&&Array.isArray(arguments[1])?n.apply(null,arguments[1]):n.apply(null,s)},n.xWrap=Object.create(null),n.xWrap.convert=Object.create(null),n.xWrap.convert.arg=new Map,n.xWrap.convert.result=new Map;const f=n.xWrap.convert.arg,p=n.xWrap.convert.result;e.bigIntEnabled&&f.set("i64",e=>BigInt(e));const h="i32"===r?e=>0|e:e=>BigInt(e)|BigInt(0);f.set("i32",h).set("i16",e=>65535&e).set("i8",e=>255&e).set("f32",e=>Number(e).valueOf()).set("float",f.get("f32")).set("f64",f.get("f32")).set("double",f.get("f64")).set("int",f.get("i32")).set("null",e=>e).set(null,f.get("null")).set("**",h).set("*",h),p.set("*",h).set("pointer",h).set("number",e=>Number(e)).set("void",e=>{}).set("null",e=>e).set(null,p.get("null"));{const s=["i8","i16","i32","int","f32","float","f64","double"];e.bigIntEnabled&&s.push("i64");const n=f.get(r);for(const e of s)f.set(e+"*",n),p.set(e+"*",n),p.set(e,f.get(e)||t("Missing arg converter:",e))}const m=function(t){return"string"==typeof t?e.scopedAllocCString(t):t?h(t):null};f.set("string",m).set("utf8",m).set("pointer",m),p.set("string",t=>e.cstrToJs(t)).set("utf8",p.get("string")).set("string:dealloc",t=>{try{return t?e.cstrToJs(t):null}finally{e.dealloc(t)}}).set("utf8:dealloc",p.get("string:dealloc")).set("json",t=>JSON.parse(e.cstrToJs(t))).set("json:dealloc",t=>{try{return t?JSON.parse(e.cstrToJs(t)):null}finally{e.dealloc(t)}});const g=class{constructor(e){this.name=e.name||"unnamed adapter"}convertArg(e,r,s){t("AbstractArgAdapter must be subclassed.")}};f.FuncPtrAdapter=class r extends g{constructor(e){super(e),f.FuncPtrAdapter.warnOnUse&&console.warn("xArg.FuncPtrAdapter is an internal-only API","and is not intended to be invoked from","client-level code. Invoked with:",e),this.name=e.name||"unnamed",this.signature=e.signature,e.contextKey instanceof Function&&(this.contextKey=e.contextKey,e.bindScope||(e.bindScope="context")),this.bindScope=e.bindScope||t("FuncPtrAdapter options requires a bindScope (explicit or implied)."),r.bindScopes.indexOf(e.bindScope)<0&&t("Invalid options.bindScope ("+e.bindMod+") for FuncPtrAdapter. Expecting one of: ("+r.bindScopes.join(", ")+")"),this.isTransient="transient"===this.bindScope,this.isContext="context"===this.bindScope,this.isPermanent="permanent"===this.bindScope,this.singleton="singleton"===this.bindScope?[]:void 0,this.callProxy=e.callProxy instanceof Function?e.callProxy:void 0}contextKey(e,t){return this}contextMap(e){const t=this.__cmap||(this.__cmap=new Map);let r=t.get(e);return void 0===r&&t.set(e,r=[]),r}convertArg(t,s,i){let a=this.singleton;if(!a&&this.isContext&&(a=this.contextMap(this.contextKey(s,i))),a&&a[0]===t)return a[1];if(t instanceof Function){this.callProxy&&(t=this.callProxy(t));const e=o(t,this.signature,this.isTransient);if(r.debugFuncInstall&&r.debugOut("FuncPtrAdapter installed",this,this.contextKey(s,i),"@"+e,t),a){if(a[1]){r.debugFuncInstall&&r.debugOut("FuncPtrAdapter uninstalling",this,this.contextKey(s,i),"@"+a[1],t);try{n.scopedAlloc[n.scopedAlloc.length-1].push(a[1])}catch(l){}}a[0]=t,a[1]=e}return e}if(e.isPtr(t)||null==t){if(a&&a[1]&&a[1]!==t){r.debugFuncInstall&&r.debugOut("FuncPtrAdapter uninstalling",this,this.contextKey(s,i),"@"+a[1],t);try{n.scopedAlloc[n.scopedAlloc.length-1].push(a[1])}catch(l){}a[0]=a[1]=0|t}return t||0}throw new TypeError("Invalid FuncPtrAdapter argument type. Expecting a function pointer or a "+(this.name?this.name+" ":"")+"function matching signature "+this.signature+".")}},f.FuncPtrAdapter.warnOnUse=!1,f.FuncPtrAdapter.debugFuncInstall=!1,f.FuncPtrAdapter.debugOut=console.debug.bind(console),f.FuncPtrAdapter.bindScopes=["transient","context","singleton","permanent"];const q=e=>f.get(e)||t("Argument adapter not found:",e),b=e=>p.get(e)||t("Result adapter not found:",e);n.xWrap.convertArg=(e,...t)=>q(e)(...t),n.xWrap.convertArgNoCheck=(e,...t)=>f.get(e)(...t),n.xWrap.convertResult=(e,t)=>null===e?t:e?b(e)(t):void 0,n.xWrap.convertResultNoCheck=(e,t)=>null===e?t:e?p.get(e)(t):void 0,e.xWrap=function(r,s,...i){3===arguments.length&&Array.isArray(arguments[2])&&(i=arguments[2]),e.isPtr(r)&&(r=e.functionEntry(r)||t("Function pointer not found in WASM function table."));const o=r instanceof Function,a=o?r:e.xGet(r);if(o&&(r=a.name||"unnamed function"),i.length!==a.length&&d(r,a.length),null===s&&0===a.length)return a;null!=s&&b(s);for(const e of i)e instanceof g?f.set(e,(...t)=>e.convertArg(...t)):q(e);const l=n.xWrap;return 0===a.length?(...e)=>e.length?d(r,a.length):l.convertResult(s,a.call(null)):function(...t){t.length!==a.length&&d(r,a.length);const n=e.scopedAllocPush();try{let e=0;for(;e<t.length;++e)t[e]=l.convertArgNoCheck(i[e],t[e],t,e);return l.convertResultNoCheck(s,a.apply(null,t))}finally{e.scopedAllocPop(n)}}};const y=function(e,r,s,n,i,o){if("string"==typeof s){if(1===r)return o.get(s);if(2===r)return n?(n instanceof Function||t(i,"requires a function argument."),o.set(s,n),e):(o.delete(s),e)}t("Invalid arguments to",i)};return e.xWrap.resultAdapter=function e(t,r){return y(e,arguments.length,t,r,"resultAdapter()",p)},e.xWrap.argAdapter=function e(t,r){return y(e,arguments.length,t,r,"argAdapter()",f)},e.xWrap.FuncPtrAdapter=f.FuncPtrAdapter,e.xCallWrapped=function(t,r,s,...n){return Array.isArray(arguments[3])&&(n=arguments[3]),e.xWrap(t,r,s||[]).apply(null,n||[])},e.xWrap.testConvertArg=n.xWrap.convertArg,e.xWrap.testConvertResult=n.xWrap.convertResult,e},globalThis.WhWasmUtilInstaller.yawl=function(e){const t=()=>fetch(e.uri,{credentials:"same-origin"}),r=this,s=function(t){if(e.wasmUtilTarget){const s=(...e)=>{throw new Error(e.join(" "))},n=e.wasmUtilTarget;if(n.module=t.module,n.instance=t.instance,n.instance.exports.memory||(n.memory=e.imports&&e.imports.env&&e.imports.env.memory||s("Missing 'memory' object!")),!n.alloc&&t.instance.exports.malloc){const e=t.instance.exports;n.alloc=function(t){return e.malloc(t)||s("Allocation of",t,"bytes failed.")},n.dealloc=function(t){e.free(t)}}r(n)}return e.onload&&e.onload(t,e),t};return WebAssembly.instantiateStreaming?function(){return WebAssembly.instantiateStreaming(t(),e.imports||{}).then(s)}:function(){return t().then(e=>e.arrayBuffer()).then(t=>WebAssembly.instantiate(t,e.imports||{})).then(s)}}.bind(globalThis.WhWasmUtilInstaller),globalThis.Jaccwabyt=function e(t){const r=(...e)=>{throw new Error(e.join(" "))};t.heap instanceof WebAssembly.Memory||t.heap instanceof Function||r("config.heap must be WebAssembly.Memory instance or a function."),["alloc","dealloc"].forEach(function(e){t[e]instanceof Function||r("Config option '"+e+"' must be a function.")});const s=e,n=t.heap instanceof Function?t.heap:()=>new Uint8Array(t.heap.buffer),i=t.alloc,o=t.dealloc,a=t.log||function(){}.bind(),l=t.memberPrefix||"",c=t.memberSuffix||"",_=void 0===t.bigIntEnabled?!!globalThis.BigInt64Array:!!t.bigIntEnabled,u=globalThis.BigInt,d=globalThis.BigInt64Array,f=t.ptrSizeof||4,p=t.ptrIR||"i32";s.debugFlags||(s.__makeDebugFlags=function(e=null){e&&e.__flags&&(e=e.__flags);const t=function e(t){return 0===arguments.length?e.__flags:(t<0?(delete e.__flags.getter,delete e.__flags.setter,delete e.__flags.alloc,delete e.__flags.dealloc):(e.__flags.getter=!!(1&t),e.__flags.setter=!!(2&t),e.__flags.alloc=!!(4&t),e.__flags.dealloc=!!(8&t)),e._flags)};return Object.defineProperty(t,"__flags",{iterable:!1,writable:!1,value:Object.create(e)}),e||t(0),t},s.debugFlags=s.__makeDebugFlags());const h=function(){const e=new ArrayBuffer(2);return new DataView(e).setInt16(0,256,!0),256===new Int16Array(e)[0]}(),m=e=>"P"===e,g=e=>(e=>"("===e[1])(e)?"p":e[0],q=function(e){switch(g(e)){case"c":case"C":return"i8";case"i":return"i32";case"p":case"P":case"s":return p;case"j":return"i64";case"f":return"float";case"d":return"double"}r("Unhandled signature IR:",e)},b=d?()=>!0:()=>r("BigInt64Array is not available."),y=(e,t)=>e+"::"+t,w=new WeakMap,v="(pointer-is-external)",E=function(e,t,r){if(r||(r=w.get(t)),r){if(w.delete(t),Array.isArray(t.ondispose)){let n;for(;n=t.ondispose.shift();)try{n instanceof Function?n.call(t):n instanceof R?n.dispose():"number"==typeof n&&o(n)}catch(s){console.warn("ondispose() for",e.structName,"@",r,"threw. NOT propagating it.",s)}}else if(t.ondispose instanceof Function)try{t.ondispose()}catch(s){console.warn("ondispose() for",e.structName,"@",r,"threw. NOT propagating it.",s)}delete t.ondispose,e.debugFlags.__flags.dealloc&&a("debug.dealloc:",t[v]?"EXTERNAL":"",e.structName,"instance:",e.structInfo.sizeof,"bytes @"+r),t[v]||o(r)}},x=e=>({configurable:!1,writable:!1,iterable:!1,value:e}),S=function(e,t,s){let o=!s;s?Object.defineProperty(t,v,x(s)):(s=i(e.structInfo.sizeof))||r("Allocation of",e.structName,"structure failed.");try{e.debugFlags.__flags.alloc&&a("debug.alloc:",o?"":"EXTERNAL",e.structName,"instance:",e.structInfo.sizeof,"bytes @"+s),o&&n().fill(0,s,s+e.structInfo.sizeof),w.set(t,s)}catch(l){throw E(e,t,s),l}},A=x(e=>l+e+c),I=function(e,t,s=!0){let n=e.members[t];if(!n&&(l||c)){for(const r of Object.values(e.members))if(r.key===t){n=r;break}!n&&s&&r(y(e.name,t),"is not a mapped struct member.")}return n},k=function e(t,r,s=!1){e._||(e._=e=>e.replace(/[^vipPsjrdcC]/g,"").replace(/[pPscC]/g,"i"));const n=I(t.structInfo,r,!0);return s?e._(n.signature):n.signature},T={configurable:!1,enumerable:!1,get:function(){return w.get(this)},set:()=>r("Cannot assign the 'pointer' property of a struct.")},F=x(function(){const e=[];for(const t of Object.keys(this.structInfo.members))e.push(this.memberKey(t));return e}),O=new TextDecoder("utf-8"),P=new TextEncoder,L="undefined"==typeof SharedArrayBuffer?function(){}:SharedArrayBuffer,C=function(e){"s"!==e.signature&&r("Invalid member type signature for C-string value:",JSON.stringify(e))},N=function(e,t){const r=I(e.structInfo,t,!0);C(r);const s=e[r.key];if(!s)return null;let i=s;const o=n();for(;0!==o[i];++i);return s===i?"":(a=o,l=s,c=i,O.decode(a.buffer instanceof L?a.slice(l,c):a.subarray(l,c)));var a,l,c},D=function(e,...t){e.ondispose?Array.isArray(e.ondispose)||(e.ondispose=[e.ondispose]):e.ondispose=[],e.ondispose.push(...t)},j=function(e){const t=P.encode(e),s=i(t.length+1);s||r("Allocation error while duplicating string:",e);const o=n();return o.set(t,s),o[s+t.length]=0,s},R=function(e,t){arguments[2]!==x&&r("Do not call the StructType constructor","from client-level code."),Object.defineProperties(this,{structName:x(e),structInfo:x(t)})};R.prototype=Object.create(null,{dispose:x(function(){E(this.constructor,this)}),lookupMember:x(function(e,t=!0){return I(this.structInfo,e,t)}),memberToJsString:x(function(e){return N(this,e)}),memberIsString:x(function(e,t=!0){return function(e,t,r=!1){const s=I(e.structInfo,t,r);return!(!s||1!==s.signature.length||"s"!==s.signature[0])&&s}(this,e,t)}),memberKey:A,memberKeys:F,memberSignature:x(function(e,t=!1){return k(this,e,t)}),memoryDump:x(function(){const e=this.pointer;return e?new Uint8Array(n().slice(e,e+this.structInfo.sizeof)):null}),pointer:T,setMemberCString:x(function(e,t){return function(e,t,r){const s=I(e.structInfo,t,!0);C(s);const n=j(r);return e[s.key]=n,D(e,n),e}(this,e,t)})}),Object.assign(R.prototype,{addOnDispose:function(...e){return D(this,...e),this}}),Object.defineProperties(R,{allocCString:x(j),isA:x(e=>e instanceof R),hasExternalPointer:x(e=>e instanceof R&&!!e[v]),memberKey:A});const M=e=>Number.isFinite(e)||e instanceof(u||Number),z=function e(t,s,i){if(!e._){e._={getters:{},setters:{},sw:{}};const t=["i","c","C","p","P","s","f","d","v()"];_&&t.push("j"),t.forEach(function(t){e._.getters[t]=function(e){switch(g(e)){case"p":case"P":case"s":switch(f){case 4:return"getInt32";case 8:return b()&&"getBigInt64"}break;case"i":return"getInt32";case"c":return"getInt8";case"C":return"getUint8";case"j":return b()&&"getBigInt64";case"f":return"getFloat32";case"d":return"getFloat64"}r("Unhandled DataView getter for signature:",e)}(t),e._.setters[t]=function(e){switch(g(e)){case"p":case"P":case"s":switch(f){case 4:return"setInt32";case 8:return b()&&"setBigInt64"}break;case"i":return"setInt32";case"c":return"setInt8";case"C":return"setUint8";case"j":return b()&&"setBigInt64";case"f":return"setFloat32";case"d":return"setFloat64"}r("Unhandled DataView setter for signature:",e)}(t),e._.sw[t]=function(e){switch(g(e)){case"i":case"f":case"c":case"C":case"d":return Number;case"j":return b()&&u;case"p":case"P":case"s":switch(f){case 4:return Number;case 8:return b()&&u}}r("Unhandled DataView set wrapper for signature:",e)}(t)});const s=/^[ipPsjfdcC]$/,n=/^[vipPsjfdcC]\([ipPsjfdcC]*\)$/;e.sigCheck=function(e,t,i,o){Object.prototype.hasOwnProperty.call(e,i)&&r(e.structName,"already has a property named",i+"."),s.test(o)||n.test(o)||r("Malformed signature for",y(e.structName,t)+":",o)}}const o=t.memberKey(s);e.sigCheck(t.prototype,s,o,i.signature),i.key=o,i.name=s;const l=g(i.signature),c=y(t.prototype.structName,o),d=t.prototype.debugFlags.__flags,p=Object.create(null);var w,v;p.configurable=!1,p.enumerable=!1,p.get=function(){d.getter&&a("debug.getter:",e._.getters[l],"for",q(l),c,"@",this.pointer,"+",i.offset,"sz",i.sizeof);let t=new DataView(n().buffer,this.pointer+i.offset,i.sizeof)[e._.getters[l]](0,h);return d.getter&&a("debug.getter:",c,"result =",t),t},i.readOnly?p.set=(w=t.prototype.structName,v=o,()=>r(y(w,v),"is read-only.")):p.set=function(t){if(d.setter&&a("debug.setter:",e._.setters[l],"for",q(l),c,"@",this.pointer,"+",i.offset,"sz",i.sizeof,t),this.pointer||r("Cannot set struct property on disposed instance."),null===t)t=0;else for(;!M(t);){if(m(i.signature)&&t instanceof R){t=t.pointer||0,d.setter&&a("debug.setter:",c,"resolved to",t);break}r("Invalid value for pointer-type",c+".")}new DataView(n().buffer,this.pointer+i.offset,i.sizeof)[e._.setters[l]](0,e._.sw[l](t),h)},Object.defineProperty(t.prototype,o,p)},B=function e(t,n){1===arguments.length?t=(n=t).name:n.name||(n.name=t),t||r("Struct name is required.");let i=!1;Object.keys(n.members).forEach(e=>{const s=n.members[e];s.sizeof?1===s.sizeof?"c"===s.signature||"C"===s.signature||r("Unexpected sizeof==1 member",y(n.name,e),"with signature",s.signature):(0!=s.sizeof%4&&(console.warn("Invalid struct member description =",s,"from",n),r(t,"member",e,"sizeof is not aligned. sizeof="+s.sizeof)),0!=s.offset%4&&(console.warn("Invalid struct member description =",s,"from",n),r(t,"member",e,"offset is not aligned. offset="+s.offset))):r(t,"member",e,"is missing sizeof."),(!i||i.offset<s.offset)&&(i=s)}),i?n.sizeof<i.offset+i.sizeof&&r("Invalid struct config:",t,"max member offset ("+i.offset+") ","extends past end of struct (sizeof="+n.sizeof+")."):r("No member property descriptions found.");const o=x(s.__makeDebugFlags(e.debugFlags)),a=function e(s){this instanceof e?arguments.length?((s!==(0|s)||s<=0)&&r("Invalid pointer value for",t,"constructor."),S(e,this,s)):S(e,this):r("The",t,"constructor may only be called via 'new'.")};return Object.defineProperties(a,{debugFlags:o,isA:x(e=>e instanceof a),memberKey:A,memberKeys:F,methodInfoForKey:x(function(e){}),structInfo:x(n),structName:x(t)}),a.prototype=new R(t,n,x),Object.defineProperties(a.prototype,{debugFlags:o,constructor:x(a)}),Object.keys(n.members).forEach(e=>z(a,e,n.members[e])),a};return B.StructType=R,B.config=t,B.allocCString=j,B.debugFlags||(B.debugFlags=s.__makeDebugFlags(s.debugFlags)),B},globalThis.sqlite3ApiBootstrap.initializers.push(function(e){const t=(...e)=>{throw new Error(e.join(" "))};e.SQLite3Error.toss;const r=e.capi,s=e.wasm,n=e.util;if(globalThis.WhWasmUtilInstaller(s),delete globalThis.WhWasmUtilInstaller,s.bindingSignatures=[["sqlite3_aggregate_context","void*","sqlite3_context*","int"],["sqlite3_bind_double","int","sqlite3_stmt*","int","f64"],["sqlite3_bind_int","int","sqlite3_stmt*","int","int"],["sqlite3_bind_null",void 0,"sqlite3_stmt*","int"],["sqlite3_bind_parameter_count","int","sqlite3_stmt*"],["sqlite3_bind_parameter_index","int","sqlite3_stmt*","string"],["sqlite3_bind_parameter_name","string","sqlite3_stmt*","int"],["sqlite3_bind_pointer","int","sqlite3_stmt*","int","*","string:static","*"],["sqlite3_busy_handler","int",["sqlite3*",new s.xWrap.FuncPtrAdapter({signature:"i(pi)",contextKey:(e,t)=>e[0]}),"*"]],["sqlite3_busy_timeout","int","sqlite3*","int"],["sqlite3_changes","int","sqlite3*"],["sqlite3_clear_bindings","int","sqlite3_stmt*"],["sqlite3_collation_needed","int","sqlite3*","*","*"],["sqlite3_column_blob","*","sqlite3_stmt*","int"],["sqlite3_column_bytes","int","sqlite3_stmt*","int"],["sqlite3_column_count","int","sqlite3_stmt*"],["sqlite3_column_decltype","string","sqlite3_stmt*","int"],["sqlite3_column_double","f64","sqlite3_stmt*","int"],["sqlite3_column_int","int","sqlite3_stmt*","int"],["sqlite3_column_name","string","sqlite3_stmt*","int"],["sqlite3_column_text","string","sqlite3_stmt*","int"],["sqlite3_column_type","int","sqlite3_stmt*","int"],["sqlite3_column_value","sqlite3_value*","sqlite3_stmt*","int"],["sqlite3_commit_hook","void*",["sqlite3*",new s.xWrap.FuncPtrAdapter({name:"sqlite3_commit_hook",signature:"i(p)",contextKey:e=>e[0]}),"*"]],["sqlite3_compileoption_get","string","int"],["sqlite3_compileoption_used","int","string"],["sqlite3_complete","int","string:flexible"],["sqlite3_context_db_handle","sqlite3*","sqlite3_context*"],["sqlite3_data_count","int","sqlite3_stmt*"],["sqlite3_db_filename","string","sqlite3*","string"],["sqlite3_db_handle","sqlite3*","sqlite3_stmt*"],["sqlite3_db_name","string","sqlite3*","int"],["sqlite3_db_readonly","int","sqlite3*","string"],["sqlite3_db_status","int","sqlite3*","int","*","*","int"],["sqlite3_errcode","int","sqlite3*"],["sqlite3_errmsg","string","sqlite3*"],["sqlite3_error_offset","int","sqlite3*"],["sqlite3_errstr","string","int"],["sqlite3_exec","int",["sqlite3*","string:flexible",new s.xWrap.FuncPtrAdapter({signature:"i(pipp)",bindScope:"transient",callProxy:e=>{let t;return(n,i,o,a)=>{try{const r=s.cArgvToJs(i,o);return t||(t=s.cArgvToJs(i,a)),0|e(r,t)}catch(l){return l.resultCode||r.SQLITE_ERROR}}}}),"*","**"]],["sqlite3_expanded_sql","string","sqlite3_stmt*"],["sqlite3_extended_errcode","int","sqlite3*"],["sqlite3_extended_result_codes","int","sqlite3*","int"],["sqlite3_file_control","int","sqlite3*","string","int","*"],["sqlite3_finalize","int","sqlite3_stmt*"],["sqlite3_free",void 0,"*"],["sqlite3_get_autocommit","int","sqlite3*"],["sqlite3_get_auxdata","*","sqlite3_context*","int"],["sqlite3_initialize",void 0],["sqlite3_interrupt",void 0,"sqlite3*"],["sqlite3_is_interrupted","int","sqlite3*"],["sqlite3_keyword_count","int"],["sqlite3_keyword_name","int",["int","**","*"]],["sqlite3_keyword_check","int",["string","int"]],["sqlite3_libversion","string"],["sqlite3_libversion_number","int"],["sqlite3_limit","int",["sqlite3*","int","int"]],["sqlite3_malloc","*","int"],["sqlite3_open","int","string","*"],["sqlite3_open_v2","int","string","*","int","string"],["sqlite3_realloc","*","*","int"],["sqlite3_reset","int","sqlite3_stmt*"],["sqlite3_result_blob",void 0,"sqlite3_context*","*","int","*"],["sqlite3_result_double",void 0,"sqlite3_context*","f64"],["sqlite3_result_error",void 0,"sqlite3_context*","string","int"],["sqlite3_result_error_code",void 0,"sqlite3_context*","int"],["sqlite3_result_error_nomem",void 0,"sqlite3_context*"],["sqlite3_result_error_toobig",void 0,"sqlite3_context*"],["sqlite3_result_int",void 0,"sqlite3_context*","int"],["sqlite3_result_null",void 0,"sqlite3_context*"],["sqlite3_result_pointer",void 0,"sqlite3_context*","*","string:static","*"],["sqlite3_result_subtype",void 0,"sqlite3_value*","int"],["sqlite3_result_text",void 0,"sqlite3_context*","string","int","*"],["sqlite3_result_zeroblob",void 0,"sqlite3_context*","int"],["sqlite3_rollback_hook","void*",["sqlite3*",new s.xWrap.FuncPtrAdapter({name:"sqlite3_rollback_hook",signature:"v(p)",contextKey:e=>e[0]}),"*"]],["sqlite3_set_auxdata",void 0,["sqlite3_context*","int","*","*"]],["sqlite3_shutdown",void 0],["sqlite3_sourceid","string"],["sqlite3_sql","string","sqlite3_stmt*"],["sqlite3_status","int","int","*","*","int"],["sqlite3_step","int","sqlite3_stmt*"],["sqlite3_stmt_busy","int","sqlite3_stmt*"],["sqlite3_stmt_readonly","int","sqlite3_stmt*"],["sqlite3_stmt_status","int","sqlite3_stmt*","int","int"],["sqlite3_strglob","int","string","string"],["sqlite3_stricmp","int","string","string"],["sqlite3_strlike","int","string","string","int"],["sqlite3_strnicmp","int","string","string","int"],["sqlite3_table_column_metadata","int","sqlite3*","string","string","string","**","**","*","*","*"],["sqlite3_total_changes","int","sqlite3*"],["sqlite3_trace_v2","int",["sqlite3*","int",new s.xWrap.FuncPtrAdapter({name:"sqlite3_trace_v2::callback",signature:"i(ippp)",contextKey:(e,t)=>e[0]}),"*"]],["sqlite3_txn_state","int",["sqlite3*","string"]],["sqlite3_uri_boolean","int","sqlite3_filename","string","int"],["sqlite3_uri_key","string","sqlite3_filename","int"],["sqlite3_uri_parameter","string","sqlite3_filename","string"],["sqlite3_user_data","void*","sqlite3_context*"],["sqlite3_value_blob","*","sqlite3_value*"],["sqlite3_value_bytes","int","sqlite3_value*"],["sqlite3_value_double","f64","sqlite3_value*"],["sqlite3_value_dup","sqlite3_value*","sqlite3_value*"],["sqlite3_value_free",void 0,"sqlite3_value*"],["sqlite3_value_frombind","int","sqlite3_value*"],["sqlite3_value_int","int","sqlite3_value*"],["sqlite3_value_nochange","int","sqlite3_value*"],["sqlite3_value_numeric_type","int","sqlite3_value*"],["sqlite3_value_pointer","*","sqlite3_value*","string:static"],["sqlite3_value_subtype","int","sqlite3_value*"],["sqlite3_value_text","string","sqlite3_value*"],["sqlite3_value_type","int","sqlite3_value*"],["sqlite3_vfs_find","*","string"],["sqlite3_vfs_register","int","sqlite3_vfs*","int"],["sqlite3_vfs_unregister","int","sqlite3_vfs*"]],s.exports.sqlite3_progress_handler&&s.bindingSignatures.push(["sqlite3_progress_handler",void 0,["sqlite3*","int",new s.xWrap.FuncPtrAdapter({name:"xProgressHandler",signature:"i(p)",bindScope:"context",contextKey:(e,t)=>e[0]}),"*"]]),s.exports.sqlite3_stmt_explain&&s.bindingSignatures.push(["sqlite3_stmt_explain","int","sqlite3_stmt*","int"],["sqlite3_stmt_isexplain","int","sqlite3_stmt*"]),s.exports.sqlite3_set_authorizer&&s.bindingSignatures.push(["sqlite3_set_authorizer","int",["sqlite3*",new s.xWrap.FuncPtrAdapter({name:"sqlite3_set_authorizer::xAuth",signature:"i(pissss)",contextKey:(e,t)=>e[0],callProxy:e=>(t,n,i,o,a,l)=>{try{return i=i&&s.cstrToJs(i),o=o&&s.cstrToJs(o),a=a&&s.cstrToJs(a),l=l&&s.cstrToJs(l),e(t,n,i,o,a,l)||0}catch(c){return c.resultCode||r.SQLITE_ERROR}}}),"*"]]),s.bindingSignatures.int64=[["sqlite3_bind_int64","int",["sqlite3_stmt*","int","i64"]],["sqlite3_changes64","i64",["sqlite3*"]],["sqlite3_column_int64","i64",["sqlite3_stmt*","int"]],["sqlite3_deserialize","int","sqlite3*","string","*","i64","i64","int"],["sqlite3_last_insert_rowid","i64",["sqlite3*"]],["sqlite3_malloc64","*","i64"],["sqlite3_msize","i64","*"],["sqlite3_overload_function","int",["sqlite3*","string","int"]],["sqlite3_realloc64","*","*","i64"],["sqlite3_result_int64",void 0,"*","i64"],["sqlite3_result_zeroblob64","int","*","i64"],["sqlite3_serialize","*","sqlite3*","string","*","int"],["sqlite3_set_last_insert_rowid",void 0,["sqlite3*","i64"]],["sqlite3_status64","int","int","*","*","int"],["sqlite3_total_changes64","i64",["sqlite3*"]],["sqlite3_update_hook","*",["sqlite3*",new s.xWrap.FuncPtrAdapter({name:"sqlite3_update_hook",signature:"v(iippj)",contextKey:e=>e[0],callProxy:e=>(t,r,n,i,o)=>{e(t,r,s.cstrToJs(n),s.cstrToJs(i),o)}}),"*"]],["sqlite3_uri_int64","i64",["sqlite3_filename","string","i64"]],["sqlite3_value_int64","i64","sqlite3_value*"]],s.bigIntEnabled&&s.exports.sqlite3_declare_vtab&&s.bindingSignatures.int64.push(["sqlite3_create_module","int",["sqlite3*","string","sqlite3_module*","*"]],["sqlite3_create_module_v2","int",["sqlite3*","string","sqlite3_module*","*","*"]],["sqlite3_declare_vtab","int",["sqlite3*","string:flexible"]],["sqlite3_drop_modules","int",["sqlite3*","**"]],["sqlite3_vtab_collation","string","sqlite3_index_info*","int"],["sqlite3_vtab_distinct","int","sqlite3_index_info*"],["sqlite3_vtab_in","int","sqlite3_index_info*","int","int"],["sqlite3_vtab_in_first","int","sqlite3_value*","**"],["sqlite3_vtab_in_next","int","sqlite3_value*","**"],["sqlite3_vtab_nochange","int","sqlite3_context*"],["sqlite3_vtab_on_conflict","int","sqlite3*"],["sqlite3_vtab_rhs_value","int","sqlite3_index_info*","int","**"]),s.bigIntEnabled&&s.exports.sqlite3_preupdate_hook&&s.bindingSignatures.int64.push(["sqlite3_preupdate_blobwrite","int","sqlite3*"],["sqlite3_preupdate_count","int","sqlite3*"],["sqlite3_preupdate_depth","int","sqlite3*"],["sqlite3_preupdate_hook","*",["sqlite3*",new s.xWrap.FuncPtrAdapter({name:"sqlite3_preupdate_hook",signature:"v(ppippjj)",contextKey:e=>e[0],callProxy:e=>(t,r,n,i,o,a,l)=>{e(t,r,n,s.cstrToJs(i),s.cstrToJs(o),a,l)}}),"*"]],["sqlite3_preupdate_new","int",["sqlite3*","int","**"]],["sqlite3_preupdate_old","int",["sqlite3*","int","**"]]),s.bigIntEnabled&&s.exports.sqlite3changegroup_add&&s.exports.sqlite3session_create&&s.exports.sqlite3_preupdate_hook){const e={signature:"i(ps)",callProxy:e=>(t,n)=>{try{return 0|e(t,s.cstrToJs(n))}catch(i){return i.resultCode||r.SQLITE_ERROR}}};s.bindingSignatures.int64.push(["sqlite3changegroup_add","int",["sqlite3_changegroup*","int","void*"]],["sqlite3changegroup_add_strm","int",["sqlite3_changegroup*",new s.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3changegroup_delete",void 0,["sqlite3_changegroup*"]],["sqlite3changegroup_new","int",["**"]],["sqlite3changegroup_output","int",["sqlite3_changegroup*","int*","**"]],["sqlite3changegroup_output_strm","int",["sqlite3_changegroup*",new s.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppi)",bindScope:"transient"}),"void*"]],["sqlite3changeset_apply","int",["sqlite3*","int","void*",new s.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...e}),new s.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*"]],["sqlite3changeset_apply_strm","int",["sqlite3*",new s.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*",new s.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...e}),new s.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*"]],["sqlite3changeset_apply_v2","int",["sqlite3*","int","void*",new s.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...e}),new s.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*","**","int*","int"]],["sqlite3changeset_apply_v2_strm","int",["sqlite3*",new s.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*",new s.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...e}),new s.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*","**","int*","int"]],["sqlite3changeset_concat","int",["int","void*","int","void*","int*","**"]],["sqlite3changeset_concat_strm","int",[new s.xWrap.FuncPtrAdapter({name:"xInputA",signature:"i(ppp)",bindScope:"transient"}),"void*",new s.xWrap.FuncPtrAdapter({name:"xInputB",signature:"i(ppp)",bindScope:"transient"}),"void*",new s.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppi)",bindScope:"transient"}),"void*"]],["sqlite3changeset_conflict","int",["sqlite3_changeset_iter*","int","**"]],["sqlite3changeset_finalize","int",["sqlite3_changeset_iter*"]],["sqlite3changeset_fk_conflicts","int",["sqlite3_changeset_iter*","int*"]],["sqlite3changeset_invert","int",["int","void*","int*","**"]],["sqlite3changeset_invert_strm","int",[new s.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*",new s.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppi)",bindScope:"transient"}),"void*"]],["sqlite3changeset_new","int",["sqlite3_changeset_iter*","int","**"]],["sqlite3changeset_next","int",["sqlite3_changeset_iter*"]],["sqlite3changeset_old","int",["sqlite3_changeset_iter*","int","**"]],["sqlite3changeset_op","int",["sqlite3_changeset_iter*","**","int*","int*","int*"]],["sqlite3changeset_pk","int",["sqlite3_changeset_iter*","**","int*"]],["sqlite3changeset_start","int",["**","int","*"]],["sqlite3changeset_start_strm","int",["**",new s.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3changeset_start_v2","int",["**","int","*","int"]],["sqlite3changeset_start_v2_strm","int",["**",new s.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*","int"]],["sqlite3session_attach","int",["sqlite3_session*","string"]],["sqlite3session_changeset","int",["sqlite3_session*","int*","**"]],["sqlite3session_changeset_size","i64",["sqlite3_session*"]],["sqlite3session_changeset_strm","int",["sqlite3_session*",new s.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3session_config","int",["int","void*"]],["sqlite3session_create","int",["sqlite3*","string","**"]],["sqlite3session_diff","int",["sqlite3_session*","string","string","**"]],["sqlite3session_enable","int",["sqlite3_session*","int"]],["sqlite3session_indirect","int",["sqlite3_session*","int"]],["sqlite3session_isempty","int",["sqlite3_session*"]],["sqlite3session_memory_used","i64",["sqlite3_session*"]],["sqlite3session_object_config","int",["sqlite3_session*","int","void*"]],["sqlite3session_patchset","int",["sqlite3_session*","*","**"]],["sqlite3session_patchset_strm","int",["sqlite3_session*",new s.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3session_table_filter",void 0,["sqlite3_session*",new s.xWrap.FuncPtrAdapter({name:"xFilter",...e,contextKey:(e,t)=>e[0]}),"*"]])}s.bindingSignatures.wasmInternal=[["sqlite3__wasm_db_reset","int","sqlite3*"],["sqlite3__wasm_db_vfs","sqlite3_vfs*","sqlite3*","string"],["sqlite3__wasm_vfs_create_file","int","sqlite3_vfs*","string","*","int"],["sqlite3__wasm_posix_create_file","int","string","*","int"],["sqlite3__wasm_vfs_unlink","int","sqlite3_vfs*","string"],["sqlite3__wasm_qfmt_token","string:dealloc","string","int"]],e.StructBinder=globalThis.Jaccwabyt({heap:s.heap8u,alloc:s.alloc,dealloc:s.dealloc,bigIntEnabled:s.bigIntEnabled,memberPrefix:"$"}),delete globalThis.Jaccwabyt;{const i=s.xWrap.argAdapter("string");s.xWrap.argAdapter("string:flexible",e=>i(n.flexibleString(e))),s.xWrap.argAdapter("string:static",function(e){return s.isPtr(e)?e:this[e=""+e]||(this[e]=s.allocCString(e))}.bind(Object.create(null)));const o=s.xWrap.argAdapter("*"),a=function(){};s.xWrap.argAdapter("sqlite3_filename",o)("sqlite3_context*",o)("sqlite3_value*",o)("void*",o)("sqlite3_changegroup*",o)("sqlite3_changeset_iter*",o)("sqlite3_session*",o)("sqlite3_stmt*",t=>{var r;return o(t instanceof((null==(r=null==e?void 0:e.oo1)?void 0:r.Stmt)||a)?t.pointer:t)})("sqlite3*",t=>{var r;return o(t instanceof((null==(r=null==e?void 0:e.oo1)?void 0:r.DB)||a)?t.pointer:t)})("sqlite3_vfs*",t=>"string"==typeof t?r.sqlite3_vfs_find(t)||e.SQLite3Error.toss(r.SQLITE_NOTFOUND,"Unknown sqlite3_vfs name:",t):o(t instanceof(r.sqlite3_vfs||a)?t.pointer:t)),s.exports.sqlite3_declare_vtab&&s.xWrap.argAdapter("sqlite3_index_info*",e=>o(e instanceof(r.sqlite3_index_info||a)?e.pointer:e))("sqlite3_module*",e=>o(e instanceof(r.sqlite3_module||a)?e.pointer:e));const l=s.xWrap.resultAdapter("*");s.xWrap.resultAdapter("sqlite3*",l)("sqlite3_context*",l)("sqlite3_stmt*",l)("sqlite3_value*",l)("sqlite3_vfs*",l)("void*",l),0===s.exports.sqlite3_step.length&&(s.xWrap.doArgcCheck=!1,e.config.warn("Disabling sqlite3.wasm.xWrap.doArgcCheck due to environmental quirks."));for(const e of s.bindingSignatures)r[e[0]]=s.xWrap.apply(null,e);for(const e of s.bindingSignatures.wasmInternal)n[e[0]]=s.xWrap.apply(null,e);const c=function(e){return()=>t(e+"() is unavailable due to lack","of BigInt support in this build.")};for(const e of s.bindingSignatures.int64)r[e[0]]=s.bigIntEnabled?s.xWrap.apply(null,e):c(e[0]);if(delete s.bindingSignatures,s.exports.sqlite3__wasm_db_error){const t=s.xWrap("sqlite3__wasm_db_error","int","sqlite3*","int","string");n.sqlite3__wasm_db_error=function(s,n,i){return n instanceof e.WasmAllocError?(n=r.SQLITE_NOMEM,i=0):n instanceof Error&&(i=i||""+n,n=n.resultCode||r.SQLITE_ERROR),s?t(s,n,i):n}}else n.sqlite3__wasm_db_error=function(e,t,r){return console.warn("sqlite3__wasm_db_error() is not exported.",arguments),t}}{const i=s.xCall("sqlite3__wasm_enum_json");i||t("Maintenance required: increase sqlite3__wasm_enum_json()'s","static buffer size!"),s.ctype=JSON.parse(s.cstrToJs(i));const o=["access","authorizer","blobFinalizers","changeset","config","dataTypes","dbConfig","dbStatus","encodings","fcntl","flock","ioCap","limits","openFlags","prepareFlags","resultCodes","sqlite3Status","stmtStatus","syncFlags","trace","txnState","udfFlags","version"];s.bigIntEnabled&&o.push("serialize","session","vtab");for(const e of o)for(const t of Object.entries(s.ctype[e]))r[t[0]]=t[1];s.functionEntry(r.SQLITE_WASM_DEALLOC)||t("Internal error: cannot resolve exported function","entry SQLITE_WASM_DEALLOC (=="+r.SQLITE_WASM_DEALLOC+").");const a=Object.create(null);for(const e of["resultCodes"])for(const t of Object.entries(s.ctype[e]))a[t[1]]=t[0];r.sqlite3_js_rc_str=e=>a[e];const l=Object.assign(Object.create(null),{WasmTestStruct:!0,sqlite3_kvvfs_methods:!n.isUIThread(),sqlite3_index_info:!s.bigIntEnabled,sqlite3_index_constraint:!s.bigIntEnabled,sqlite3_index_orderby:!s.bigIntEnabled,sqlite3_index_constraint_usage:!s.bigIntEnabled});for(const t of s.ctype.structs)l[t.name]||(r[t.name]=e.StructBinder(t));if(r.sqlite3_index_info){for(const e of["sqlite3_index_constraint","sqlite3_index_orderby","sqlite3_index_constraint_usage"])r.sqlite3_index_info[e]=r[e],delete r[e];r.sqlite3_vtab_config=s.xWrap("sqlite3__wasm_vtab_config","int",["sqlite3*","int","int"])}}const i=(e,t,s)=>n.sqlite3__wasm_db_error(e,r.SQLITE_MISUSE,t+"() requires "+s+" argument"+(1===s?"":"s")+"."),o=e=>n.sqlite3__wasm_db_error(e,r.SQLITE_FORMAT,"SQLITE_UTF8 is the only supported encoding."),a=e=>s.xWrap.argAdapter("sqlite3*")(e),l=e=>s.isPtr(e)?s.cstrToJs(e):e,c=function(e,t){e=a(e);let r=this.dbMap.get(e);return t?(!r&&t>0&&this.dbMap.set(e,r=Object.create(null)),r):(this.dbMap.delete(e),r)}.bind(Object.assign(Object.create(null),{dbMap:new Map}));c.addCollation=function(e,t){const r=c(e,1);r.collation||(r.collation=new Set),r.collation.add(l(t).toLowerCase())},c._addUDF=function(e,t,r,s){t=l(t).toLowerCase();let n=s.get(t);n||s.set(t,n=new Set),n.add(r<0?-1:r)},c.addFunction=function(e,t,r){const s=c(e,1);s.udf||(s.udf=new Map),this._addUDF(e,t,r,s.udf)},s.exports.sqlite3_create_window_function&&(c.addWindowFunc=function(e,t,r){const s=c(e,1);s.wudf||(s.wudf=new Map),this._addUDF(e,t,r,s.wudf)}),c.cleanup=function(t){const n=[t=a(t)];for(const a of["sqlite3_busy_handler","sqlite3_commit_hook","sqlite3_preupdate_hook","sqlite3_progress_handler","sqlite3_rollback_hook","sqlite3_set_authorizer","sqlite3_trace_v2","sqlite3_update_hook"]){const t=s.exports[a];if(t){n.length=t.length;try{r[a](...n)}catch(l){e.config.warn("close-time call of",a+"(",n,") threw:",l)}}}const i=c(t,0);if(!i)return;if(i.collation){for(const e of i.collation)try{r.sqlite3_create_collation_v2(t,e,r.SQLITE_UTF8,0,0,0)}catch(l){}delete i.collation}let o;for(o=0;o<2;++o){const e=o?i.wudf:i.udf;if(!e)continue;const s=o?r.sqlite3_create_window_function:r.sqlite3_create_function_v2;for(const n of e){const e=n[0],i=n[1],a=[t,e,0,r.SQLITE_UTF8,0,0,0,0,0];o&&a.push(0);for(const t of i)try{a[2]=t,s.apply(null,a)}catch(_){}i.clear()}e.clear()}delete i.udf,delete i.wudf};{const e=s.xWrap("sqlite3_close_v2","int","sqlite3*");r.sqlite3_close_v2=function(t){if(1!==arguments.length)return i(t,"sqlite3_close_v2",1);if(t)try{c.cleanup(t)}catch(r){}return e(t)}}if(r.sqlite3session_create){const e=s.xWrap("sqlite3session_delete",void 0,["sqlite3_session*"]);r.sqlite3session_delete=function(t){if(1!==arguments.length)return i(pDb,"sqlite3session_delete",1);t&&r.sqlite3session_table_filter(t,0,0),e(t)}}{const e=(e,t)=>"argv["+t+"]:"+e[0]+":"+s.cstrToJs(e[1]).toLowerCase(),t=s.xWrap("sqlite3_create_collation_v2","int",["sqlite3*","string","int","*",new s.xWrap.FuncPtrAdapter({name:"xCompare",signature:"i(pipip)",contextKey:e}),new s.xWrap.FuncPtrAdapter({name:"xDestroy",signature:"v(p)",contextKey:e})]);r.sqlite3_create_collation_v2=function(e,s,a,l,_,u){if(6!==arguments.length)return i(e,"sqlite3_create_collation_v2",6);if(15&a){if(r.SQLITE_UTF8!==(15&a))return o(e)}else a|=r.SQLITE_UTF8;try{const r=t(e,s,a,l,_,u);return 0===r&&_ instanceof Function&&c.addCollation(e,s),r}catch(d){return n.sqlite3__wasm_db_error(e,d)}},r.sqlite3_create_collation=(e,t,s,n,o)=>5===arguments.length?r.sqlite3_create_collation_v2(e,t,s,n,o,0):i(e,"sqlite3_create_collation",5)}{const e=function(e,t){return e[0]+":"+(e[2]<0?-1:e[2])+":"+t+":"+s.cstrToJs(e[1]).toLowerCase()},t=Object.assign(Object.create(null),{xInverseAndStep:{signature:"v(pip)",contextKey:e,callProxy:e=>(t,s,n)=>{try{e(t,...r.sqlite3_values_to_js(s,n))}catch(i){r.sqlite3_result_error_js(t,i)}}},xFinalAndValue:{signature:"v(p)",contextKey:e,callProxy:e=>t=>{try{r.sqlite3_result_js(t,e(t))}catch(s){r.sqlite3_result_error_js(t,s)}}},xFunc:{signature:"v(pip)",contextKey:e,callProxy:e=>(t,s,n)=>{try{r.sqlite3_result_js(t,e(t,...r.sqlite3_values_to_js(s,n)))}catch(i){r.sqlite3_result_error_js(t,i)}}},xDestroy:{signature:"v(p)",contextKey:e,callProxy:e=>t=>{try{e(t)}catch(r){console.error("UDF xDestroy method threw:",r)}}}}),a=s.xWrap("sqlite3_create_function_v2","int",["sqlite3*","string","int","int","*",new s.xWrap.FuncPtrAdapter({name:"xFunc",...t.xFunc}),new s.xWrap.FuncPtrAdapter({name:"xStep",...t.xInverseAndStep}),new s.xWrap.FuncPtrAdapter({name:"xFinal",...t.xFinalAndValue}),new s.xWrap.FuncPtrAdapter({name:"xDestroy",...t.xDestroy})]),l=s.exports.sqlite3_create_window_function?s.xWrap("sqlite3_create_window_function","int",["sqlite3*","string","int","int","*",new s.xWrap.FuncPtrAdapter({name:"xStep",...t.xInverseAndStep}),new s.xWrap.FuncPtrAdapter({name:"xFinal",...t.xFinalAndValue}),new s.xWrap.FuncPtrAdapter({name:"xValue",...t.xFinalAndValue}),new s.xWrap.FuncPtrAdapter({name:"xInverse",...t.xInverseAndStep}),new s.xWrap.FuncPtrAdapter({name:"xDestroy",...t.xDestroy})]):void 0;r.sqlite3_create_function_v2=function e(t,s,l,_,u,d,f,p,h){if(e.length!==arguments.length)return i(t,"sqlite3_create_function_v2",e.length);if(15&_){if(r.SQLITE_UTF8!==(15&_))return o(t)}else _|=r.SQLITE_UTF8;try{const e=a(t,s,l,_,u,d,f,p,h);return 0===e&&(d instanceof Function||f instanceof Function||p instanceof Function||h instanceof Function)&&c.addFunction(t,s,l),e}catch(m){return console.error("sqlite3_create_function_v2() setup threw:",m),n.sqlite3__wasm_db_error(t,m,"Creation of UDF threw: "+m)}},r.sqlite3_create_function=function e(t,s,n,o,a,l,c,_){return e.length===arguments.length?r.sqlite3_create_function_v2(t,s,n,o,a,l,c,_,0):i(t,"sqlite3_create_function",e.length)},l?r.sqlite3_create_window_function=function e(t,s,a,_,u,d,f,p,h,m){if(e.length!==arguments.length)return i(t,"sqlite3_create_window_function",e.length);if(15&_){if(r.SQLITE_UTF8!==(15&_))return o(t)}else _|=r.SQLITE_UTF8;try{const e=l(t,s,a,_,u,d,f,p,h,m);return 0===e&&(d instanceof Function||f instanceof Function||p instanceof Function||h instanceof Function||m instanceof Function)&&c.addWindowFunc(t,s,a),e}catch(g){return console.error("sqlite3_create_window_function() setup threw:",g),n.sqlite3__wasm_db_error(t,g,"Creation of UDF threw: "+g)}}:delete r.sqlite3_create_window_function,r.sqlite3_create_function_v2.udfSetResult=r.sqlite3_create_function.udfSetResult=r.sqlite3_result_js,r.sqlite3_create_window_function&&(r.sqlite3_create_window_function.udfSetResult=r.sqlite3_result_js),r.sqlite3_create_function_v2.udfConvertArgs=r.sqlite3_create_function.udfConvertArgs=r.sqlite3_values_to_js,r.sqlite3_create_window_function&&(r.sqlite3_create_window_function.udfConvertArgs=r.sqlite3_values_to_js),r.sqlite3_create_function_v2.udfSetError=r.sqlite3_create_function.udfSetError=r.sqlite3_result_error_js,r.sqlite3_create_window_function&&(r.sqlite3_create_window_function.udfSetError=r.sqlite3_result_error_js)}{const e=(e,t)=>("string"==typeof e?t=-1:n.isSQLableTypedArray(e)?(t=e.byteLength,e=n.typedArrayToString(e instanceof ArrayBuffer?new Uint8Array(e):e)):Array.isArray(e)&&(e=e.join(""),t=-1),[e,t]),t={basic:s.xWrap("sqlite3_prepare_v3","int",["sqlite3*","string","int","int","**","**"]),full:s.xWrap("sqlite3_prepare_v3","int",["sqlite3*","*","int","int","**","**"])};r.sqlite3_prepare_v3=function s(o,a,l,c,_,u){if(s.length!==arguments.length)return i(o,"sqlite3_prepare_v3",s.length);const[d,f]=e(a,l);switch(typeof d){case"string":return t.basic(o,d,f,c,_,null);case"number":return t.full(o,d,f,c,_,u);default:return n.sqlite3__wasm_db_error(o,r.SQLITE_MISUSE,"Invalid SQL argument type for sqlite3_prepare_v2/v3().")}},r.sqlite3_prepare_v2=function e(t,s,n,o,a){return e.length===arguments.length?r.sqlite3_prepare_v3(t,s,n,0,o,a):i(t,"sqlite3_prepare_v2",e.length)}}{const e=s.xWrap("sqlite3_bind_text","int",["sqlite3_stmt*","int","string","int","*"]),t=s.xWrap("sqlite3_bind_blob","int",["sqlite3_stmt*","int","*","int","*"]);r.sqlite3_bind_text=function t(o,a,l,c,_){if(t.length!==arguments.length)return i(r.sqlite3_db_handle(o),"sqlite3_bind_text",t.length);if(s.isPtr(l)||null===l)return e(o,a,l,c,_);let u,d;l instanceof ArrayBuffer?l=new Uint8Array(l):Array.isArray(pMem)&&(l=pMem.join(""));try{if(n.isSQLableTypedArray(l))u=s.allocFromTypedArray(l),d=l.byteLength;else{if("string"!=typeof l)return n.sqlite3__wasm_db_error(r.sqlite3_db_handle(o),r.SQLITE_MISUSE,"Invalid 3rd argument type for sqlite3_bind_text().");[u,d]=s.allocCString(l)}return e(o,a,u,d,r.SQLITE_WASM_DEALLOC)}catch(f){return s.dealloc(u),n.sqlite3__wasm_db_error(r.sqlite3_db_handle(o),f)}},r.sqlite3_bind_blob=function e(o,a,l,c,_){if(e.length!==arguments.length)return i(r.sqlite3_db_handle(o),"sqlite3_bind_blob",e.length);if(s.isPtr(l)||null===l)return t(o,a,l,c,_);let u,d;l instanceof ArrayBuffer?l=new Uint8Array(l):Array.isArray(l)&&(l=l.join(""));try{if(n.isBindableTypedArray(l))u=s.allocFromTypedArray(l),d=c>=0?c:l.byteLength;else{if("string"!=typeof l)return n.sqlite3__wasm_db_error(r.sqlite3_db_handle(o),r.SQLITE_MISUSE,"Invalid 3rd argument type for sqlite3_bind_blob().");[u,d]=s.allocCString(l)}return t(o,a,u,d,r.SQLITE_WASM_DEALLOC)}catch(f){return s.dealloc(u),n.sqlite3__wasm_db_error(r.sqlite3_db_handle(o),f)}}}r.sqlite3_config=function(e,...t){if(arguments.length<2)return r.SQLITE_MISUSE;switch(e){case r.SQLITE_CONFIG_COVERING_INDEX_SCAN:case r.SQLITE_CONFIG_MEMSTATUS:case r.SQLITE_CONFIG_SMALL_MALLOC:case r.SQLITE_CONFIG_SORTERREF_SIZE:case r.SQLITE_CONFIG_STMTJRNL_SPILL:case r.SQLITE_CONFIG_URI:return s.exports.sqlite3__wasm_config_i(e,t[0]);case r.SQLITE_CONFIG_LOOKASIDE:return s.exports.sqlite3__wasm_config_ii(e,t[0],t[1]);case r.SQLITE_CONFIG_MEMDB_MAXSIZE:return s.exports.sqlite3__wasm_config_j(e,t[0]);case r.SQLITE_CONFIG_GETMALLOC:case r.SQLITE_CONFIG_GETMUTEX:case r.SQLITE_CONFIG_GETPCACHE2:case r.SQLITE_CONFIG_GETPCACHE:case r.SQLITE_CONFIG_HEAP:case r.SQLITE_CONFIG_LOG:case r.SQLITE_CONFIG_MALLOC:case r.SQLITE_CONFIG_MMAP_SIZE:case r.SQLITE_CONFIG_MULTITHREAD:case r.SQLITE_CONFIG_MUTEX:case r.SQLITE_CONFIG_PAGECACHE:case r.SQLITE_CONFIG_PCACHE2:case r.SQLITE_CONFIG_PCACHE:case r.SQLITE_CONFIG_PCACHE_HDRSZ:case r.SQLITE_CONFIG_PMASZ:case r.SQLITE_CONFIG_SERIALIZED:case r.SQLITE_CONFIG_SINGLETHREAD:case r.SQLITE_CONFIG_SQLLOG:case r.SQLITE_CONFIG_WIN32_HEAPSIZE:default:return r.SQLITE_NOTFOUND}};{const e=new Set;r.sqlite3_auto_extension=function(t){if(t instanceof Function)t=s.installFunction("i(ppp)",t);else if(1!==arguments.length||!s.isPtr(t))return r.SQLITE_MISUSE;const n=s.exports.sqlite3_auto_extension(t);return t!==arguments[0]&&(0===n?e.add(t):s.uninstallFunction(t)),n},r.sqlite3_cancel_auto_extension=function(e){return e&&1===arguments.length&&s.isPtr(e)?s.exports.sqlite3_cancel_auto_extension(e):0},r.sqlite3_reset_auto_extension=function(){s.exports.sqlite3_reset_auto_extension();for(const t of e)s.uninstallFunction(t);e.clear()}}const _=r.sqlite3_vfs_find("kvvfs");if(_)if(n.isUIThread()){const e=new r.sqlite3_kvvfs_methods(s.exports.sqlite3__wasm_kvvfs_methods());delete r.sqlite3_kvvfs_methods;const t=s.exports.sqlite3__wasm_kvvfsMakeKeyOnPstack,n=s.pstack,i=e=>115===s.peek(e)?sessionStorage:localStorage,o={xRead:(e,r,o,a)=>{const l=n.pointer,c=s.scopedAllocPush();try{const n=t(e,r);if(!n)return-3;const l=s.cstrToJs(n),c=i(e).getItem(l);if(!c)return-1;const _=c.length;if(a<=0)return _;if(1===a)return s.poke(o,0),_;const u=s.scopedAllocCString(c);return a>_+1&&(a=_+1),s.heap8u().copyWithin(o,u,u+a-1),s.poke(o+a-1,0),a-1}catch(_){return console.error("kvstorageRead()",_),-2}finally{n.restore(l),s.scopedAllocPop(c)}},xWrite:(e,o,a)=>{const l=n.pointer;try{const r=t(e,o);if(!r)return 1;const n=s.cstrToJs(r);return i(e).setItem(n,s.cstrToJs(a)),0}catch(c){return console.error("kvstorageWrite()",c),r.SQLITE_IOERR}finally{n.restore(l)}},xDelete:(e,o)=>{const a=n.pointer;try{const r=t(e,o);return r?(i(e).removeItem(s.cstrToJs(r)),0):1}catch(l){return console.error("kvstorageDelete()",l),r.SQLITE_IOERR}finally{n.restore(a)}}};for(const r of Object.keys(o))e[e.memberKey(r)]=s.installFunction(e.memberSignature(r),o[r])}else r.sqlite3_vfs_unregister(_);s.xWrap.FuncPtrAdapter.warnOnUse=!0;const u=e.StructBinder,d=function e(r,n,i,o=e.installMethodArgcCheck){if(r instanceof u.StructType?i instanceof Function||s.isPtr(i)||t("Usage error: expecting a Function or WASM pointer to one."):t("Usage error: target object is-not-a StructType."),1===arguments.length)return(t,s)=>e(r,t,s,o);e.argcProxy||(e.argcProxy=function(e,r,s,n){return function(...i){return s.length!==arguments.length&&t("Argument mismatch for",e.structInfo.name+"::"+r+": Native signature is:",n),s.apply(this,i)}},e.removeFuncList=function(){this.ondispose.__removeFuncList&&(this.ondispose.__removeFuncList.forEach((e,t)=>{if("number"==typeof e)try{s.uninstallFunction(e)}catch(r){}}),delete this.ondispose.__removeFuncList)});const a=r.memberSignature(n);a.length<2&&t("Member",n,"does not have a function pointer signature:",a);const l=r.memberKey(n),c=o&&!s.isPtr(i)?e.argcProxy(r,l,i,a):i;if(s.isPtr(c))c&&!s.functionEntry(c)&&t("Pointer",c,"is not a WASM function table entry."),r[l]=c;else{const t=s.installFunction(c,r.memberSignature(n,!0));r[l]=t,r.ondispose&&r.ondispose.__removeFuncList||(r.addOnDispose("ondispose.__removeFuncList handler",e.removeFuncList),r.ondispose.__removeFuncList=[]),r.ondispose.__removeFuncList.push(l,t)}return(t,s)=>e(r,t,s,o)};d.installMethodArgcCheck=!1;const f=function(e,t,r=d.installMethodArgcCheck){const s=new Map;for(const n of Object.keys(t)){const i=t[n],o=s.get(i);if(o){const t=e.memberKey(n);e[t]=e[e.memberKey(o)]}else d(e,n,i,r),s.set(i,n)}return e};u.StructType.prototype.installMethod=function(e,t,r=d.installMethodArgcCheck){return arguments.length<3&&e&&"object"==typeof e?f(this,...arguments):d(this,...arguments)},u.StructType.prototype.installMethods=function(e,t=d.installMethodArgcCheck){return f(this,e,t)}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(e){e.version={libVersion:"3.50.1",libVersionNumber:3050001,sourceId:"2025-06-06 14:52:32 b77dc5e0f596d2140d9ac682b2893ff65d3a4140aa86067a3efebe29dc914c95",downloadVersion:3500100}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(e){const t=(...t)=>{throw new e.SQLite3Error(...t)},r=e.capi,s=e.wasm,n=e.util,i=new WeakMap,o=new WeakMap,a=(e,t,r)=>{const s=Object.getOwnPropertyDescriptor(e,t);return s?s.value:r},l=function(e,s){return s&&(e instanceof d&&(e=e.pointer),t(s,"sqlite3 result code",s+":",e?r.sqlite3_errmsg(e):r.sqlite3_errstr(s))),arguments[0]},c=s.installFunction("i(ippp)",function(e,t,s,n){r.SQLITE_TRACE_STMT}.bind({counter:0})),_=Object.create(null),u=function n(...a){if(!n._name2vfs){n._name2vfs=Object.create(null);const e="function"==typeof importScripts&&(e=>t("The VFS for",e,"is only available in the main window thread."));n._name2vfs[":localStorage:"]={vfs:"kvvfs",filename:e||(()=>"local")},n._name2vfs[":sessionStorage:"]={vfs:"kvvfs",filename:e||(()=>"session")}}const u=n.normalizeArgs(...a);let d=u.filename,f=u.vfs,p=u.flags;("string"!=typeof d&&"number"!=typeof d||"string"!=typeof p||f&&"string"!=typeof f&&"number"!=typeof f)&&(e.config.error("Invalid DB ctor args",u,arguments),t("Invalid arguments for DB constructor."));let h="number"==typeof d?s.cstrToJs(d):d;const m=n._name2vfs[h];m&&(f=m.vfs,d=h=m.filename(h));let g,q=0;p.indexOf("c")>=0&&(q|=r.SQLITE_OPEN_CREATE|r.SQLITE_OPEN_READWRITE),p.indexOf("w")>=0&&(q|=r.SQLITE_OPEN_READWRITE),0===q&&(q|=r.SQLITE_OPEN_READONLY),q|=r.SQLITE_OPEN_EXRESCODE;const b=s.pstack.pointer;try{const e=s.pstack.allocPtr();let t=r.sqlite3_open_v2(d,e,q,f||0);g=s.peekPtr(e),l(g,t),r.sqlite3_extended_result_codes(g,1),p.indexOf("t")>=0&&r.sqlite3_trace_v2(g,r.SQLITE_TRACE_STMT,c,g)}catch(y){throw g&&r.sqlite3_close_v2(g),y}finally{s.pstack.restore(b)}this.filename=h,i.set(this,g),o.set(this,Object.create(null));try{const s=r.sqlite3_js_db_vfs(g)||t("Internal error: cannot get VFS for new db handle."),n=_[s];n&&(n instanceof Function?n(this,e):l(g,r.sqlite3_exec(g,n,0,0,0)))}catch(y){throw this.close(),y}};u.setVfsPostOpenCallback=function(e,r){r instanceof Function||t("dbCtorHelper.setVfsPostOpenCallback() should not be used with a non-function argument.",arguments),_[e]=r},u.normalizeArgs=function(e=":memory:",t="c",r=null){const s={};return 1===arguments.length&&arguments[0]&&"object"==typeof arguments[0]?(Object.assign(s,arguments[0]),void 0===s.flags&&(s.flags="c"),void 0===s.vfs&&(s.vfs=null),void 0===s.filename&&(s.filename=":memory:")):(s.filename=e,s.flags=t,s.vfs=r),s};const d=function(...e){u.apply(this,e)};d.dbCtorHelper=u;const f={null:1,number:2,string:3,boolean:4,blob:5};f[void 0],f.null,s.bigIntEnabled&&(f.bigint=f.number);const p=function(){f!==arguments[2]&&t(r.SQLITE_MISUSE,"Do not call the Stmt constructor directly. Use DB.prepare()."),this.db=arguments[0],i.set(this,arguments[1]),this.parameterCount=r.sqlite3_bind_parameter_count(this.pointer)},h=function(e){return e.pointer||t("DB has been closed."),e},m=function(e,r){return(r!==(0|r)||r<0||r>=e.columnCount)&&t("Column index",r,"is out of range."),e},g=(e,t,r,...s)=>{const n=e.prepare(t);try{const e=n.bind(r).step()?n.get(...s):void 0;return n.reset(),e}finally{n.finalize()}},q=(e,t,r,s)=>e.exec({sql:t,bind:r,rowMode:s,returnValue:"resultRows"});d.checkRc=(e,t)=>l(e,t),d.prototype={isOpen:function(){return!!this.pointer},affirmOpen:function(){return h(this)},close:function(){if(this.pointer){if(this.onclose&&this.onclose.before instanceof Function)try{this.onclose.before(this)}catch(e){}const t=this.pointer;if(Object.keys(o.get(this)).forEach((t,r)=>{if(r&&r.pointer)try{r.finalize()}catch(e){}}),i.delete(this),o.delete(this),r.sqlite3_close_v2(t),this.onclose&&this.onclose.after instanceof Function)try{this.onclose.after(this)}catch(e){}delete this.filename}},changes:function(e=!1,t=!1){const s=h(this).pointer;return e?t?r.sqlite3_total_changes64(s):r.sqlite3_total_changes(s):t?r.sqlite3_changes64(s):r.sqlite3_changes(s)},dbFilename:function(e="main"){return r.sqlite3_db_filename(h(this).pointer,e)},dbName:function(e=0){return r.sqlite3_db_name(h(this).pointer,e)},dbVfsName:function(e=0){let t;const n=r.sqlite3_js_db_vfs(h(this).pointer,e);if(n){const e=new r.sqlite3_vfs(n);try{t=s.cstrToJs(e.$zName)}finally{e.dispose()}}return t},prepare:function(e){h(this);const n=s.pstack.pointer;let i,a;try{i=s.pstack.alloc(8),d.checkRc(this,r.sqlite3_prepare_v2(this.pointer,e,-1,i,null)),a=s.peekPtr(i)}finally{s.pstack.restore(n)}a||t("Cannot prepare empty SQL.");const l=new p(this,a,f);return o.get(this)[a]=l,l},exec:function(){h(this);const e=function(e,s){const i=Object.create(null);switch(i.opt=Object.create(null),s.length){case 1:"string"==typeof s[0]||n.isSQLableTypedArray(s[0])||Array.isArray(s[0])?i.sql=s[0]:s[0]&&"object"==typeof s[0]&&(i.opt=s[0],i.sql=i.opt.sql);break;case 2:i.sql=s[0],i.opt=s[1];break;default:t("Invalid argument count for exec().")}i.sql=n.flexibleString(i.sql),"string"!=typeof i.sql&&t("Missing SQL argument or unsupported SQL value type.");const o=i.opt;switch(o.returnValue){case"resultRows":o.resultRows||(o.resultRows=[]),i.returnVal=()=>o.resultRows;break;case"saveSql":o.saveSql||(o.saveSql=[]),i.returnVal=()=>o.saveSql;break;case void 0:case"this":i.returnVal=()=>e;break;default:t("Invalid returnValue value:",o.returnValue)}if(o.callback||o.returnValue||void 0===o.rowMode||(o.resultRows||(o.resultRows=[]),i.returnVal=()=>o.resultRows),o.callback||o.resultRows)switch(void 0===o.rowMode?"array":o.rowMode){case"object":i.cbArg=(e,t)=>{t.columnNames||(t.columnNames=e.getColumnNames([]));const r=e.get([]),s=Object.create(null);for(const n in t.columnNames)s[t.columnNames[n]]=r[n];return s};break;case"array":i.cbArg=e=>e.get([]);break;case"stmt":Array.isArray(o.resultRows)&&t("exec(): invalid rowMode for a resultRows array: must","be one of 'array', 'object',","a result column number, or column name reference."),i.cbArg=e=>e;break;default:if(n.isInt32(o.rowMode)){i.cbArg=e=>e.get(o.rowMode);break}if("string"==typeof o.rowMode&&o.rowMode.length>1&&"$"===o.rowMode[0]){const e=o.rowMode.substr(1);i.cbArg=s=>{const n=s.get(Object.create(null))[e];return void 0===n?t(r.SQLITE_NOTFOUND,"exec(): unknown result column:",e):n};break}t("Invalid rowMode:",o.rowMode)}return i}(this,arguments);if(!e.sql)return t("exec() requires an SQL string.");const i=e.opt,o=i.callback,a=Array.isArray(i.resultRows)?i.resultRows:void 0;let l,c=i.bind,_=!!(e.cbArg||i.columnNames||a);const u=s.scopedAllocPush(),m=Array.isArray(i.saveSql)?i.saveSql:void 0;try{const t=n.isSQLableTypedArray(e.sql);let u=t?e.sql.byteLength:s.jstrlen(e.sql);const h=s.scopedAlloc(2*s.ptrSizeof+(u+1)),g=h+s.ptrSizeof;let q=g+s.ptrSizeof;const b=q+u;for(t?s.heap8().set(e.sql,q):s.jstrcpy(e.sql,s.heap8(),q,u,!1),s.poke(q+u,0);q&&s.peek(q,"i8");){s.pokePtr([h,g],0),d.checkRc(this,r.sqlite3_prepare_v3(this.pointer,q,u,0,h,g));const t=s.peekPtr(h);if(q=s.peekPtr(g),u=b-q,t){if(m&&m.push(r.sqlite3_sql(t).trim()),l=new p(this,t,f),c&&l.parameterCount&&(l.bind(c),c=null),_&&l.columnCount){let t=Array.isArray(i.columnNames)?0:1;if(_=!1,e.cbArg||a){const r=Object.create(null);for(;l.step();l._lockedByExec=!1){0===t++&&l.getColumnNames(r.columnNames=i.columnNames||[]),l._lockedByExec=!0;const s=e.cbArg(l,r);if(a&&a.push(s),o&&!1===o.call(i,s,l))break}l._lockedByExec=!1}0===t&&l.getColumnNames(i.columnNames)}else l.step();l.reset().finalize(),l=null}}}finally{s.scopedAllocPop(u),l&&(delete l._lockedByExec,l.finalize())}return e.returnVal()},createFunction:function(e,s,i){const o=e=>e instanceof Function;switch(arguments.length){case 1:e=(i=e).name,s=i.xFunc||0;break;case 2:o(s)||(s=(i=s).xFunc||0)}i||(i={}),"string"!=typeof e&&t("Invalid arguments: missing function name.");let l=i.xStep||0,c=i.xFinal||0;const _=i.xValue||0,u=i.xInverse||0;let f;o(s)?(f=!1,(o(l)||o(c))&&t("Ambiguous arguments: scalar or aggregate?"),l=c=null):o(l)?(o(c)||t("Missing xFinal() callback for aggregate or window UDF."),s=null):o(c)?t("Missing xStep() callback for aggregate or window UDF."):t("Missing function-type properties."),!1===f?(o(_)||o(u))&&t("xValue and xInverse are not permitted for non-window UDFs."):o(_)?(o(u)||t("xInverse must be provided if xValue is."),f=!0):o(u)&&t("xValue must be provided if xInverse is.");const p=i.pApp;null==p||"number"==typeof p&&n.isInt32(p)||t("Invalid value for pApp property. Must be a legal WASM pointer value.");const h=i.xDestroy||0;h&&!o(h)&&t("xDestroy property must be a function.");let m=0;a(i,"deterministic")&&(m|=r.SQLITE_DETERMINISTIC),a(i,"directOnly")&&(m|=r.SQLITE_DIRECTONLY),a(i,"innocuous")&&(m|=r.SQLITE_INNOCUOUS),e=e.toLowerCase();const g=s||l,q=a(i,"arity"),b="number"==typeof q?q:g.length?g.length-1:0;let y;return y=f?r.sqlite3_create_window_function(this.pointer,e,b,r.SQLITE_UTF8|m,p||0,l,c,_,u,h):r.sqlite3_create_function_v2(this.pointer,e,b,r.SQLITE_UTF8|m,p||0,s,l,c,h),d.checkRc(this,y),this},selectValue:function(e,t,r){return g(this,e,t,0,r)},selectValues:function(e,t,r){const s=this.prepare(e),n=[];try{for(s.bind(t);s.step();)n.push(s.get(0,r));s.reset()}finally{s.finalize()}return n},selectArray:function(e,t){return g(this,e,t,[])},selectObject:function(e,t){return g(this,e,t,{})},selectArrays:function(e,t){return q(this,e,t,"array")},selectObjects:function(e,t){return q(this,e,t,"object")},openStatementCount:function(){return this.pointer?Object.keys(o.get(this)).length:0},transaction:function(e){let s="BEGIN";arguments.length>1&&(/[^a-zA-Z]/.test(arguments[0])&&t(r.SQLITE_MISUSE,"Invalid argument for BEGIN qualifier."),s+=" "+arguments[0],e=arguments[1]),h(this).exec(s);try{const t=e(this);return this.exec("COMMIT"),t}catch(n){throw this.exec("ROLLBACK"),n}},savepoint:function(e){h(this).exec("SAVEPOINT oo1");try{const t=e(this);return this.exec("RELEASE oo1"),t}catch(t){throw this.exec("ROLLBACK to SAVEPOINT oo1; RELEASE SAVEPOINT oo1"),t}},checkRc:function(e){return l(this,e)}};const b=function(e){return e.pointer||t("Stmt has been closed."),e},y=function(e){return function(e){let t=f[null==e?"null":typeof e];switch(t){case f.boolean:case f.null:case f.number:case f.string:return t;case f.bigint:if(s.bigIntEnabled)return t;default:return n.isBindableTypedArray(e)?f.blob:void 0}}(e)||t("Unsupported bind() argument type:",typeof e)},w=function(e,r){return e._lockedByExec&&t("Operation is illegal when statement is locked:",r),e},v=function i(o,a,l,c){w(b(o),"bind()"),i._||(i._tooBigInt=e=>t("BigInt value is too big to store without precision loss:",e),i._={string:function(e,t,n,i){const[o,a]=s.allocCString(n,!0);return(i?r.sqlite3_bind_blob:r.sqlite3_bind_text)(e.pointer,t,o,a,r.SQLITE_WASM_DEALLOC)}}),y(c),a=function(e,s){const i="number"==typeof s?s:r.sqlite3_bind_parameter_index(e.pointer,s);return 0!==i&&n.isInt32(i)?(i<1||i>e.parameterCount)&&t("Bind index",s,"is out of range."):t("Invalid bind() parameter name: "+s),i}(o,a);let _=0;switch(null==c?f.null:l){case f.null:_=r.sqlite3_bind_null(o.pointer,a);break;case f.string:_=i._.string(o,a,c,!1);break;case f.number:{let e;n.isInt32(c)?e=r.sqlite3_bind_int:"bigint"==typeof c?n.bigIntFits64(c)?s.bigIntEnabled?e=r.sqlite3_bind_int64:n.bigIntFitsDouble(c)?(c=Number(c),e=r.sqlite3_bind_double):i._tooBigInt(c):i._tooBigInt(c):(c=Number(c),e=s.bigIntEnabled&&Number.isInteger(c)?r.sqlite3_bind_int64:r.sqlite3_bind_double),_=e(o.pointer,a,c);break}case f.boolean:_=r.sqlite3_bind_int(o.pointer,a,c?1:0);break;case f.blob:{if("string"==typeof c){_=i._.string(o,a,c,!0);break}c instanceof ArrayBuffer?c=new Uint8Array(c):n.isBindableTypedArray(c)||t("Binding a value as a blob requires","that it be a string, Uint8Array, Int8Array, or ArrayBuffer.");const e=s.alloc(c.byteLength||1);s.heap8().set(c.byteLength?c:[0],e),_=r.sqlite3_bind_blob(o.pointer,a,e,c.byteLength,r.SQLITE_WASM_DEALLOC);break}default:e.config.warn("Unsupported bind() argument type:",c),t("Unsupported bind() argument type: "+typeof c)}return _&&d.checkRc(o.db.pointer,_),o._mayGet=!1,o};p.prototype={finalize:function(){if(this.pointer){w(this,"finalize()");const e=r.sqlite3_finalize(this.pointer);return delete o.get(this.db)[this.pointer],i.delete(this),delete this._mayGet,delete this.parameterCount,delete this._lockedByExec,delete this.db,e}},clearBindings:function(){return w(b(this),"clearBindings()"),r.sqlite3_clear_bindings(this.pointer),this._mayGet=!1,this},reset:function(e){w(this,"reset()"),e&&this.clearBindings();const t=r.sqlite3_reset(b(this).pointer);return this._mayGet=!1,l(this.db,t),this},bind:function(){let e,r;switch(b(this),arguments.length){case 1:e=1,r=arguments[0];break;case 2:e=arguments[0],r=arguments[1];break;default:t("Invalid bind() arguments.")}return void 0===r?this:(this.parameterCount||t("This statement has no bindable parameters."),this._mayGet=!1,null===r?v(this,e,f.null,r):Array.isArray(r)?(1!==arguments.length&&t("When binding an array, an index argument is not permitted."),r.forEach((e,t)=>v(this,t+1,y(e),e)),this):(r instanceof ArrayBuffer&&(r=new Uint8Array(r)),"object"!=typeof r||n.isBindableTypedArray(r)?v(this,e,y(r),r):(1!==arguments.length&&t("When binding an object, an index argument is not permitted."),Object.keys(r).forEach(e=>v(this,e,y(r[e]),r[e])),this)))},bindAsBlob:function(e,r){b(this),1===arguments.length&&(r=e,e=1);const s=y(r);return f.string!==s&&f.blob!==s&&f.null!==s&&t("Invalid value type for bindAsBlob()"),v(this,e,f.blob,r)},step:function(){w(this,"step()");const t=r.sqlite3_step(b(this).pointer);switch(t){case r.SQLITE_DONE:return this._mayGet=!1;case r.SQLITE_ROW:return this._mayGet=!0;default:this._mayGet=!1,e.config.warn("sqlite3_step() rc=",t,r.sqlite3_js_rc_str(t),"SQL =",r.sqlite3_sql(this.pointer)),d.checkRc(this.db.pointer,t)}},stepReset:function(){return this.step(),this.reset()},stepFinalize:function(){try{const e=this.step();return this.reset(),e}finally{try{this.finalize()}catch(e){}}},get:function(e,i){if(b(this)._mayGet||t("Stmt.step() has not (recently) returned true."),Array.isArray(e)){let t=0;const r=this.columnCount;for(;t<r;)e[t]=this.get(t++);return e}if(e&&"object"==typeof e){let t=0;const s=this.columnCount;for(;t<s;)e[r.sqlite3_column_name(this.pointer,t)]=this.get(t++);return e}switch(m(this,e),void 0===i?r.sqlite3_column_type(this.pointer,e):i){case r.SQLITE_NULL:return null;case r.SQLITE_INTEGER:if(s.bigIntEnabled){const t=r.sqlite3_column_int64(this.pointer,e);return t>=Number.MIN_SAFE_INTEGER&&t<=Number.MAX_SAFE_INTEGER?Number(t).valueOf():t}{const s=r.sqlite3_column_double(this.pointer,e);return(s>Number.MAX_SAFE_INTEGER||s<Number.MIN_SAFE_INTEGER)&&t("Integer is out of range for JS integer range: "+s),n.isInt32(s)?0|s:s}case r.SQLITE_FLOAT:return r.sqlite3_column_double(this.pointer,e);case r.SQLITE_TEXT:return r.sqlite3_column_text(this.pointer,e);case r.SQLITE_BLOB:{const t=r.sqlite3_column_bytes(this.pointer,e),n=r.sqlite3_column_blob(this.pointer,e),i=new Uint8Array(t);return t&&i.set(s.heap8u().slice(n,n+t),0),t&&this.db._blobXfer instanceof Array&&this.db._blobXfer.push(i.buffer),i}default:t("Don't know how to translate","type of result column #"+e+".")}t("Not reached.")},getInt:function(e){return this.get(e,r.SQLITE_INTEGER)},getFloat:function(e){return this.get(e,r.SQLITE_FLOAT)},getString:function(e){return this.get(e,r.SQLITE_TEXT)},getBlob:function(e){return this.get(e,r.SQLITE_BLOB)},getJSON:function(e){const t=this.get(e,r.SQLITE_STRING);return null===t?t:JSON.parse(t)},getColumnName:function(e){return r.sqlite3_column_name(m(b(this),e).pointer,e)},getColumnNames:function(e=[]){m(b(this),0);const t=this.columnCount;for(let s=0;s<t;++s)e.push(r.sqlite3_column_name(this.pointer,s));return e},getParamIndex:function(e){return b(this).parameterCount?r.sqlite3_bind_parameter_index(this.pointer,e):void 0},getParamName:function(e){return b(this).parameterCount?r.sqlite3_bind_parameter_name(this.pointer,e):void 0},isBusy:function(){return 0!==r.sqlite3_stmt_busy(b(this))},isReadOnly:function(){return 0!==r.sqlite3_stmt_readonly(b(this))}};{const e={enumerable:!0,get:function(){return i.get(this)},set:()=>t("The pointer property is read-only.")};Object.defineProperty(p.prototype,"pointer",e),Object.defineProperty(d.prototype,"pointer",e)}if(Object.defineProperty(p.prototype,"columnCount",{enumerable:!1,get:function(){return r.sqlite3_column_count(this.pointer)},set:()=>t("The columnCount property is read-only.")}),e.oo1={DB:d,Stmt:p},n.isUIThread()){e.oo1.JsStorageDb=function(e="session"){const r=u.normalizeArgs(...arguments);"session"!==(e=r.filename)&&"local"!==e&&t("JsStorageDb db name must be one of 'session' or 'local'."),r.vfs="kvvfs",u.call(this,r)};const s=e.oo1.JsStorageDb;s.prototype=Object.create(d.prototype),s.clearStorage=r.sqlite3_js_kvvfs_clear,s.prototype.clearStorage=function(){return s.clearStorage(h(this).filename)},s.storageSize=r.sqlite3_js_kvvfs_size,s.prototype.storageSize=function(){return s.storageSize(h(this).filename)}}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(e){const t=e.util;e.initWorker1API=function(){const e=(...e)=>{throw new Error(e.join(" "))};globalThis.WorkerGlobalScope instanceof Function||e("initWorker1API() must be run from a Worker thread.");const r=this.sqlite3||e("Missing this.sqlite3 object."),s=r.oo1.DB,n=function(e){let t=i.idMap.get(e);return t||(t="db#"+ ++i.idSeq+"@"+e.pointer,i.idMap.set(e,t),t)},i={dbList:[],idSeq:0,idMap:new WeakMap,xfer:[],open:function(e){const t=new s(e);return this.dbs[n(t)]=t,this.dbList.indexOf(t)<0&&this.dbList.push(t),t},close:function(e,r){if(e){delete this.dbs[n(e)];const s=e.filename,i=t.sqlite3__wasm_db_vfs(e.pointer,0);e.close();const o=this.dbList.indexOf(e);o>=0&&this.dbList.splice(o,1),r&&s&&i&&t.sqlite3__wasm_vfs_unlink(i,s)}},post:function(e,t){t&&t.length?(globalThis.postMessage(e,Array.from(t)),t.length=0):globalThis.postMessage(e)},dbs:Object.create(null),getDb:function(t,r=!0){return this.dbs[t]||(r?e("Unknown (or closed) DB ID:",t):void 0)}},o=function(t,r=!0){const s=i.getDb(t.dbId,!1)||i.dbList[0];return r?function(t=i.dbList[0]){return t&&t.pointer?t:e("DB is not opened.")}(s):s},a={open:function(t){const s=Object.create(null),o=t.args||Object.create(null);o.simulateError&&e("Throwing because of simulateError flag.");const a=Object.create(null);s.vfs=o.vfs,s.filename=o.filename||"";const l=i.open(s);return a.filename=l.filename,a.persistent=!!r.capi.sqlite3_js_db_uses_vfs(l.pointer,"opfs"),a.dbId=n(l),a.vfs=l.dbVfsName(),a},close:function(e){const t=o(e,!1),r={filename:t&&t.filename};if(t){const r=!(!e.args||"object"!=typeof e.args||!e.args.unlink);i.close(t,r)}return r},exec:function(t){const s="string"==typeof t.args?{sql:t.args}:t.args||Object.create(null);"stmt"===s.rowMode?e("Invalid rowMode for 'exec': stmt mode","does not work in the Worker API."):s.sql||e("'exec' requires input SQL.");const n=o(t);(s.callback||Array.isArray(s.resultRows))&&(n._blobXfer=i.xfer);const a=s.callback;let l=0;const c=!!s.columnNames;"string"==typeof a&&(c||(s.columnNames=[]),s.callback=function(e,t){i.post({type:a,columnNames:s.columnNames,rowNumber:++l,row:e},i.xfer)});try{const e=s.countChanges?n.changes(!0,64===s.countChanges):void 0;n.exec(s),void 0!==e&&(s.changeCount=n.changes(!0,64===s.countChanges)-e);const t=s.lastInsertRowId?r.capi.sqlite3_last_insert_rowid(n):void 0;void 0!==t&&(s.lastInsertRowId=t),s.callback instanceof Function&&(s.callback=a,i.post({type:a,columnNames:s.columnNames,rowNumber:null,row:void 0}))}finally{delete n._blobXfer,s.callback&&(s.callback=a)}return s},"config-get":function(){const e=Object.create(null),t=r.config;return["bigIntEnabled"].forEach(function(r){Object.getOwnPropertyDescriptor(t,r)&&(e[r]=t[r])}),e.version=r.version,e.vfsList=r.capi.sqlite3_js_vfs_list(),e},export:function(e){const t=o(e),s={byteArray:r.capi.sqlite3_js_db_export(t.pointer),filename:t.filename,mimetype:"application/x-sqlite3"};return i.xfer.push(s.byteArray.buffer),s},toss:function(t){e("Testing worker exception")}};globalThis.onmessage=async function(t){let r,s=(t=t.data).dbId,o=t.type;const l=performance.now();try{a.hasOwnProperty(o)&&a[o]instanceof Function?r=await a[o](t):e("Unknown db worker message type:",t.type)}catch(c){o="error",r={operation:t.type,message:c.message,errorClass:c.name,input:t},c.stack&&(r.stack="string"==typeof c.stack?c.stack.split(/\n\s*/):c.stack)}s||(s=r.dbId||i.dbList[0]&&n(i.dbList[0])),i.post({type:o,dbId:s,messageId:t.messageId,workerReceivedTime:l,workerRespondTime:performance.now(),departureTime:t.departureTime,result:r},i.xfer)},globalThis.postMessage({type:"sqlite3-api",result:"worker1-ready"})}.bind({sqlite3:e})}),globalThis.sqlite3ApiBootstrap.initializers.push(function(e){const t=e.wasm,r=e.capi,s=e.util.toss3,n=Object.create(null);e.vfs=n,r.sqlite3_vfs.prototype.registerVfs=function(t=!1){this instanceof e.capi.sqlite3_vfs||s("Expecting a sqlite3_vfs-type argument.");const n=r.sqlite3_vfs_register(this,t?1:0);return n&&s("sqlite3_vfs_register(",this,") failed with rc",n),this.pointer!==r.sqlite3_vfs_find(this.$zName)&&s("BUG: sqlite3_vfs_find(vfs.$zName) failed for just-installed VFS",this),this},n.installVfs=function(e){let r=0;const n=["io","vfs"];for(const s of n){const n=e[s];n&&(++r,n.struct.installMethods(n.methods,!!n.applyArgcCheck),"vfs"===s&&(n.struct.$zName||"string"!=typeof n.name||n.struct.addOnDispose(n.struct.$zName=t.allocCString(n.name)),n.struct.registerVfs(!!n.asDefault)))}return r||s("Misuse: installVfs() options object requires at least","one of:",n),this}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(e){if(!e.wasm.exports.sqlite3_declare_vtab)return;const t=e.wasm,r=e.capi,s=e.util.toss3,n=Object.create(null);e.vtab=n;const i=r.sqlite3_index_info;i.prototype.nthConstraint=function(e,t=!1){if(e<0||e>=this.$nConstraint)return!1;const r=this.$aConstraint+i.sqlite3_index_constraint.structInfo.sizeof*e;return t?r:new i.sqlite3_index_constraint(r)},i.prototype.nthConstraintUsage=function(e,t=!1){if(e<0||e>=this.$nConstraint)return!1;const r=this.$aConstraintUsage+i.sqlite3_index_constraint_usage.structInfo.sizeof*e;return t?r:new i.sqlite3_index_constraint_usage(r)},i.prototype.nthOrderBy=function(e,t=!1){if(e<0||e>=this.$nOrderBy)return!1;const r=this.$aOrderBy+i.sqlite3_index_orderby.structInfo.sizeof*e;return t?r:new i.sqlite3_index_orderby(r)};const o=function(r,s){const n=function(r,s){return function(n,i=!1){if(0===arguments.length&&(n=new s),n instanceof s)return this.set(n.pointer,n),n;t.isPtr(n)||e.SQLite3Error.toss("Invalid argument to",r+"()");let o=this.get(n);return i&&this.delete(n),o}.bind(new Map)}(r,s);return Object.assign(Object.create(null),{StructType:s,create:e=>{const r=n();return t.pokePtr(e,r.pointer),r},get:e=>n(e),unget:e=>n(e,!0),dispose:e=>{const t=n(e,!0);t&&t.dispose()}})};n.xVtab=o("xVtab",r.sqlite3_vtab),n.xCursor=o("xCursor",r.sqlite3_vtab_cursor),n.xIndexInfo=e=>new r.sqlite3_index_info(e),n.xError=function t(s,n,i){if(t.errorReporter instanceof Function)try{t.errorReporter("sqlite3_module::"+s+"(): "+n.message)}catch(a){}let o;return n instanceof e.WasmAllocError?o=r.SQLITE_NOMEM:arguments.length>2?o=i:n instanceof e.SQLite3Error&&(o=n.resultCode),o||r.SQLITE_ERROR},n.xError.errorReporter=console.error.bind(console),n.xRowid=(e,r)=>t.poke(e,r,"i64"),n.setupModule=function(i){let o=!1;const a=this instanceof r.sqlite3_module?this:i.struct||(o=new r.sqlite3_module);try{const r=i.methods||s("Missing 'methods' object.");for(const e of Object.entries({xConnect:"xCreate",xDisconnect:"xDestroy"})){const t=e[0],s=e[1];!0===r[t]?r[t]=r[s]:!0===r[s]&&(r[s]=r[t])}if(i.catchExceptions){const s=function(r,s){return["xConnect","xCreate"].indexOf(r)>=0?function(i,o,a,l,c,_){try{return s(...arguments)||0}catch(u){return u instanceof e.WasmAllocError||(t.dealloc(t.peekPtr(_)),t.pokePtr(_,t.allocCString(u.message))),n.xError(r,u)}}:function(...e){try{return s(...e)||0}catch(t){return n.xError(r,t)}}},i=["xCreate","xConnect","xBestIndex","xDisconnect","xDestroy","xOpen","xClose","xFilter","xNext","xEof","xColumn","xRowid","xUpdate","xBegin","xSync","xCommit","xRollback","xFindFunction","xRename","xSavepoint","xRelease","xRollbackTo","xShadowName"],o=Object.create(null);for(const e of i){const t=r[e];t instanceof Function&&("xConnect"===e&&r.xCreate===t?o[e]=r.xCreate:"xCreate"===e&&r.xConnect===t?o[e]=r.xConnect:o[e]=s(e,t))}a.installMethods(o,!1)}else a.installMethods(r,!!i.applyArgcCheck);if(0===a.$iVersion){let e;e="number"==typeof i.iVersion?i.iVersion:a.$xShadowName?3:a.$xSavePoint||a.$xRelease||a.$xRollbackTo?2:1,a.$iVersion=e}}catch(l){throw o&&o.dispose(),l}return a},r.sqlite3_module.prototype.setupModule=function(e){return n.setupModule.call(this,e)}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(e){const t=function t(r){var s;if(!globalThis.SharedArrayBuffer||!globalThis.Atomics)return Promise.reject(new Error("Cannot install OPFS: Missing SharedArrayBuffer and/or Atomics. The server must emit the COOP/COEP response headers to enable those. See https://sqlite.org/wasm/doc/trunk/persistence.md#coop-coep"));if("undefined"==typeof WorkerGlobalScope)return Promise.reject(new Error("The OPFS sqlite3_vfs cannot run in the main thread because it requires Atomics.wait()."));if(!(globalThis.FileSystemHandle&&globalThis.FileSystemDirectoryHandle&&globalThis.FileSystemFileHandle&&globalThis.FileSystemFileHandle.prototype.createSyncAccessHandle&&(null==(s=null==navigator?void 0:navigator.storage)?void 0:s.getDirectory)))return Promise.reject(new Error("Missing required OPFS APIs."));r&&"object"==typeof r||(r=Object.create(null));const n=new URL(globalThis.location.href).searchParams;if(n.has("opfs-disable"))return Promise.resolve(e);void 0===r.verbose&&(r.verbose=n.has("opfs-verbose")?+n.get("opfs-verbose")||2:1),void 0===r.sanityChecks&&(r.sanityChecks=n.has("opfs-sanity-check")),void 0===r.proxyUri&&(r.proxyUri=t.defaultProxyUri),"function"==typeof r.proxyUri&&(r.proxyUri=r.proxyUri());const i=new Promise(function(t,s){const n=[e.config.error,e.config.warn,e.config.log],i=(e,...t)=>{r.verbose>e&&n[e]("OPFS syncer:",...t)},o=(...e)=>i(2,...e),a=(...e)=>i(1,...e),l=(...e)=>i(0,...e),c=e.util.toss,_=e.capi,u=e.util,d=e.wasm,f=_.sqlite3_vfs,p=_.sqlite3_file,h=_.sqlite3_io_methods,m=Object.create(null);m.metrics={dump:function(){let t,r=0,s=0,n=0;for(t in S.opIds){const e=A[t];r+=e.count,s+=e.time,n+=e.wait,e.avgTime=e.count&&e.time?e.time/e.count:0,e.avgWait=e.count&&e.wait?e.wait/e.count:0}e.config.log(globalThis.location.href,"metrics for",globalThis.location.href,":",A,"\nTotal of",r,"op(s) for",s,"ms (incl. "+n+" ms of waiting on the async side)"),e.config.log("Serialization metrics:",A.s11n),v.postMessage({type:"opfs-async-metrics"})},reset:function(){let e;const t=e=>e.count=e.time=e.wait=0;for(e in S.opIds)t(A[e]=Object.create(null));let r=A.s11n=Object.create(null);r=r.serialize=Object.create(null),r.count=r.time=0,r=A.s11n.deserialize=Object.create(null),r.count=r.time=0}};const g=new h,q=(new f).addOnDispose(()=>g.dispose());let b;const y=e=>(b=!0,q.dispose(),s(e)),w=()=>(b=!1,t(e)),v=new Worker(new URL(""+new URL("sqlite3-opfs-async-proxy-BZUi0lLj.js",import.meta.url).href,import.meta.url));setTimeout(()=>{void 0===b&&y(new Error("Timeout while waiting for OPFS async proxy worker."))},4e3),v._originalOnError=v.onerror,v.onerror=function(e){l("Error initializing OPFS asyncer:",e),y(new Error("Loading OPFS async Worker failed for unknown reasons."))};const E=_.sqlite3_vfs_find(null),x=E?new f(E):null;g.$iVersion=1,q.$iVersion=2,q.$szOsFile=_.sqlite3_file.structInfo.sizeof,q.$mxPathname=1024,q.$zName=d.allocCString("opfs"),q.$xDlOpen=q.$xDlError=q.$xDlSym=q.$xDlClose=null,q.addOnDispose("$zName",q.$zName,"cleanup default VFS wrapper",()=>x?x.dispose():null);const S=Object.create(null);S.verbose=r.verbose,S.littleEndian=(()=>{const e=new ArrayBuffer(2);return new DataView(e).setInt16(0,256,!0),256===new Int16Array(e)[0]})(),S.asyncIdleWaitTime=150,S.asyncS11nExceptions=1,S.fileBufferSize=65536,S.sabS11nOffset=S.fileBufferSize,S.sabS11nSize=2*q.$mxPathname,S.sabIO=new SharedArrayBuffer(S.fileBufferSize+S.sabS11nSize),S.opIds=Object.create(null);const A=Object.create(null);{let e=0;S.opIds.whichOp=e++,S.opIds.rc=e++,S.opIds.xAccess=e++,S.opIds.xClose=e++,S.opIds.xDelete=e++,S.opIds.xDeleteNoWait=e++,S.opIds.xFileSize=e++,S.opIds.xLock=e++,S.opIds.xOpen=e++,S.opIds.xRead=e++,S.opIds.xSleep=e++,S.opIds.xSync=e++,S.opIds.xTruncate=e++,S.opIds.xUnlock=e++,S.opIds.xWrite=e++,S.opIds.mkdir=e++,S.opIds["opfs-async-metrics"]=e++,S.opIds["opfs-async-shutdown"]=e++,S.opIds.retry=e++,S.sabOP=new SharedArrayBuffer(4*e),m.metrics.reset()}S.sq3Codes=Object.create(null),["SQLITE_ACCESS_EXISTS","SQLITE_ACCESS_READWRITE","SQLITE_BUSY","SQLITE_CANTOPEN","SQLITE_ERROR","SQLITE_IOERR","SQLITE_IOERR_ACCESS","SQLITE_IOERR_CLOSE","SQLITE_IOERR_DELETE","SQLITE_IOERR_FSYNC","SQLITE_IOERR_LOCK","SQLITE_IOERR_READ","SQLITE_IOERR_SHORT_READ","SQLITE_IOERR_TRUNCATE","SQLITE_IOERR_UNLOCK","SQLITE_IOERR_WRITE","SQLITE_LOCK_EXCLUSIVE","SQLITE_LOCK_NONE","SQLITE_LOCK_PENDING","SQLITE_LOCK_RESERVED","SQLITE_LOCK_SHARED","SQLITE_LOCKED","SQLITE_MISUSE","SQLITE_NOTFOUND","SQLITE_OPEN_CREATE","SQLITE_OPEN_DELETEONCLOSE","SQLITE_OPEN_MAIN_DB","SQLITE_OPEN_READONLY"].forEach(e=>{void 0===(S.sq3Codes[e]=_[e])&&c("Maintenance required: not found:",e)}),S.opfsFlags=Object.assign(Object.create(null),{OPFS_UNLOCK_ASAP:1,OPFS_UNLINK_BEFORE_OPEN:2,defaultUnlockAsap:!1});const I=(e,...t)=>{const r=S.opIds[e]||c("Invalid op ID:",e);S.s11n.serialize(...t),Atomics.store(S.sabOPView,S.opIds.rc,-1),Atomics.store(S.sabOPView,S.opIds.whichOp,r),Atomics.notify(S.sabOPView,S.opIds.whichOp);const s=performance.now();for(;"not-equal"!==Atomics.wait(S.sabOPView,S.opIds.rc,-1););const n=Atomics.load(S.sabOPView,S.opIds.rc);if(A[e].wait+=performance.now()-s,n&&S.asyncS11nExceptions){const t=S.s11n.deserialize();t&&l(e+"() async error:",...t)}return n};m.debug={asyncShutdown:()=>{a("Shutting down OPFS async listener. The OPFS VFS will no longer work."),I("opfs-async-shutdown")},asyncRestart:()=>{a("Attempting to restart OPFS VFS async listener. Might work, might not."),v.postMessage({type:"opfs-async-restart"})}};const k=function e(t=16){e._chars||(e._n=(e._chars="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ012346789").length);const r=[];let s=0;for(;s<t;++s){const t=Math.random()*(64*e._n)%e._n|0;r[s]=e._chars[t]}return r.join("")},T=Object.create(null),F=Object.create(null);F.op=void 0,F.start=void 0;const O=e=>{F.start=performance.now(),F.op=e,++A[e].count},P=()=>A[F.op].time+=performance.now()-F.start,L={xCheckReservedLock:function(e,t){return d.poke(t,0,"i32"),0},xClose:function(e){O("xClose");let t=0;const r=T[e];return r&&(delete T[e],t=I("xClose",e),r.sq3File&&r.sq3File.dispose()),P(),t},xDeviceCharacteristics:function(e){return _.SQLITE_IOCAP_UNDELETABLE_WHEN_OPEN},xFileControl:function(e,t,r){return _.SQLITE_NOTFOUND},xFileSize:function(e,t){O("xFileSize");let r=I("xFileSize",e);if(0==r)try{const e=S.s11n.deserialize()[0];d.poke(t,e,"i64")}catch(s){l("Unexpected error reading xFileSize() result:",s),r=S.sq3Codes.SQLITE_IOERR}return P(),r},xLock:function(e,t){O("xLock");const r=T[e];let s=0;return r.lockType?r.lockType=t:(s=I("xLock",e,t),0===s&&(r.lockType=t)),P(),s},xRead:function(e,t,r,s){O("xRead");const n=T[e];let i;try{i=I("xRead",e,r,Number(s)),0!==i&&_.SQLITE_IOERR_SHORT_READ!==i||d.heap8u().set(n.sabView.subarray(0,r),t)}catch(o){l("xRead(",arguments,") failed:",o,n),i=_.SQLITE_IOERR_READ}return P(),i},xSync:function(e,t){O("xSync"),++A.xSync.count;const r=I("xSync",e,t);return P(),r},xTruncate:function(e,t){O("xTruncate");const r=I("xTruncate",e,Number(t));return P(),r},xUnlock:function(e,t){O("xUnlock");const r=T[e];let s=0;return _.SQLITE_LOCK_NONE===t&&r.lockType&&(s=I("xUnlock",e,t)),0===s&&(r.lockType=t),P(),s},xWrite:function(e,t,r,s){O("xWrite");const n=T[e];let i;try{n.sabView.set(d.heap8u().subarray(t,t+r)),i=I("xWrite",e,r,Number(s))}catch(o){l("xWrite(",arguments,") failed:",o,n),i=_.SQLITE_IOERR_WRITE}return P(),i}},C={xAccess:function(e,t,r,s){O("xAccess");const n=I("xAccess",d.cstrToJs(t));return d.poke(s,n?0:1,"i32"),P(),0},xCurrentTime:function(e,t){return d.poke(t,2440587.5+(new Date).getTime()/864e5,"double"),0},xCurrentTimeInt64:function(e,t){return d.poke(t,21086676e7+(new Date).getTime(),"i64"),0},xDelete:function(e,t,r){O("xDelete");const s=I("xDelete",d.cstrToJs(t),r,!1);return P(),s},xFullPathname:function(e,t,r,s){return d.cstrncpy(s,t,r)<r?0:_.SQLITE_CANTOPEN},xGetLastError:function(e,t,r){return a("OPFS xGetLastError() has nothing sensible to return."),0},xOpen:function(t,r,s,n,i){O("xOpen");let o=0;0===r?r=k():d.isPtr(r)&&(_.sqlite3_uri_boolean(r,"opfs-unlock-asap",0)&&(o|=S.opfsFlags.OPFS_UNLOCK_ASAP),_.sqlite3_uri_boolean(r,"delete-before-open",0)&&(o|=S.opfsFlags.OPFS_UNLINK_BEFORE_OPEN),r=d.cstrToJs(r));const a=Object.create(null);a.fid=s,a.filename=r,a.sab=new SharedArrayBuffer(S.fileBufferSize),a.flags=n,a.readOnly=!(e.SQLITE_OPEN_CREATE&n||!(n&_.SQLITE_OPEN_READONLY));const l=I("xOpen",s,r,n,o);return l||(a.readOnly&&d.poke(i,_.SQLITE_OPEN_READONLY,"i32"),T[s]=a,a.sabView=S.sabFileBufView,a.sq3File=new p(s),a.sq3File.$pMethods=g.pointer,a.lockType=_.SQLITE_LOCK_NONE),P(),l}};if(x&&(q.$xRandomness=x.$xRandomness,q.$xSleep=x.$xSleep),q.$xRandomness||(C.xRandomness=function(e,t,r){const s=d.heap8u();let n=0;for(;n<t;++n)s[r+n]=255e3*Math.random()&255;return n}),q.$xSleep||(C.xSleep=function(e,t){return Atomics.wait(S.sabOPView,S.opIds.xSleep,0,t),0}),m.getResolvedPath=function(e,t){const r=new URL(e,"file://irrelevant").pathname;return t?r.split("/").filter(e=>!!e):r},m.getDirForFilename=async function(e,t=!1){const r=m.getResolvedPath(e,!0),s=r.pop();let n=m.rootDirectory;for(const i of r)i&&(n=await n.getDirectoryHandle(i,{create:!!t}));return[n,s]},m.mkdir=async function(e){try{return await m.getDirForFilename(e+"/filepart",!0),!0}catch(t){return!1}},m.entryExists=async function(e){try{const[t,r]=await m.getDirForFilename(e);return await t.getFileHandle(r),!0}catch(t){return!1}},m.randomFilename=k,m.treeList=async function(){const e=Object.create(null);return await async function e(t,r){r.name=t.name,r.dirs=[],r.files=[];for await(const s of t.values())if("directory"===s.kind){const t=Object.create(null);r.dirs.push(t),await e(s,t)}else r.files.push(s.name)}(m.rootDirectory,e),e},m.rmfr=async function(){const e=m.rootDirectory,t={recurse:!0};for await(const r of e.values())e.removeEntry(r.name,t)},m.unlink=async function(e,t=!1,r=!1){try{const[r,s]=await m.getDirForFilename(e,!1);return await r.removeEntry(s,{recursive:t}),!0}catch(s){if(r)throw new Error("unlink(",arguments[0],") failed: "+s.message,{cause:s});return!1}},m.traverse=async function(e){const t={recursive:!0,directory:m.rootDirectory};"function"==typeof e&&(e={callback:e}),async function t(r,s){for await(const n of r.values()){if(!1===e.callback(n,r,s))return!1;if(e.recursive&&"directory"===n.kind&&!1===await t(n,s+1))break}}((e=Object.assign(t,e||{})).directory,0)},m.importDb=async function(e,t){if(t instanceof Function)return async function(e,t){const[r,s]=await m.getDirForFilename(e,!0),n=await r.getFileHandle(s,{create:!0});let i,o=await n.createSyncAccessHandle(),a=0,l=!1;try{for(o.truncate(0);void 0!==(i=await t());)i instanceof ArrayBuffer&&(i=new Uint8Array(i)),0===a&&i.byteLength>=15&&(u.affirmDbHeader(i),l=!0),o.write(i,{at:a}),a+=i.byteLength;if((a<512||0!=a%512)&&c("Input size",a,"is not correct for an SQLite database."),!l){const e=new Uint8Array(20);o.read(e,{at:0}),u.affirmDbHeader(e)}return o.write(new Uint8Array([1,1]),{at:18}),a}catch(_){throw await o.close(),o=void 0,await r.removeEntry(s).catch(()=>{}),_}finally{o&&await o.close()}}(e,t);t instanceof ArrayBuffer&&(t=new Uint8Array(t)),u.affirmIsDb(t);const r=t.byteLength,[s,n]=await m.getDirForFilename(e,!0);let i,o=0;try{const e=await s.getFileHandle(n,{create:!0});return i=await e.createSyncAccessHandle(),i.truncate(0),o=i.write(t,{at:0}),o!=r&&c("Expected to write "+r+" bytes but wrote "+o+"."),i.write(new Uint8Array([1,1]),{at:18}),o}catch(a){throw i&&(await i.close(),i=void 0),await s.removeEntry(n).catch(()=>{}),a}finally{i&&await i.close()}},e.oo1){const t=function(...t){const r=e.oo1.DB.dbCtorHelper.normalizeArgs(...t);r.vfs=q.$zName,e.oo1.DB.dbCtorHelper.call(this,r)};t.prototype=Object.create(e.oo1.DB.prototype),e.oo1.OpfsDb=t,t.importDb=m.importDb,e.oo1.DB.dbCtorHelper.setVfsPostOpenCallback(q.pointer,function(e,t){t.capi.sqlite3_busy_timeout(e,1e4)})}v.onmessage=function({data:t}){switch(t.type){case"opfs-unavailable":y(new Error(t.payload.join(" ")));break;case"opfs-async-loaded":v.postMessage({type:"opfs-async-init",args:S});break;case"opfs-async-inited":if(!0===b)break;try{e.vfs.installVfs({io:{struct:g,methods:L},vfs:{struct:q,methods:C}}),S.sabOPView=new Int32Array(S.sabOP),S.sabFileBufView=new Uint8Array(S.sabIO,0,S.fileBufferSize),S.sabS11nView=new Uint8Array(S.sabIO,S.sabS11nOffset,S.sabS11nSize),(()=>{if(S.s11n)return S.s11n;const e=new TextDecoder,t=new TextEncoder("utf-8"),r=new Uint8Array(S.sabIO,S.sabS11nOffset,S.sabS11nSize),s=new DataView(S.sabIO,S.sabS11nOffset,S.sabS11nSize);S.s11n=Object.create(null);const n=Object.create(null);n.number={id:1,size:8,getter:"getFloat64",setter:"setFloat64"},n.bigint={id:2,size:8,getter:"getBigInt64",setter:"setBigInt64"},n.boolean={id:3,size:4,getter:"getInt32",setter:"setInt32"},n.string={id:4};const i=e=>n[typeof e]||c("Maintenance required: this value type cannot be serialized.",e),o=e=>{switch(e){case n.number.id:return n.number;case n.bigint.id:return n.bigint;case n.boolean.id:return n.boolean;case n.string.id:return n.string;default:c("Invalid type ID:",e)}};S.s11n.deserialize=function(t=!1){++A.s11n.deserialize.count;const n=performance.now(),i=r[0],a=i?[]:null;if(i){const t=[];let n,l,c,_=1;for(n=0;n<i;++n,++_)t.push(o(r[_]));for(n=0;n<i;++n){const i=t[n];i.getter?(c=s[i.getter](_,S.littleEndian),_+=i.size):(l=s.getInt32(_,S.littleEndian),_+=4,c=e.decode(r.slice(_,_+l)),_+=l),a.push(c)}}return t&&(r[0]=0),A.s11n.deserialize.time+=performance.now()-n,a},S.s11n.serialize=function(...e){const n=performance.now();if(++A.s11n.serialize.count,e.length){const n=[];let o=0,a=1;for(r[0]=255&e.length;o<e.length;++o,++a)n.push(i(e[o])),r[a]=n[o].id;for(o=0;o<e.length;++o){const i=n[o];if(i.setter)s[i.setter](a,e[o],S.littleEndian),a+=i.size;else{const n=t.encode(e[o]);s.setInt32(a,n.byteLength,S.littleEndian),a+=4,r.set(n,a),a+=n.byteLength}}}else r[0]=0;A.s11n.serialize.time+=performance.now()-n},S.s11n})(),r.sanityChecks&&(a("Running sanity checks because of opfs-sanity-check URL arg..."),function(){const e=d.scopedAllocPush(),t=new p;try{const e=t.pointer,r=_.SQLITE_OPEN_CREATE|_.SQLITE_OPEN_READWRITE|_.SQLITE_OPEN_MAIN_DB,s=d.scopedAlloc(8),n="/sanity/check/file"+k(8),i=d.scopedAllocCString(n);let u;if(S.s11n.serialize("This is ä string."),u=S.s11n.deserialize(),o("deserialize() says:",u),"This is ä string."!==u[0]&&c("String d13n error."),C.xAccess(q.pointer,i,0,s),u=d.peek(s,"i32"),o("xAccess(",n,") exists ?=",u),u=C.xOpen(q.pointer,i,e,r,s),o("open rc =",u,"state.sabOPView[xOpen] =",S.sabOPView[S.opIds.xOpen]),0!==u)return void l("open failed with code",u);C.xAccess(q.pointer,i,0,s),u=d.peek(s,"i32"),u||c("xAccess() failed to detect file."),u=L.xSync(t.pointer,0),u&&c("sync failed w/ rc",u),u=L.xTruncate(t.pointer,1024),u&&c("truncate failed w/ rc",u),d.poke(s,0,"i64"),u=L.xFileSize(t.pointer,s),u&&c("xFileSize failed w/ rc",u),o("xFileSize says:",d.peek(s,"i64")),u=L.xWrite(t.pointer,i,10,1),u&&c("xWrite() failed!");const f=d.scopedAlloc(16);u=L.xRead(t.pointer,f,6,2),d.poke(f+6,0);let p=d.cstrToJs(f);o("xRead() got:",p),"sanity"!==p&&c("Unexpected xRead() value."),C.xSleep&&(o("xSleep()ing before close()ing..."),C.xSleep(q.pointer,2e3),o("waking up from xSleep()")),u=L.xClose(e),o("xClose rc =",u,"sabOPView =",S.sabOPView),o("Deleting file:",n),C.xDelete(q.pointer,i,4660),C.xAccess(q.pointer,i,0,s),u=d.peek(s,"i32"),u&&c("Expecting 0 from xAccess(",n,") after xDelete()."),a("End of OPFS sanity checks.")}finally{t.dispose(),d.scopedAllocPop(e)}}()),globalThis.FileSystemHandle&&globalThis.FileSystemDirectoryHandle&&globalThis.FileSystemFileHandle&&globalThis.FileSystemFileHandle.prototype.createSyncAccessHandle&&(null==(s=null==navigator?void 0:navigator.storage)?void 0:s.getDirectory)?navigator.storage.getDirectory().then(t=>{v.onerror=v._originalOnError,delete v._originalOnError,e.opfs=m,m.rootDirectory=t,o("End of OPFS sqlite3_vfs setup.",q),w()}).catch(y):w()}catch(n){l(n),y(n)}break;default:{const e="Unexpected message from the OPFS async worker: "+JSON.stringify(t);l(e),y(new Error(e));break}}var s}});return i};t.defaultProxyUri="sqlite3-opfs-async-proxy.js",globalThis.sqlite3ApiBootstrap.initializersAsync.push(async e=>{try{let r=t.defaultProxyUri;return e.scriptInfo.sqlite3Dir&&(t.defaultProxyUri=e.scriptInfo.sqlite3Dir+r),t().catch(t=>{e.config.warn("Ignoring inability to install OPFS sqlite3_vfs:",t.message)})}catch(r){return e.config.error("installOpfsVfs() exception:",r),Promise.reject(r)}})}),globalThis.sqlite3ApiBootstrap.initializers.push(function(e){var t,s,l,c,_,u,d,f,p,h,m,g,q,b;const y=e.util.toss,w=e.util.toss3,v=Object.create(null),E=e.capi,x=e.util,S=e.wasm,A=512,I=4096,k=E.SQLITE_OPEN_MAIN_DB|E.SQLITE_OPEN_MAIN_JOURNAL|E.SQLITE_OPEN_SUPER_JOURNAL|E.SQLITE_OPEN_WAL,T=E.SQLITE_OPEN_MEMORY,F=".opaque",O=()=>Math.random().toString(36).slice(2),P=new TextDecoder,L=new TextEncoder,C=Object.assign(Object.create(null),{name:"opfs-sahpool",directory:void 0,initialCapacity:6,clearOnInit:!1,verbosity:2,forceReinitIfPreviouslyFailed:!1}),N=[e.config.error,e.config.warn,e.config.log];e.config.log;const D=e.config.warn;e.config.error;const j=new Map,R=e=>j.get(e),M=(e,t)=>{t?j.set(e,t):j.delete(e)},z=new Map,B=e=>z.get(e),U=(e,t)=>{t?z.set(e,t):z.delete(e)},Q={xCheckReservedLock:function(e,t){const r=B(e);return r.log("xCheckReservedLock"),r.storeErr(),S.poke32(t,1),0},xClose:function(e){const t=B(e);t.storeErr();const r=t.getOFileForS3File(e);if(r)try{t.log(`xClose ${r.path}`),t.mapS3FileToOFile(e,!1),r.sah.flush(),r.flags&E.SQLITE_OPEN_DELETEONCLOSE&&t.deletePath(r.path)}catch(s){return t.storeErr(s,E.SQLITE_IOERR)}return 0},xDeviceCharacteristics:function(e){return E.SQLITE_IOCAP_UNDELETABLE_WHEN_OPEN},xFileControl:function(e,t,r){return E.SQLITE_NOTFOUND},xFileSize:function(e,t){const r=B(e);r.log("xFileSize");const s=r.getOFileForS3File(e).sah.getSize()-I;return S.poke64(t,BigInt(s)),0},xLock:function(e,t){const r=B(e);return r.log(`xLock ${t}`),r.storeErr(),r.getOFileForS3File(e).lockType=t,0},xRead:function(e,t,r,s){const n=B(e);n.storeErr();const i=n.getOFileForS3File(e);n.log(`xRead ${i.path} ${r} @ ${s}`);try{const e=i.sah.read(S.heap8u().subarray(t,t+r),{at:I+Number(s)});return e<r?(S.heap8u().fill(0,t+e,t+r),E.SQLITE_IOERR_SHORT_READ):0}catch(o){return n.storeErr(o,E.SQLITE_IOERR)}},xSectorSize:function(e){return 4096},xSync:function(e,t){const r=B(e);r.log(`xSync ${t}`),r.storeErr();const s=r.getOFileForS3File(e);try{return s.sah.flush(),0}catch(n){return r.storeErr(n,E.SQLITE_IOERR)}},xTruncate:function(e,t){const r=B(e);r.log(`xTruncate ${t}`),r.storeErr();const s=r.getOFileForS3File(e);try{return s.sah.truncate(I+Number(t)),0}catch(n){return r.storeErr(n,E.SQLITE_IOERR)}},xUnlock:function(e,t){const r=B(e);return r.log("xUnlock"),r.getOFileForS3File(e).lockType=t,0},xWrite:function(e,t,r,s){const n=B(e);n.storeErr();const i=n.getOFileForS3File(e);n.log(`xWrite ${i.path} ${r} ${s}`);try{return r===i.sah.write(S.heap8u().subarray(t,t+r),{at:I+Number(s)})?0:y("Unknown write() failure.")}catch(o){return n.storeErr(o,E.SQLITE_IOERR)}}},W=new E.sqlite3_io_methods;W.$iVersion=1,e.vfs.installVfs({io:{struct:W,methods:Q}});const H={xAccess:function(e,t,r,s){const n=R(e);n.storeErr();try{const e=n.getPath(t);S.poke32(s,n.hasFilename(e)?1:0)}catch(i){S.poke32(s,0)}return 0},xCurrentTime:function(e,t){return S.poke(t,2440587.5+(new Date).getTime()/864e5,"double"),0},xCurrentTimeInt64:function(e,t){return S.poke(t,21086676e7+(new Date).getTime(),"i64"),0},xDelete:function(e,t,r){const s=R(e);s.log(`xDelete ${S.cstrToJs(t)}`),s.storeErr();try{return s.deletePath(s.getPath(t)),0}catch(n){return s.storeErr(n),E.SQLITE_IOERR_DELETE}},xFullPathname:function(e,t,r,s){return S.cstrncpy(s,t,r)<r?0:E.SQLITE_CANTOPEN},xGetLastError:function(e,t,r){const s=R(e),n=s.popErr();if(s.log(`xGetLastError ${t} e =`,n),n){const e=S.scopedAllocPush();try{const[e,s]=S.scopedAllocCString(n.message,!0);S.cstrncpy(r,e,t),s>t&&S.poke8(r+t-1,0)}catch(i){return E.SQLITE_NOMEM}finally{S.scopedAllocPop(e)}}return n?n.sqlite3Rc||E.SQLITE_IOERR:0},xOpen:function(e,t,r,s,n){const i=R(e);try{s&=~T,i.log(`xOpen ${S.cstrToJs(t)} ${s}`);const e=t&&S.peek8(t)?i.getPath(t):O();let o=i.getSAHForPath(e);!o&&s&E.SQLITE_OPEN_CREATE&&(i.getFileCount()<i.getCapacity()?(o=i.nextAvailableSAH(),i.setAssociatedPath(o,e,s)):y("SAH pool is full. Cannot create file",e)),o||y("file not found:",e);const a={path:e,flags:s,sah:o};i.mapS3FileToOFile(r,a),a.lockType=E.SQLITE_LOCK_NONE;const l=new E.sqlite3_file(r);return l.$pMethods=W.pointer,l.dispose(),S.poke32(n,s),0}catch(o){return i.storeErr(o),E.SQLITE_CANTOPEN}}};class V{constructor(a=Object.create(null)){i(this,g),r(this,"vfsDir"),i(this,t),i(this,s),i(this,l),i(this,c,new Map),i(this,_,new Map),i(this,u,new Set),i(this,d,new Map),i(this,f,new Uint8Array(516)),i(this,p),i(this,h),i(this,m),o(this,m,a.verbosity??C.verbosity),this.vfsName=a.name||C.name,o(this,h,function(t){e.capi.sqlite3_vfs_find(t)&&w("VFS name is already registered:",t);const r=new E.sqlite3_vfs,s=E.sqlite3_vfs_find(null),n=s?new E.sqlite3_vfs(s):null;return r.$iVersion=2,r.$szOsFile=E.sqlite3_file.structInfo.sizeof,r.$mxPathname=A,r.addOnDispose(r.$zName=S.allocCString(t),()=>M(r.pointer,0)),n&&(r.$xRandomness=n.$xRandomness,r.$xSleep=n.$xSleep,n.dispose()),r.$xRandomness||H.xRandomness||(H.xRandomness=function(e,t,r){const s=S.heap8u();let n=0;for(;n<t;++n)s[r+n]=255e3*Math.random()&255;return n}),r.$xSleep||H.xSleep||(H.xSleep=(e,t)=>0),e.vfs.installVfs({vfs:{struct:r,methods:H}}),r}(this.vfsName)),M(n(this,h).pointer,this),this.vfsDir=a.directory||"."+this.vfsName,o(this,p,new DataView(n(this,f).buffer,n(this,f).byteOffset)),this.isReady=this.reset(!!(a.clearOnInit??C.clearOnInit)).then(()=>{if(this.$error)throw this.$error;return this.getCapacity()?Promise.resolve(void 0):this.addCapacity(a.initialCapacity||C.initialCapacity)})}log(...e){a(this,g,q).call(this,2,...e)}warn(...e){a(this,g,q).call(this,1,...e)}error(...e){a(this,g,q).call(this,0,...e)}getVfs(){return n(this,h)}getCapacity(){return n(this,c).size}getFileCount(){return n(this,_).size}getFileNames(){const e=[];for(const t of n(this,_).keys())e.push(t);return e}async addCapacity(e){for(let t=0;t<e;++t){const e=O(),t=await n(this,s).getFileHandle(e,{create:!0}),r=await t.createSyncAccessHandle();n(this,c).set(r,e),this.setAssociatedPath(r,"",0)}return this.getCapacity()}async reduceCapacity(e){let t=0;for(const r of Array.from(n(this,u))){if(t===e||this.getFileCount()===this.getCapacity())break;const i=n(this,c).get(r);r.close(),await n(this,s).removeEntry(i),n(this,c).delete(r),n(this,u).delete(r),++t}return t}releaseAccessHandles(){for(const e of n(this,c).keys())e.close();n(this,c).clear(),n(this,_).clear(),n(this,u).clear()}async acquireAccessHandles(e=!1){const t=[];for await(const[r,i]of n(this,s))"file"===i.kind&&t.push([r,i]);return Promise.all(t.map(async([t,r])=>{try{const s=await r.createSyncAccessHandle();if(n(this,c).set(s,t),e)s.truncate(I),this.setAssociatedPath(s,"",0);else{const e=this.getAssociatedPath(s);e?n(this,_).set(e,s):n(this,u).add(s)}}catch(s){throw this.storeErr(s),this.releaseAccessHandles(),s}}))}getAssociatedPath(e){e.read(n(this,f),{at:0});const t=n(this,p).getUint32(512);if(n(this,f)[0]&&(t&E.SQLITE_OPEN_DELETEONCLOSE||0===(t&k)))return D(`Removing file with unexpected flags ${t.toString(16)}`,n(this,f)),this.setAssociatedPath(e,"",0),"";const r=new Uint32Array(2);e.read(r,{at:516});const s=this.computeDigest(n(this,f),t);if(r.every((e,t)=>e===s[t])){const t=n(this,f).findIndex(e=>0===e);return 0===t&&e.truncate(I),t?P.decode(n(this,f).subarray(0,t)):""}return D("Disassociating file with bad digest."),this.setAssociatedPath(e,"",0),""}setAssociatedPath(e,t,r){const s=L.encodeInto(t,n(this,f));A<=s.written+1&&y("Path too long:",t),t&&r&&(r|=T),n(this,f).fill(0,s.written,A),n(this,p).setUint32(512,r);const i=this.computeDigest(n(this,f),r);e.write(n(this,f),{at:0}),e.write(i,{at:516}),e.flush(),t?(n(this,_).set(t,e),n(this,u).delete(e)):(e.truncate(I),n(this,u).add(e))}computeDigest(e,t){if(t&T){let t=3735928559,r=1103547991;for(const s of e)t=Math.imul(t^s,2654435761),r=Math.imul(r^s,104729);return new Uint32Array([t>>>0,r>>>0])}return new Uint32Array([0,0])}async reset(e){await this.isReady;let r,i=await navigator.storage.getDirectory();for(const t of this.vfsDir.split("/"))t&&(r=i,i=await i.getDirectoryHandle(t,{create:!0}));return o(this,t,i),o(this,l,r),o(this,s,await n(this,t).getDirectoryHandle(F,{create:!0})),this.releaseAccessHandles(),this.acquireAccessHandles(e)}getPath(e){return S.isPtr(e)&&(e=S.cstrToJs(e)),(e instanceof URL?e:new URL(e,"file://localhost/")).pathname}deletePath(e){const t=n(this,_).get(e);return t&&(n(this,_).delete(e),this.setAssociatedPath(t,"",0)),!!t}storeErr(e,t){return e&&(e.sqlite3Rc=t||E.SQLITE_IOERR,this.error(e)),this.$error=e,t}popErr(){const e=this.$error;return this.$error=void 0,e}nextAvailableSAH(){const[e]=n(this,u).keys();return e}getOFileForS3File(e){return n(this,d).get(e)}mapS3FileToOFile(e,t){t?(n(this,d).set(e,t),U(e,this)):(n(this,d).delete(e),U(e,!1))}hasFilename(e){return n(this,_).has(e)}getSAHForPath(e){return n(this,_).get(e)}async removeVfs(){if(!n(this,h).pointer||!n(this,s))return!1;E.sqlite3_vfs_unregister(n(this,h).pointer),n(this,h).dispose(),delete v[this.vfsName];try{this.releaseAccessHandles(),await n(this,t).removeEntry(F,{recursive:!0}),o(this,s,void 0),await n(this,l).removeEntry(n(this,t).name,{recursive:!0}),o(this,t,o(this,l,void 0))}catch(r){e.config.error(this.vfsName,"removeVfs() failed with no recovery strategy:",r)}return!0}pauseVfs(){return n(this,d).size>0&&e.SQLite3Error.toss(E.SQLITE_MISUSE,"Cannot pause VFS",this.vfsName,"because it has opened files."),n(this,c).size>0&&(E.sqlite3_vfs_unregister(this.vfsName),this.releaseAccessHandles()),this}isPaused(){return 0===n(this,c).size}async unpauseVfs(){return 0===n(this,c).size?this.acquireAccessHandles(!1).then(()=>E.sqlite3_vfs_register(n(this,h),0),this):this}exportFile(e){const t=n(this,_).get(e)||y("File not found:",e),r=t.getSize()-I,s=new Uint8Array(r>0?r:0);if(r>0){const e=t.read(s,{at:I});e!=r&&y("Expected to read "+r+" bytes but read "+e+".")}return s}async importDbChunked(e,t){const r=n(this,_).get(e)||this.nextAvailableSAH()||y("No available handles to import to.");r.truncate(0);let s,i=0,o=!1;try{for(;void 0!==(s=await t());)s instanceof ArrayBuffer&&(s=new Uint8Array(s)),0===i&&s.byteLength>=15&&(x.affirmDbHeader(s),o=!0),r.write(s,{at:I+i}),i+=s.byteLength;if((i<512||0!=i%512)&&y("Input size",i,"is not correct for an SQLite database."),!o){const e=new Uint8Array(20);r.read(e,{at:0}),x.affirmDbHeader(e)}r.write(new Uint8Array([1,1]),{at:4114})}catch(a){throw this.setAssociatedPath(r,"",0),a}return this.setAssociatedPath(r,e,E.SQLITE_OPEN_MAIN_DB),i}importDb(e,t){if(t instanceof ArrayBuffer)t=new Uint8Array(t);else if(t instanceof Function)return this.importDbChunked(e,t);const r=n(this,_).get(e)||this.nextAvailableSAH()||y("No available handles to import to."),s=t.byteLength;(s<512||s%512!=0)&&y("Byte array size is invalid for an SQLite db.");const i="SQLite format 3";for(let n=0;n<15;++n)i.charCodeAt(n)!==t[n]&&y("Input does not contain an SQLite database header.");const o=r.write(t,{at:I});return o!=s?(this.setAssociatedPath(r,"",0),y("Expected to write "+s+" bytes but wrote "+o+".")):(r.write(new Uint8Array([1,1]),{at:4114}),this.setAssociatedPath(r,e,E.SQLITE_OPEN_MAIN_DB)),o}}t=new WeakMap,s=new WeakMap,l=new WeakMap,c=new WeakMap,_=new WeakMap,u=new WeakMap,d=new WeakMap,f=new WeakMap,p=new WeakMap,h=new WeakMap,m=new WeakMap,g=new WeakSet,q=function(e,...t){n(this,m)>e&&N[e](this.vfsName+":",...t)};class G{constructor(e){i(this,b),o(this,b,e),this.vfsName=e.vfsName}async addCapacity(e){return n(this,b).addCapacity(e)}async reduceCapacity(e){return n(this,b).reduceCapacity(e)}getCapacity(){return n(this,b).getCapacity(n(this,b))}getFileCount(){return n(this,b).getFileCount()}getFileNames(){return n(this,b).getFileNames()}async reserveMinimumCapacity(e){const t=n(this,b).getCapacity();return t<e?n(this,b).addCapacity(e-t):t}exportFile(e){return n(this,b).exportFile(e)}importDb(e,t){return n(this,b).importDb(e,t)}async wipeFiles(){return n(this,b).reset(!0)}unlink(e){return n(this,b).deletePath(e)}async removeVfs(){return n(this,b).removeVfs()}pauseVfs(){return n(this,b).pauseVfs(),this}async unpauseVfs(){return n(this,b).unpauseVfs().then(()=>this)}isPaused(){return n(this,b).isPaused()}}b=new WeakMap,e.installOpfsSAHPoolVfs=async function(t=Object.create(null)){var r;const s=(t=Object.assign(Object.create(null),C,t||{})).name;if(t.$testThrowPhase1)throw t.$testThrowPhase1;if(v[s])try{return await v[s]}catch(n){if(!t.forceReinitIfPreviouslyFailed)throw n;delete v[s]}return globalThis.FileSystemHandle&&globalThis.FileSystemDirectoryHandle&&globalThis.FileSystemFileHandle&&globalThis.FileSystemFileHandle.prototype.createSyncAccessHandle&&(null==(r=null==navigator?void 0:navigator.storage)?void 0:r.getDirectory)?v[s]=(async()=>{const e=await navigator.storage.getDirectory(),t=".opfs-sahpool-sync-check-"+O(),r=await e.getFileHandle(t,{create:!0}),s=(await r.createSyncAccessHandle()).close();return await s,await e.removeEntry(t),(null==s?void 0:s.then)&&y("The local OPFS API is too old for opfs-sahpool:","it has an async FileSystemSyncAccessHandle.close() method."),!0})().then(async function(){if(t.$testThrowPhase2)throw t.$testThrowPhase2;const r=new V(t);return r.isReady.then(async()=>{const t=new G(r);if(e.oo1){const s=e.oo1,n=r.getVfs(),i=function(...e){const t=s.DB.dbCtorHelper.normalizeArgs(...e);t.vfs=n.$zName,s.DB.dbCtorHelper.call(this,t)};i.prototype=Object.create(s.DB.prototype),t.OpfsSAHPoolDb=i}return r.log("VFS initialized."),t}).catch(async e=>{throw await r.removeVfs().catch(()=>{}),e})}).catch(e=>v[s]=Promise.reject(e)):v[s]=Promise.reject(new Error("Missing required OPFS APIs."))}}),void 0!==c){const e=Object.assign(Object.create(null),{exports:void 0===Ee?c.asm:Ee,memory:c.wasmMemory},globalThis.sqlite3ApiConfig||{});let r;globalThis.sqlite3ApiConfig=e;try{r=globalThis.sqlite3ApiBootstrap()}catch(t){throw console.error("sqlite3ApiBootstrap() error:",t),t}finally{delete globalThis.sqlite3ApiBootstrap,delete globalThis.sqlite3ApiConfig}c.sqlite3=r}else console.warn("This is not running in an Emscripten module context, so","globalThis.sqlite3ApiBootstrap() is _not_ being called due to lack","of config info for the WASM environment.","It must be called manually.")},_});const _=function(){var e,t;const r=c;if(!r)throw new Error("Expecting globalThis.sqlite3InitModule to be defined by the Emscripten build.");const s=globalThis.sqlite3InitModuleState=Object.assign(Object.create(null),{moduleScript:null==(e=null==globalThis?void 0:globalThis.document)?void 0:e.currentScript,isWorker:"undefined"!=typeof WorkerGlobalScope,location:globalThis.location,urlParams:(null==(t=null==globalThis?void 0:globalThis.location)?void 0:t.href)?new URL(globalThis.location.href).searchParams:new URLSearchParams});if(s.debugModule=s.urlParams.has("sqlite3.debugModule")?(...e)=>console.warn("sqlite3.debugModule:",...e):()=>{},s.urlParams.has("sqlite3.dir"))s.sqlite3Dir=s.urlParams.get("sqlite3.dir")+"/";else if(s.moduleScript){const e=s.moduleScript.src.split("/");e.pop(),s.sqlite3Dir=e.join("/")+"/"}if(globalThis.sqlite3InitModule=function e(...t){return r(...t).then(t=>{t.runSQLite3PostLoadInit(t);const r=t.sqlite3;r.scriptInfo=s,e.__isUnderTest&&(r.__isUnderTest=!0);const n=r.asyncPostInit;delete r.asyncPostInit;return n()}).catch(e=>{throw console.error("Exception loading sqlite3 module:",e),e})},globalThis.sqlite3InitModule.ready=r.ready,globalThis.sqlite3InitModuleState.moduleScript){const e=globalThis.sqlite3InitModuleState;let t=e.moduleScript.src.split("/");t.pop(),e.scriptDir=t.join("/")+"/"}return s.debugModule("sqlite3InitModuleState =",s),globalThis.sqlite3InitModule}();c=_,globalThis.sqlite3Worker1Promiser=function e(t=e.defaultConfig){if(1===arguments.length&&"function"==typeof arguments[0]){const r=t;(t=Object.assign(Object.create(null),e.defaultConfig)).onready=r}else t=Object.assign(Object.create(null),e.defaultConfig,t);const r=Object.create(null),s=function(){},n=t.onerror||s,i=t.debug||s,o=t.generateMessageId?void 0:Object.create(null),a=t.generateMessageId||function(e){return e.type+"#"+(o[e.type]=(o[e.type]||0)+1)},l=(...e)=>{throw new Error(e.join(" "))};let c,_;return t.worker||(t.worker=e.defaultConfig.worker),"function"==typeof t.worker&&(t.worker=t.worker()),t.worker.onmessage=function(e){e=e.data,i("worker1.onmessage",e);let s=r[e.messageId];if(!s)return e&&"sqlite3-api"===e.type&&"worker1-ready"===e.result?void(t.onready&&t.onready(_)):(s=r[e.type],s&&s.onrow?void s.onrow(e):void(t.onunhandled?t.onunhandled(arguments[0]):n("sqlite3Worker1Promiser() unhandled worker message:",e)));switch(delete r[e.messageId],e.type){case"error":return void s.reject(e);case"open":c||(c=e.dbId);break;case"close":e.dbId===c&&(c=void 0)}try{s.resolve(e)}catch(o){s.reject(o)}},_=function(){let e;1===arguments.length?e=arguments[0]:2===arguments.length?(e=Object.create(null),e.type=arguments[0],e.args=arguments[1],e.dbId=e.args.dbId):l("Invalid arguments for sqlite3Worker1Promiser()-created factory."),e.dbId||"open"===e.type||(e.dbId=c),e.messageId=a(e),e.departureTime=performance.now();const s=Object.create(null);let n;s.message=e,"exec"===e.type&&e.args&&("function"==typeof e.args.callback?(n=e.messageId+":row",s.onrow=e.args.callback,e.args.callback=n,r[n]=s):"string"==typeof e.args.callback&&l("exec callback may not be a string when using the Promise interface."));let o=new Promise(function(n,o){s.resolve=n,s.reject=o,r[e.messageId]=s,i("Posting",e.type,"message to Worker dbId="+(c||"default")+":",e),t.worker.postMessage(e)});return n&&(o=o.finally(()=>delete r[n])),o}},globalThis.sqlite3Worker1Promiser.defaultConfig={worker:function(){return new Worker(new URL(""+new URL("sqlite3-worker1-bundler-friendly-juPNM2x5.js",import.meta.url).href,import.meta.url),{type:"module"})},onerror:(...e)=>console.error("worker1 promiser error",...e)},sqlite3Worker1Promiser.v2=function(e){let t;"function"==typeof e?(t=e,e={}):"function"==typeof(null==e?void 0:e.onready)&&(t=e.onready,delete e.onready);const r=Object.create(null);e=Object.assign(e||Object.create(null),{onready:async function(e){try{t&&await t(e),r.resolve(e)}catch(s){r.reject(s)}}});const s=new Promise(function(e,t){r.resolve=e,r.reject=t});try{this.original(e)}catch(n){r.reject(n)}return s}.bind({original:sqlite3Worker1Promiser}),sqlite3Worker1Promiser.v2;const u=globalThis.sqlite3Worker1Promiser;export{c as default,u as sqlite3Worker1Promiser};
