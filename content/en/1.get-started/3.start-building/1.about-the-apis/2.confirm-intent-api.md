---
title: Define payment intents
description: Learn how to specify payment scenarios using productType, subProductType, and txnType parameters.
draft: true
---

## Define payment intents

When you create a payment, you need to specify the payment scenarioâ€”such as saving card information, processing subscription charges, or accepting digital wallet payments. Onerway uses three parameters in combination to define a payment intent:

- `productType`: The payment product (card, local payment method, QR code)
- `subProductType`: The payment model (direct, tokenized, subscription, installment)
- `txnType`: The transaction type (sale, refund, authorization, capture)

Together, these parameters tell Onerway exactly how to process the payment and what actions to take.

## Product type

The `productType` parameter specifies which payment product you want to use. This determines the payment flow and which payment methods you can accept.

### Supported product types

Onerway supports the following product types:

#### Card payments

Accept credit and debit card payments from international card networks including Visa, Mastercard, and American Express.

**Use card payments for:**
- Online checkout
- Recurring subscription billing
- Saving cards on file
- Installment payments

**Compatible payment models**: Direct, Token, Subscribe, Installment

---

#### Local payment methods

Accept region-specific payment methods such as Alipay, WeChat Pay, and other digital wallets popular in specific markets.

**Use local payment methods for:**
- Serving customers in specific regions
- Offering familiar payment options
- Reducing payment friction for local users

**Compatible payment models**: Direct, Subscribe

::callout{type="info"}
**Regional availability**: The local payment methods available to you depend on your account configuration and geographic region.
::

---

#### Merchant scan (Payment code)

Customers present a payment code that you scan to collect payment. Common in brick-and-mortar retail environments.

**Use merchant scan for:**
- Point of sale systems
- Retail checkout counters
- Restaurant payments

**How it works:**
1. Customer opens their payment app and displays a payment code
2. You scan the code with your terminal or device
3. Payment is processed instantly

::callout{type="warning"}
**Limited availability**: Currently only supported by Alipay.
::

---

#### Customer scan (Order code)

You generate an order QR code that customers scan to complete payment. No merchant interaction required.

**Use customer scan for:**
- Self-service kiosks
- Table ordering in restaurants
- Bill payments
- Vending machines

**How it works:**
1. Your system generates an order-specific QR code
2. Customer scans the code with their payment app
3. Customer completes payment in their app
4. You receive payment confirmation

::callout{type="warning"}
**Limited availability**: Currently only supported by Alipay.
::

### Choose a product type

Use this table to determine which product type best fits your business model:

| If your business... | Use | Why |
|---------------------|-----|-----|
| Serves international customers or operates cross-border | `CARD` | Supports global card networks and reaches customers worldwide |
| Operates primarily in specific regions with strong local payment preferences | `LPMS` | Offers familiar payment options like WeChat Pay and Alipay |
| Has physical retail locations | `PAYMENT_CODE` | Enables fast in-person checkout with merchant scanning |
| Uses self-service kiosks or unmanned retail | `ORDER_CODE` | Lets customers pay without staff interaction |

::callout{type="info"}
**Accept multiple payment methods**: Set `productType: "ALL"` to display an aggregated checkout page. Onerway automatically shows all enabled payment methods based on your account configuration, letting customers choose their preferred option.
::

## Payment model

The `subProductType` parameter specifies the payment model and processing method. It works together with `productType` to precisely describe the payment scenario you want to implement.

### Supported payment models

#### Direct payments

Process immediate, one-time payments. Funds are captured in real-time when the customer completes the transaction.

**How it works:**
1. Customer initiates payment
2. Onerway processes the payment immediately
3. Funds are transferred to your account (subject to settlement schedule)

**When to use**: Standard e-commerce checkout, one-time purchases, immediate payment collection.

**Example configuration:**

```json
{
  "productType": "CARD",
  "subProductType": "DIRECT"
}
```

Or with local payment methods:

```json
{
  "productType": "LPMS",
  "subProductType": "DIRECT"
}
```

---

#### Tokenized payments

Save sensitive card information as a secure token for future use. Tokenization enhances security by storing a placeholder instead of actual card details.

**How it works:**
1. During the first payment, Onerway generates a token representing the card
2. Your system saves the token (not the real card number)
3. For subsequent payments, you use the token to charge the card

**When to use**: Save customers' payment methods for faster checkout without asking them to re-enter card details.

**Example configuration:**

```json
{
  "productType": "CARD",
  "subProductType": "TOKEN"
}
```

::callout{type="info"}
**PCI compliance**: Tokenization reduces your PCI compliance scope because you never store actual card numbers.
::

---

#### Subscription payments

Enable recurring, automatic charges for subscription-based businesses. Onerway automatically initiates charges according to your defined billing cycle.

**How it works:**
1. Customer authorizes recurring payments during initial setup
2. Your system saves the payment credentials
3. You initiate charges according to the billing schedule (or let Onerway handle automatic billing)
4. Customer can cancel the subscription at any time

**When to use**: SaaS subscriptions, membership fees, recurring services, automatic renewals.

**Example configuration:**

```json
{
  "productType": "CARD",
  "subProductType": "SUBSCRIBE"
}
```

---

#### Installment payments

Split the total amount into multiple smaller payments over time. This reduces the upfront cost for customers and can increase conversion for high-value purchases.

**How it works:**
1. Customer selects the number of installments
2. Onerway calculates the amount for each installment
3. The first installment is charged immediately
4. Subsequent installments are charged automatically on schedule

**When to use**: High-value purchases, consumer electronics, furniture, luxury items.

**Example configuration:**

```json
{
  "productType": "CARD",
  "subProductType": "INSTALLMENT"
}
```

### Choose a payment model

Use this table to select the payment model that fits your business needs:

| If you need to... | Use | Key benefit |
|-------------------|-----|-------------|
| Process one-time payments | `DIRECT` | Simple and immediate settlement |
| Save payment methods securely | `TOKEN` | Reduced PCI scope and faster repeat purchases |
| Charge customers on a recurring schedule | `SUBSCRIBE` | Automated billing and improved retention |
| Offer flexible payment terms for expensive items | `INSTALLMENT` | Lower barriers to purchase and higher conversion |

### Relationship with product type

Different product types support different payment models:

| Product Type | Supported Payment Models | Notes |
|-------------|-------------------------|-------|
| `CARD` | DIRECT, TOKEN, SUBSCRIBE, INSTALLMENT | Card payments support all models |
| `LPMS` | DIRECT, SUBSCRIBE | Most local payment methods support direct payments; some wallets support subscriptions |
| `PAYMENT_CODE` | DIRECT | Merchant scan only supports direct payments |
| `ORDER_CODE` | DIRECT | Customer scan only supports direct payments |

## Transaction type

The `txnType` parameter specifies the transaction type and determines how Onerway processes the payment. Different transaction types correspond to different fund flows.

### Supported transaction types

#### Standard sale

Process a standard payment transaction. Funds are immediately captured when the customer completes the payment.

**When to use**: Most common transaction type for one-time purchases and immediate payment collection.

**Example configuration:**

```json
{
  "productType": "CARD",
  "subProductType": "DIRECT",
  "txnType": "SALE"
}
```

Or with local payment methods:

```json
{
  "productType": "LPMS",
  "subProductType": "DIRECT",
  "txnType": "SALE"
}
```

---

#### Refunds

Reverse a completed transaction and return funds to the customer. Onerway treats sales as forward transactions and refunds as reverse transactions.

**When to use**: Process customer refund requests for previously completed payments.

**You'll see this transaction type in:**
- API query responses
- Webhook notifications

**Example in responses:**

```json
{
  "txnType": "REFUND"
}
```

---

#### Save card

Save a customer's card information without charging them. This creates a token you can use for future payments.

**When to use**: Collect payment method details for future use without immediate charge, such as trial sign-ups or delayed billing.

**You'll see this transaction type in:**
- API query responses
- Webhook notifications

**Example in responses:**

```json
{
  "txnType": "BIND_CARD"
}
```

---

#### Pre-authorization flow

Pre-authorization (also called manual capture) reserves funds on a customer's account without immediately charging them. This is useful for scenarios where the final amount isn't known upfront, such as hotel bookings or car rentals.

**How pre-authorization works:**

**1. Authorize (AUTH)**: Reserve funds on the customer's account

Request authorization to verify the payment method and hold the specified amount:

```json
{
  "txnType": "AUTH",
  "amount": "10000",
  "currency": "USD"
}
```

**2. Capture (CAPTURE)**: Finalize the charge

Capture the reserved funds to actually collect payment:

```json
{
  "txnType": "CAPTURE",
  "transactionId": "original_auth_transaction_id"
}
```

You can capture the full amount or a partial amount if the final total is less than the authorized amount.

**3. Void (VOID)**: Cancel the authorization

Release the reserved funds without charging the customer:

```json
{
  "txnType": "VOID",
  "transactionId": "original_auth_transaction_id"
}
```

**4. Automatic expiration**: If not captured, the authorization automatically expires and releases the funds

::callout{type="warning"}
**Authorization expiration**: Authorizations automatically expire if not captured. The maximum hold period is 7 days, which you can configure in your [account settings](#){badge="TODO"}. After expiration, funds are automatically released to the customer.
::

::callout{type="info"}
**Partial captures**: You can capture less than the authorized amount if the final total is lower. For example, if you authorized $100 but only need to charge $75, you can capture $75 and the remaining $25 is automatically released.
::

## Mobile wallet integration

Some digital wallets, such as WeChat Pay and DANA, can launch their native apps on mobile devices for a seamless payment experience. When accepting these payment methods, you need to specify additional parameters to enable in-app payments.

### Required parameters for in-app payments

| Parameter | Description | Possible values |
|-----------|-------------|-----------------|
| `paymentMode` | How the payment is initiated | `IN_APP`, `WEB` |
| `osType` | Customer's operating system | `IOS`, `ANDROID` |
| `lpmsInfo` | Local payment method details | JSON string with `lpmsType` |

### Example: WeChat Pay in-app payment

```json
{
  "productType": "LPMS",
  "subProductType": "DIRECT",
  "txnType": "SALE",
  "paymentMode": "IN_APP",
  "osType": "IOS",
  "lpmsInfo": "{\"lpmsType\":\"WeChat\"}"
}
```

### Example: DANA in-app payment

```json
{
  "productType": "LPMS",
  "subProductType": "DIRECT",
  "txnType": "SALE",
  "paymentMode": "IN_APP",
  "osType": "ANDROID",
  "lpmsInfo": "{\"lpmsType\":\"DANA\"}"
}
```

::callout{type="info"}
For a complete list of supported local payment methods and their integration requirements, see [Local payment methods guide](#){badge="TODO"}.
::
