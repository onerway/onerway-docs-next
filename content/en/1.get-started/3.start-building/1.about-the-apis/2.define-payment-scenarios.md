---
title: Define payment scenarios
description: Learn how to configure payment flows using productType, subProductType, and txnType parameters.
draft: true
---

Define the payment scenario by combining three parameters: `productType`, `subProductType`, and `txnType`. These parameters tell Onerway what payment product to use, how to process the payment, and what funds flow to execute.

| Parameter | Purpose | Examples |
|-----------|---------|----------|
| `productType` | Payment product | Card, local payment method, QR code |
| `subProductType` | Payment model | Direct, tokenized, subscription, installment |
| `txnType` | Transaction type | Sale, refund, authorization, capture |

## Choose a product type

The `productType` parameter specifies which payment product to use. This determines the payment flow and available payment methods.

::prose-accordion
---
type: multiple
defaultValue: ["0", "1"]
---

  :::prose-accordion-item{icon="i-lucide-credit-card" badge="CARD"}

  #label
  ### Card payments

  #content
  Accept credit and debit cards from international networks including Visa, Mastercard, and American Express.

  Use for: Online checkout, recurring subscriptions, saving cards, installment payments.

  Compatible models: `DIRECT`, `TOKEN`, `SUBSCRIBE`, `INSTALLMENT`.
  :::

  :::prose-accordion-item{icon="i-lucide-wallet" badge="LPMS"}

  #label
  ### Local payment methods

  #content
  Accept region-specific payment methods such as Alipay, WeChat Pay, and other digital wallets popular in specific markets.

  Use for: Regional customers, familiar payment options, reducing payment friction.

  Compatible models: `DIRECT`, `SUBSCRIBE`.

    ::::note
    The local payment methods available to you depend on your account configuration and geographic region.
    ::::
  :::

  :::prose-accordion-item{icon="i-lucide-scan-line" badge="Payment code"}

  #label
  ### Merchant scan

  #content
  Customers present a payment code that you scan to collect payment. Common in brick-and-mortar retail environments.

  Use for: Point of sale systems, retail checkout counters, restaurant payments

  How it works:
  1. Customer opens their payment app and displays a payment code
  2. You scan the code with your terminal or device
  3. Payment is processed instantly

  Compatible models: `DIRECT` only

    ::::warning
    Currently only supported by Alipay.
    ::::
  :::

  :::prose-accordion-item{icon="i-lucide-qr-code" badge="Order code"}

  #label
  ### Customer scan

  #content
  You generate an order QR code that customers scan to complete payment. No merchant interaction required.

  Use for: Self-service kiosks, table ordering, bill payments, vending machines

  How it works:
  1. Your system generates an order-specific QR code
  2. Customer scans the code with their payment app
  3. Customer completes payment in their app
  4. You receive payment confirmation

  Compatible models: `DIRECT` only

    ::::warning
    Currently only supported by Alipay.
    ::::
  :::
::

### Product type selection guide

| If your business... | Use | Why |
|---------------------|-----|-----|
| Serves international customers or operates cross-border | `CARD` | Supports global card networks |
| Operates in regions with strong local payment preferences | `LPMS` | Offers familiar options like WeChat Pay |
| Has physical retail locations | `PAYMENT_CODE` | Fast in-person checkout |
| Uses self-service kiosks or unmanned retail | `ORDER_CODE` | Customers pay without staff |

::tip
Set `productType: "ALL"` to display an aggregated checkout page with all enabled payment methods.
::

## Choose a payment model

The `subProductType` parameter specifies the payment model and processing method. It works with `productType` to precisely describe the payment scenario.

::prose-accordion
---
type: multiple
defaultValue: ["0", "1", "2", "3"]
---

  :::prose-accordion-item{icon="i-lucide-zap" badge="DIRECT"}

  #label
  ### Direct payments

  #content
  Process immediate, one-time payments. Funds are captured in real-time when the customer completes the transaction.

  When to use: Standard e-commerce checkout, one-time purchases, immediate payment collection.

    ::::prose-tabs{variant="pill" sync="product-type"}
      :::::prose-tabs-item{label="Card" value="card" icon="i-lucide-credit-card"}
      ```json
      {
        "productType": "CARD",
        "subProductType": "DIRECT"
      }
      ```
      :::::

      :::::prose-tabs-item{label="LPMS" value="lpms" icon="i-lucide-wallet"}
      Replace `WeChat` with the actual payment method type (such as `Alipay`, `DANA`):

      ```json
      {
        "lpmsInfo": "{\"lpmsType\":\"WeChat\"}",
        "productType": "LPMS",
        "subProductType": "DIRECT"
      }
      ```
      :::::
    ::::
  :::

  :::prose-accordion-item{icon="i-lucide-key" badge="TOKEN"}

  #label
  ### Tokenized payments

  #content
  Save sensitive card information as a secure token for future use. Tokenization enhances security by storing a placeholder instead of actual card details.

  When to use: Save customers' payment methods for faster checkout without re-entering card details.

  ```json
  {
    "productType": "CARD",
    "subProductType": "TOKEN"
  }
  ```

    ::::note
    Tokenization reduces your PCI (Payment Card Industry) compliance scope because you never store actual card numbers.
    ::::
  :::

  :::prose-accordion-item{icon="i-lucide-repeat" badge="SUBSCRIBE"}

  #label
  ### Subscription payments

  #content
  Enable recurring, automatic charges for subscription-based businesses. Onerway initiates charges according to your defined billing cycle.

  When to use: SaaS subscriptions, membership fees, recurring services, automatic renewals.

  The `subscription` field contains a JSON string specifying the subscription details:

  ```json
  {
    "productType": "CARD",
    "subProductType": "SUBSCRIBE",
    "subscription": "{...}"
  }
  ```
  :::

  :::prose-accordion-item{icon="i-lucide-calendar" badge="INSTALLMENT"}

  #label
  ### Installment payments

  #content
  Split the total amount into multiple smaller payments over time. This reduces the upfront cost for customers and can increase conversion for high-value purchases.

  When to use: High-value purchases, consumer electronics, furniture, luxury items.

  ```json
  {
    "productType": "CARD",
    "subProductType": "INSTALLMENT"
  }
  ```
  :::
::

### Payment model selection guide

| If you need to... | Use | Key benefit |
|-------------------|-----|-------------|
| Process one-time payments | `DIRECT` | Simple and immediate settlement |
| Save payment methods securely | `TOKEN` | Reduced PCI scope, faster repeat purchases |
| Charge customers on a recurring schedule | `SUBSCRIBE` | Automated billing, improved retention |
| Offer flexible payment terms | `INSTALLMENT` | Lower barriers, higher conversion |

### Payment model compatibility

| Product Type | Supported Payment Models |
|-------------|-------------------------|
| `CARD` | DIRECT, TOKEN, SUBSCRIBE, INSTALLMENT |
| `LPMS` | DIRECT, SUBSCRIBE |
| `PAYMENT_CODE` | DIRECT |
| `ORDER_CODE` | DIRECT |

## Specify the transaction type

The `txnType` parameter determines how Onerway processes the payment. Different transaction types correspond to different fund flows.

::prose-accordion
---
type: multiple
defaultValue: ["0", "1", "2", "3"]
---

  :::prose-accordion-item{icon="i-lucide-shopping-cart" badge="SALE"}

  #label
  ### Standard

  #content
  Process a standard payment transaction. Funds are immediately captured when the customer completes the payment.

  When to use: Most common transaction type for one-time purchases and immediate payment collection.

    ::::prose-tabs{variant="pill" sync="product-type"}
      :::::prose-tabs-item{label="Card" value="card" icon="i-lucide-credit-card"}
      ```json
      {
        "productType": "CARD",
        "subProductType": "DIRECT",
        "txnType": "SALE"
      }
      ```
      :::::

      :::::prose-tabs-item{label="LPMS" value="lpms" icon="i-lucide-wallet"}
      ```json
      {
        "lpmsInfo": "{\"lpmsType\":\"WeChat\"}",
        "productType": "LPMS",
        "subProductType": "DIRECT",
        "txnType": "SALE"
      }
      ```
      :::::
    ::::
  :::

  :::prose-accordion-item{icon="i-lucide-undo-2" badge="REFUND"}

  #label
  ### Refund

  #content
  Reverse a completed transaction and return funds to the customer. Onerway treats sales as forward transactions and refunds as reverse transactions.

  When to use: Process customer refund requests for previously completed payments.

  You'll see this transaction type in API query responses and webhook notifications:

  ```json
  {
    "txnType": "REFUND"
  }
  ```
  :::

  :::prose-accordion-item{icon="i-lucide-save" badge="BIND_CARD"}

  #label
  ### Save card

  #content
  Save a customer's card information without charging them. This creates a token you can use for future payments.

  When to use: Collect payment method details for future use without immediate charge, such as trial sign-ups or delayed billing.

  You'll see this transaction type in API query responses and webhook notifications:

  ```json
  {
    "txnType": "BIND_CARD"
  }
  ```
  :::

  :::prose-accordion-item{icon="i-lucide-lock"}
  ---
  badges:
    - label: AUTH
    - label: CAPTURE
    - label: VOID
  ---

  #label
  ### Pre-authorization

  #content
  Pre-authorization reserves funds on a customer's card without immediately charging them. Use this for scenarios where the final amount isn't known upfront, such as hotel bookings or car rentals.

  The pre-authorization flow has three steps:

  ```mermaid
  flowchart LR
      A([Start]) --> B(AUTH)
      B -->|Funds reserved| C{Decision}
      C -->|Charge full| D(CAPTURE $100)
      C -->|Charge partial| E(CAPTURE $75)
      C -->|Cancel| F(VOID)
      C -.->|No action| G(Expired)
      D --> H([Complete])
      E --> H
      E -.->|$25 auto-released| I([Released])
      F --> I
      G -->|After 7 days| I
  ```

  **1. Authorize (AUTH)** — Reserve funds on the customer's card:

  ```json
  {
    "txnType": "AUTH",
    "amount": "10000",
    "currency": "USD"
  }
  ```

  **2. Capture (CAPTURE)** — Finalize the charge (full or partial amount):

  ```json
  {
    "txnType": "CAPTURE",
    "originTransactionId": "original_auth_transaction_id"
  }
  ```

  **3. Void (VOID)** — Cancel the authorization and release funds:

  ```json
  {
    "txnType": "VOID",
    "originTransactionId": "original_auth_transaction_id"
  }
  ```

  If not captured, the authorization automatically expires and releases the funds.

    ::::warning
    Authorizations expire after 7 days by default. Configure this in your [account settings](#){badge="TODO"}. Uncaptured funds are automatically released.
    ::::

    ::::tip
    You can capture less than the authorized amount. For example, authorize $100, capture $75, and the remaining $25 is automatically released.
    ::::
  :::
::

## Mobile wallet integration

Some digital wallets, such as WeChat Pay and DANA, can launch their native apps on mobile devices for a seamless payment experience. Specify additional parameters to enable in-app payments.

| Parameter | Description | Values |
|-----------|-------------|--------|
| `paymentMode` | How the payment is initiated | `IN_APP`, `WEB` |
| `osType` | Customer's operating system | `IOS`, `ANDROID` |
| `lpmsInfo` | Local payment method details | JSON string with `lpmsType` |

::prose-tabs{variant="pill"}
  :::prose-tabs-item{label="WeChat Pay (iOS)" value="wechat" icon="i-lucide-smartphone"}
  ```json
  {
    "productType": "LPMS",
    "subProductType": "DIRECT",
    "txnType": "SALE",
    "paymentMode": "IN_APP",
    "osType": "IOS",
    "lpmsInfo": "{\"lpmsType\":\"WeChat\"}"
  }
  ```
  :::

  :::prose-tabs-item{label="DANA (Android)" value="dana" icon="i-lucide-smartphone"}
  ```json
  {
    "productType": "LPMS",
    "subProductType": "DIRECT",
    "txnType": "SALE",
    "paymentMode": "IN_APP",
    "osType": "ANDROID",
    "lpmsInfo": "{\"lpmsType\":\"DANA\"}"
  }
  ```
  :::
::

::note
For a complete list of supported local payment methods and their integration requirements, see [Local payment methods guide](#){badge="TODO"}.
::
