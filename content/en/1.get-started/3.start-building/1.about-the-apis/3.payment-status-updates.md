---
title: Payment Status Updates
description: Monitor and verify payment status to respond to successful and failed payments.
draft: true
---

Payment Intents update in response to actions taken by the customer or payment method. Your integration can inspect the Payment Intent to determine the status of the payment process, which allows you to take business actions or respond to states that require intervention.

## Check payment status on the client

When completing a payment on the client with the [onPaymentCompleted](#){badge="TODO"} callback, the returned status indicates the payment result. However, this status should not be treated as the final order state because edge cases can cause inconsistencies.

Use this status only to display payment results to users. Do not update your order system based on this client-side status alone.

```javascript
onPaymentCompleted: function (res) {
  const txnInfo = res.data
  const respCode = res.respCode
  const respMsg = res.respMsg

  if (respCode === '20000') {
    switch (txnInfo.status) {
      case 'S':
        // Payment succeeded - show success message to user
        break
      case 'R':
        // 3DS verification required - redirect user
        window.location.href = txnInfo.redirectUrl
        break
    }
  } else {
    // Payment failed - show error message
  }
}
```

The following are possible outcomes when using `onPaymentCompleted`:

| Status | What happened | Expected integration |
|--------|---------------|----------------------|
| `S` | Customer completed payment and charge succeeded | Query the [Order Query API](#){badge="TODO"} for final status. If confirmed `S`, update your order and notify the customer of success. |
| `F` | Customer completed payment but charge failed | Query the [Order Query API](#){badge="TODO"} for final status. If confirmed `F`, update your order. Create a new Payment Intent to refresh the checkout. |
| `R` | Customer triggered 3DS authentication | Redirect the customer to the 3DS challenge page. |

## Check order status without onPaymentCompleted

To check order status without using `onPaymentCompleted`, you have two options:

### Use API response

When calling the Onerway [Direct API](#){badge="TODO"}, the response directly returns the payment status. Use this status to immediately update your order or execute subsequent business logic.

| Status | What happened | Expected integration |
|--------|---------------|----------------------|
| `S` | Customer completed payment and charge succeeded | Notify the customer of success and update your order. This is a final status. |
| `F` | Customer completed payment but charge failed | Notify the customer of failure and update your order. Create a new Payment Intent to refresh the checkout. This is a final status. |
| `R` | Customer triggered 3DS authentication | Redirect the customer to the 3DS challenge page. |
| `P` | Payment is processing | Notify the customer that payment is processing. Poll the [Order Query API](#){badge="TODO"} until you receive a final status (`S` or `F`). |

### Use return URL

When calling the Onerway API, include the `returnUrl` parameter with your order reference. After payment completes, Onerway redirects back to this URL with the order reference. Use this reference to poll the [Order Query API](#){badge="TODO"} until you receive a final status.

Learn more about [configuring return URLs](/get-started/start-building/about-the-apis/returnurl).

## Monitor payment status with webhooks

Onerway sends webhook events to your server when a payment reaches a final status. Use webhooks to determine when to fulfill goods and services.

Don't attempt to handle order fulfillment on the client side because customers can leave the page after payment completes but before the fulfillment process initiates. Instead, use webhooks to monitor the payment status and handle fulfillment asynchronously.

::callout{type="warning" title="Caution"}
While polling the [Order Query API](#){badge="TODO"} is technically possible, relying solely on this approach is less reliable. Users closing the page interrupts polling, and frequent requests may trigger rate limiting. Onerway strongly recommends a webhook + polling approach: webhooks for real-time status updates, polling as a fallback to catch any missed orders.
::

To receive payment notifications, include the `notifyUrl` parameter when creating a payment request. Onerway sends webhook notifications to this URL when the order status reaches a final state.

To [handle webhook signatures](#){badge="TODO"}:

::callout{type="danger" title="Important"}
The following parameters are excluded from signature verification: `originTransactionId`, `originMerchantTxnId`, `customsDeclarationAmount`, `customsDeclarationCurrency`, `paymentMethod`, `walletTypeName`, `periodValue`, `tokenExpireTime`, `sign`. All other parameters, including any new parameters Onerway adds in the future, are included in signature verification.
::

### Handle webhook events

The following table describes how to handle webhook events:

| Status | What happened | Expected integration |
|--------|---------------|----------------------|
| `S` | Customer completed payment and charge succeeded | Notify the customer of success and update your order. |
| `F` | Customer completed payment but charge failed | Notify the customer of failure. Create a new Payment Intent to allow retry. |

## Handle follow-up actions

Some payment methods require additional steps to complete the payment process. Payment methods like OXXO and Trustly can't return results immediately.

In these cases, the API response returns `status: R`, and you redirect the user to the payment method's page. After the customer completes payment, these methods may take several days to process. Onerway handles this process and sends a webhook notification when the final status is available.

For these payment methods, waiting for webhooks is required. Polling the Order Query API only returns `status: P` until the payment completes, which provides limited value.

