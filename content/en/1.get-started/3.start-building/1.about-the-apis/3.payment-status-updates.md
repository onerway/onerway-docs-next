---
title: Payment Status Updates
description: Monitor and verify payment status to respond to successful and failed payments.
---

Payment status changes as customers complete actions in your checkout flow. Your integration can inspect the payment status to determine results and take appropriate business actions.

## Choose a verification method

| Method | Best for | Reliability |
|--------|----------|-------------|
| [Client callback](#check-payment-status-on-the-client) | Showing immediate feedback to users | Low—don't use for order fulfillment |
| [API response](#use-api-response) | Direct API integrations | Medium—depends on client-side polling |
| [Return URL](#use-return-url) | Redirect-based flows | Medium—requires polling |
| [Webhooks](#monitor-payment-status-with-webhooks) | Order fulfillment and backend processing | High—recommended |

## Check payment status on the client

When using the [onPaymentCompleted](#){badge="TODO"} callback, the returned status indicates the payment result. Use this status only to display results to users—don't update your order system based on client-side status alone.

```javascript
onPaymentCompleted: function (result) {
  const { respCode, respMsg, data: txnInfo } = result

  if (respCode === '20000') {
    switch (txnInfo.status) {
      case 'S':
        // Show success message to user
        // Query Order API for final confirmation before fulfillment
        break
      case 'R':
        // 3DS verification required
        window.location.href = txnInfo.redirectUrl
        break
      default:
        // Handle unexpected status
        break
    }
  } else {
    // Show error: respMsg contains the failure reason
    console.error('Payment failed:', respMsg)
  }
}
```

### Possible callback outcomes

| Status | What happened | Expected integration |
|--------|---------------|----------------------|
| `S` | Payment succeeded | Query the [Order Query API](#){badge="TODO"} for final status. If confirmed, update your order and notify the customer. |
| `F` | Payment failed | Query the [Order Query API](#){badge="TODO"} for final status. Create a new payment to allow retry. |
| `R` | 3DS authentication required | Redirect the customer to the 3DS challenge page using `txnInfo.redirectUrl`. |

## Check status without using callbacks

If you don't use `onPaymentCompleted`, you have two options to check payment status.

### Use API response

When calling the [Direct API](#){badge="TODO"}, the response includes the payment status. Use this to update your order or execute subsequent business logic.

| Status | What happened | Expected integration |
|--------|---------------|----------------------|
| `S` | Payment succeeded | Notify the customer and update your order. This is a final status. |
| `F` | Payment failed | Notify the customer and update your order. Create a new payment to allow retry. This is a final status. |
| `R` | 3DS authentication required | Redirect the customer to the 3DS challenge page. |
| `P` | Payment processing | Notify the customer that payment is processing. Poll the [Order Query API](#){badge="TODO"} until you receive a final status. |

### Use return URL

Include the `returnUrl` parameter with your order reference when calling the API. After payment completes, Onerway redirects to this URL with your order reference. Use the reference to poll the [Order Query API](#){badge="TODO"} for final status.

Learn more about [configuring return URLs](#){badge="TODO"}.

## Monitor payment status with webhooks

Onerway sends webhook events to your server when a payment reaches a final status. Use webhooks for order fulfillment—don't rely on client-side processing because customers can leave the page before fulfillment initiates.

To receive webhooks, include the `notifyUrl` parameter when creating a payment request.

::warning
While polling the [Order Query API](#){badge="TODO"} is possible, it's less reliable. Users closing the page interrupts polling, and frequent requests may trigger rate limiting. We recommend combining webhooks with polling: webhooks for real-time updates, polling as a fallback.
::

### Handle webhook events

| Status | What happened | Expected integration |
|--------|---------------|----------------------|
| `S` | Payment succeeded | Notify the customer and update your order. |
| `F` | Payment failed | Notify the customer. Create a new payment to allow retry. |

### Verify webhook signatures

When processing webhooks, verify the signature to ensure the request came from Onerway.

::caution
The following parameters are excluded from signature verification: `originTransactionId`, `originMerchantTxnId`, `customsDeclarationAmount`, `customsDeclarationCurrency`, `paymentMethod`, `walletTypeName`, `periodValue`, `tokenExpireTime`, `sign`. All other parameters—including any new parameters added in the future—are included.
::

Learn more about [handling webhook signatures](#){badge="TODO"}.

## Handle delayed payment methods

Some payment methods—like OXXO and Trustly—can't return results immediately. For these methods:

1. The API response returns `status: R`
2. You redirect the user to the payment method's page
3. The customer completes payment (may take several days)
4. Onerway sends a webhook when the final status is available

For delayed payment methods, webhooks are required. Polling the Order Query API returns `status: P` until payment completes.
